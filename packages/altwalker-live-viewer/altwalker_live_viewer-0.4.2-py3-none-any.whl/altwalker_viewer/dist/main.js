(()=>{var e={569:(e,t,n)=>{"use strict";n.r(t)},588:(e,t,n)=>{"use strict";n.r(t)},98:()=>{const e=new ModelVisualizer({container:"visualizer",editMode:!1}),t=d3.scaleLinear().range([.3,.8]).domain([0,5]).clamp(!0),n=e=>d3.interpolateYlGn(t(e));var s=null,o={},d={};function r(){e.repaint(),Object.keys(o).forEach((function(e){i(e,!1)})),d.id&&a(d)}function i(e,t){d3.select(`svg g#${e} rect`).style("fill",n(o[e])).style("stroke",n(o[e])),d3.select(`svg g#${e} path`).style("stroke",n(o[e])),t&&(d3.select(`svg g#${e}`).classed("current-node",!0).classed("current-edge",!0),d3.selectAll("svg .edgeLabels tspan").attr("class",(t=>t.name==e?"current-label":"")))}function a(e){d=e,d3.select(`svg g#${e.id} rect`).style("fill","#c0392b").style("stroke","#c0392b"),d3.select(`svg g#${e.id} path`).style("stroke","#c0392b")}window.addEventListener("resize",(function(){r()})),document.addEventListener("DOMContentLoaded",(function(){const e=function(){let e=!1;return{dragstart:function(t){t.preventDefault(),e=!0},dragmove:function(t){if(e){const e=t.pageX/window.innerWidth*100;if(e>30&&e<70){const t=99.95-e;document.getElementById("left").style.width=`${e}%`,document.getElementById("right").style.width=`${t}%`}}},dragend:function(){e&&r(),e=!1}}}(),t=document.getElementById("drag-bar");t.addEventListener("mousedown",e.dragstart),t.addEventListener("touchstart",e.dragstart),window.addEventListener("mousemove",e.dragmove),window.addEventListener("touchmove",e.dragmove),window.addEventListener("mouseup",e.dragend),window.addEventListener("touchend",e.dragend)}));const c={HIDE:"d-none",SHOW:"show",BADGE:"badge",BADGE_DANGER:"badge-danger",BADGE_WARNING:"badge-warning",BADGE_SUCCESS:"badge-success"};function l(e){return e<50?c.BADGE_DANGER:e<80?c.BADGE_WARNING:c.BADGE_SUCCESS}function u(){document.getElementById("setup-overlay").classList.remove(c.HIDE)}function m(){document.getElementById("setup-overlay").classList.add(c.HIDE),document.getElementById("error-alert").classList.add(c.HIDE),document.getElementById("warning-alert").classList.add(c.HIDE)}function g(e){let t=document.getElementById("error-alert");t.classList.remove(c.HIDE),t.classList.add(c.SHOW),document.getElementById("error-message").textContent=e}function E(){document.getElementById("settings-overlay").classList.remove("d-none")}function v(){document.getElementById("settings-overlay").classList.add("d-none")}function y(){document.getElementById("start-button-loading").classList.add("d-none"),document.getElementById("start-button").classList.remove("d-none")}function p(){!function(){let e=document.getElementById("stop-run-button");e.classList.remove(c.SHOW),e.classList.add(c.HIDE)}(),u()}function B(){const t=document.getElementById("graph-direction-input").value,n=document.getElementById("vertex-separation-input").value,s=document.getElementById("edge-separation-input").value,o=document.getElementById("rank-separation-input").value;!function(t){const n={rankdir:{"Top-Bottom":"TB","Bottom-Top":"BT","Left-Right":"LR","Right-Left":"RL"}[t.graphDirection],nodesep:t.vertexSeparation,edgesep:t.edgeSeparation,ranksep:t.rankSeparation};e.setGraphLayoutOptions(n)}({graphDirection:t,vertexSeparation:0==n?50:n,edgeSeparation:0==s?50:s,rankSeparation:0==o?50:o}),v()}async function f(){document.getElementById("start-button-loading").classList.remove("d-none"),document.getElementById("start-button").classList.add("d-none");let t=document.getElementById("port-input").value;if(!t)return y(),void document.getElementById("port-input").classList.add("is-invalid");document.getElementById("port-input").classList.remove("is-invalid");try{if(!(await fetch(`http://localhost:${t}/healthz`)).ok)return y(),void g("WebSocket server not running or incompatible versions. Please ensure that the WebSocket server is running and that both the server and client are using compatible versions.");const n=new WebSocket(`ws://localhost:${t}`);n.onerror=e=>{console.log("WebSocketError:",e),u(),g(`Could not connect to port: ${t}. Make sure the websocket server is running on the selected port.`)},n.onopen=()=>{n.send(JSON.stringify({type:"init",client:"viewer"})),n.send(JSON.stringify({type:"start"}))},n.onclose=()=>y(),n.onmessage=t=>function(t,n){const r=n.type;var u,g;r==I.START&&(document.getElementById("error-input").value="",document.getElementById("trace-input").value="",document.getElementById("output-input").value="",m(),y(),document.getElementById("current-step-form").classList.remove(c.HIDE),document.getElementById("statistics-form").classList.add("d-none"),u=n.models,e.setModels(u),e.repaint(),Object.keys(o).forEach((function(e){d3.select(`svg g#${e} path`).style("stroke","#7f8c8d")})),d={},o={}),r==I.STEP_START&&(function(e){const t=e.id||null,n=o[t]||0;o[t]=n+1,s&&function(e){d3.select(`svg g#${e}`).classed("current-node",!1).classed("current-edge",!1)}(s),t&&i(t,!0),s=t}(n.step),g=n.step,document.getElementById("id-input").value=g.id,document.getElementById("name-input").value=g.name,document.getElementById("model-input").value=g.modelName,g.data&&(document.getElementById("data-input").value=JSON.stringify(g.data,null,"  "))),r==I.STEP_END&&function(e){let t=document.getElementById("output-input"),n=document.getElementById("auto-scroll-checkbox").checked;t.value+=e.output,n&&(t.scrollTop=t.scrollHeight),e.error&&(a(e),document.getElementById("error-input").value=e.error.message,document.getElementById("trace-input").value=e.error.trace)}(n.result),r==I.END&&(document.getElementById("current-step-form").classList.add("d-none"),document.getElementById("statistics-form").classList.remove("d-none"),function(e){let t=document.getElementById("statistics-status");t.innerText=e?"Passed":"Failed",t.classList.add(c.BADGE),t.classList.add(e?c.BADGE_SUCCESS:c.BADGE_DANGER),t.classList.remove(e?c.BADGE_DANGER:c.BADGE_SUCCESS)}(n.status),function(e){document.getElementById("statistics-number-of-models").innerText=e.totalNumberOfModels,document.getElementById("statistics-completed-models").innerText=e.totalCompletedNumberOfModels,document.getElementById("statistics-failed-models").innerText=e.totalFailedNumberOfModels,document.getElementById("statistics-incomplete-models").innerText=e.totalIncompleteNumberOfModels,document.getElementById("statistics-not-executed-models").innerText=e.totalNotExecutedNumberOfModels;let t=document.getElementById("statistics-edge-coverage");t.innerText=`${e.edgeCoverage}%`,t.classList.remove(c.BADGE_DANGER,c.BADGE_WARNING,c.BADGE_SUCCESS),t.classList.add(c.BADGE,l(e.edgeCoverage)),document.getElementById("statistics-number-of-edges").innerText=e.totalNumberOfEdges,document.getElementById("statistics-visited-edges").innerText=e.totalNumberOfVisitedEdges,document.getElementById("statistics-unvisited-edges").innerText=e.totalNumberOfUnvisitedEdges;let n=document.getElementById("statistics-vertex-coverage");n.innerText=`${e.vertexCoverage}%`,n.classList.remove(c.BADGE_DANGER,c.BADGE_WARNING,c.BADGE_SUCCESS),n.classList.add(c.BADGE,l(e.vertexCoverage)),document.getElementById("statistics-number-of-vertices").innerText=e.totalNumberOfVertices,document.getElementById("statistics-visited-vertices").innerText=e.totalNumberOfVisitedVertices,document.getElementById("statistics-unvisited-vertices").innerText=e.totalNumberOfUnvisitedVertices}(n.statistics),function(){let e=document.getElementById("stop-run-button");e.classList.add(c.SHOW),e.classList.remove(c.HIDE)}(),t.close())}(n,JSON.parse(t.data))}catch(e){y(),g("Unknown Error. Please ensure that the WebSocket server is running and that both the server and client are using compatible versions.")}}const I={START:"start",END:"end",STEP_START:"step-start",STEP_END:"step-end"};document.addEventListener("DOMContentLoaded",(function(){document.getElementById("stop-run-button").addEventListener("click",p),document.getElementById("settings-button").addEventListener("click",E),document.getElementById("save-settings-button").addEventListener("click",B),document.getElementById("hide-settings-button").addEventListener("click",v),document.getElementById("connect-button").addEventListener("click",f)}))}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var d=t[s]={exports:{}};return e[s](d,d.exports,n),d.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(569),n(588),n(98),console.log("AltTester's Live Viewer v0.4.2"),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("./service-worker.js").then((e=>{console.log("SW registered: ",e)})).catch((e=>{console.log("SW registration failed: ",e)}))}))})();