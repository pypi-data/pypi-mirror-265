(function(){"use strict";var e={94343:function(e,t,a){var n=a(49242),i=a(17729),r=a(73396),o=a(44870),l=a(87139),s=a(46501),d=a(76252),u=a(26250),c=a(63618),f=a(18193),v=a(68595),h=a(27046),m=a(53435);const p={id:"admin"},_=(0,r._)("h1",{style:{"text-align":"center"}},"Beaker admin",-1),g={style:{"margin-right":"3rem",display:"flex","justify-content":"right","justify-items":"center"}},U={style:{"margin-top":"auto","margin-bottom":"auto","font-weight":"bolder","font-size":"larger"}},w={class:"stats"},S=(0,r._)("h2",null,"Stats",-1),y={style:{display:"flex","flex-direction":"row"}},Z=(0,r._)("div",{class:"header"},[(0,r._)("span",{class:"header-title"},"File Handles")],-1),b=(0,r._)("div",{class:"header"},[(0,r._)("span",{class:"header-title"},"Load")],-1),W=(0,r._)("div",{class:"header"},[(0,r._)("span",{class:"header-title"},"Memory")],-1),k=(0,r._)("div",{class:"header"},[(0,r._)("span",{class:"header-title"},"Disk")],-1),j=(0,r._)("h2",null,"Sessions",-1),x=(0,r._)("div",{class:"header"},[(0,r._)("span",{class:"header-title"},"Sessions")],-1);var O=(0,r.aZ)({__name:"BeakerAdmin",props:["config"],setup(e){const t=(0,h.N)(),a=(0,m.p)(),n=s.PageConfig.getBaseUrl(),i=(0,o.iH)({}),O=(0,o.iH)(),C=(0,o.iH)("never"),D=(0,r.Fl)((()=>{const e=i.value.sessions?.map((e=>({beaker_id:e.path,raw_id:e.id,beaker_kernel:e.kernel.id,last_active:e.kernel.last_activity,idle:((Date.now()-Date.parse(e.kernel.last_activity))/6e4).toFixed(2),connected:e.kernel.connections>0})));return e})),T=async()=>{const e=s.URLExt.join(n,"/stats"),t=await fetch(e);i.value=await t.json(),C.value=(new Date).toUTCString()},L=e=>{t.require({message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:"Cancel",acceptLabel:"Confirm",accept:async()=>{const t=s.URLExt.join(n,"/api/sessions/",e),r=await fetch(t,{method:"DELETE",headers:{Authorization:`token ${i.value.token}`}});if(!r.ok){const e=await r.text();a.add({severity:"error",summary:"Error removing session",detail:`${r.status} ${r.statusText} - ${e}`,life:3e3})}await T()},reject:()=>{}})};return(0,r.wF)((()=>{T(),O.value=window.setInterval(T,6e4)})),(0,r.Jd)((()=>{clearInterval(O.value)})),(e,t)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)((0,o.SU)(f.Z)),(0,r._)("div",p,[(0,r._)("div",null,[_,(0,r._)("div",g,[(0,r._)("span",U,"Last updated: "+(0,l.zw)(C.value),1),(0,r.Wm)((0,o.SU)(c.Z),{icon:"pi pi-refresh",style:{"margin-left":"1rem"},raised:"",onClick:t[0]||(t[0]=e=>T())})])]),(0,r._)("div",w,[S,(0,r._)("div",y,[(0,r.Wm)((0,o.SU)(d.Z),{value:[i.value.file_handles]},{header:(0,r.w5)((()=>[Z])),default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(u.Z),{field:"open",header:"Open"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"total",header:"Total"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"usage",header:"Usage"})])),_:1},8,["value"]),(0,r.Wm)((0,o.SU)(d.Z),{value:[i.value.load]},{header:(0,r.w5)((()=>[b])),default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(u.Z),{field:"1_min",header:"1 Min"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"5_min",header:"5 Min"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"15_min",header:"15 Min"})])),_:1},8,["value"]),(0,r.Wm)((0,o.SU)(d.Z),{value:[i.value.memory]},{header:(0,r.w5)((()=>[W])),default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(u.Z),{field:"total",header:"Total"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"used",header:"Used"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"free",header:"Free"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"usage",header:"Usage"})])),_:1},8,["value"]),(0,r.Wm)((0,o.SU)(d.Z),{value:[i.value.disk]},{header:(0,r.w5)((()=>[k])),default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(u.Z),{field:"total",header:"Total"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"used",header:"Used"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"free",header:"Free"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"usage",header:"Usage"})])),_:1},8,["value"])])]),(0,r._)("div",null,[j,(0,r.Wm)((0,o.SU)(d.Z),{value:D.value},{header:(0,r.w5)((()=>[x])),default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(u.Z),{field:"beaker_id",header:"Beaker ID"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"raw_id",header:"Raw ID"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"beaker_kernel",header:"Beaker Kernel"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"last_active",header:"Last Active"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"idle",header:"Idle Duration (minutes)"}),(0,r.Wm)((0,o.SU)(u.Z),{field:"connected",header:"User connected"}),(0,r.Wm)((0,o.SU)(u.Z),{header:"Destroy"},{body:(0,r.w5)((({data:e})=>[(0,r.Wm)((0,o.SU)(c.Z),{icon:"pi pi-times",severity:"danger",raised:"",onClick:t=>L(e.raw_id)},null,8,["onClick"])])),_:1})])),_:1},8,["value"])])]),(0,r.Wm)((0,o.SU)(v.Z),{position:"bottom-right"})],64))}});const C=O;var D=C,T=a(46720),L=a(79511),E=a(23689),F=a(88459);const M=s.PageConfig.getBaseUrl();(async()=>{let e;{const t=s.URLExt.join(M,"/config"),a=await fetch(t);e=await a.json()}const t=(0,n.ri)(D,{config:e});t.use(i.ZP),t.use(L.Z),t.use(F.Z),t.directive("tooltip",T.Z),t.directive("focustrap",E.Z),t.mount("#app")})()}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,r){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],r=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(l=!1,r<o&&(o=r));if(l){e.splice(u--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,i,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.j=328}(),function(){a.p="/"}(),function(){var e={328:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,r,o=n[0],l=n[1],s=n[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(s)var u=s(a)}for(t&&t(n);d<o.length;d++)r=o[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},n=self["webpackChunkbeaker_vue"]=self["webpackChunkbeaker_vue"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(94343)}));n=a.O(n)})();
//# sourceMappingURL=admin.bd8f684b.js.map