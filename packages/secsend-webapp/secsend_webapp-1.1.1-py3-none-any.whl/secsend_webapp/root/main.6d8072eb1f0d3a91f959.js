(()=>{var e={247:(e,t,n)=>{"use strict";n.r(t),n.d(t,{decode:()=>a,encode:()=>o});for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="undefined"==typeof Uint8Array?[]:new Uint8Array(256),r=0;r<i.length;r++)s[i.charCodeAt(r)]=r;var o=function(e){var t,n=new Uint8Array(e),s=n.length,r="";for(t=0;t<s;t+=3)r+=i[n[t]>>2],r+=i[(3&n[t])<<4|n[t+1]>>4],r+=i[(15&n[t+1])<<2|n[t+2]>>6],r+=i[63&n[t+2]];return s%3==2?r=r.substring(0,r.length-1)+"=":s%3==1&&(r=r.substring(0,r.length-2)+"=="),r},a=function(e){var t,n,i,r,o,a=.75*e.length,l=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),h=new Uint8Array(c);for(t=0;t<l;t+=4)n=s[e.charCodeAt(t)],i=s[e.charCodeAt(t+1)],r=s[e.charCodeAt(t+2)],o=s[e.charCodeAt(t+3)],h[u++]=n<<2|i>>4,h[u++]=(15&i)<<4|r>>2,h[u++]=(3&r)<<6|63&o;return c}},920:(e,t,n)=>{var i=n(204),s=n(439);function r(e,t,n){i.ok(this instanceof r,"ChooComponentCache should be created with `new`"),i.equal(typeof e,"object","ChooComponentCache: state should be type object"),i.equal(typeof t,"function","ChooComponentCache: emit should be type function"),this.cache="number"==typeof n?new s(n):n||new s(100),this.state=e,this.emit=t}function o(e){return new(e.bind.apply(e,arguments))}e.exports=r,r.prototype.render=function(e,t){i.equal(typeof e,"function","ChooComponentCache.render: Component should be type function"),i.ok("string"==typeof t||"number"==typeof t,"ChooComponentCache.render: id should be type string or type number");var n=this.cache.get(t);if(!n){for(var s=[],r=2,a=arguments.length;r<a;r++)s.push(arguments[r]);s.unshift(e,t,this.state,this.emit),n=o.apply(o,s),this.cache.set(t,n)}return n}},566:(e,t,n)=>{e.exports=n(207)},490:(e,t,n)=>{var i=n(874),s=n(988),r=n(999),o=n(395),a=n(647),l=n(801),u=n(996),c=n(850),h=n(559),d=n(204),f=n(920);e.exports=m;var p={};function m(e){var t=r("choo.constructor");if(!(this instanceof m))return new m(e);e=e||{},d.equal(typeof e,"object","choo: opts should be type object");var n=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=void 0===e.history||e.history,this._hrefEnabled=void 0===e.href||e.href,this._hashEnabled=void 0!==e.hash&&e.hash,this._hasWindow="undefined"!=typeof window,this._cache=e.cache,this._loaded=!1,this._stores=[function(e){n.emitter.prependListener(n._events.DOMTITLECHANGE,(function(t){d.equal(typeof t,"string","events.DOMTitleChange: title should be type string"),e.title=t,n._hasWindow&&(document.title=t)}))}],this._tree=null;var i={events:this._events,components:{}};this._hasWindow?(this.state=window.initialState?Object.assign({},window.initialState,i):i,delete window.initialState):this.state=i,this.router=o({curry:!0}),this.emitter=h("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this._hasWindow&&(this.state.title=document.title),t()}m.prototype.route=function(e,t){var n=r("choo.route('"+e+"')");d.equal(typeof e,"string","choo.route: route should be type string"),d.equal(typeof t,"function","choo.handler: route should be type function"),this.router.on(e,t),n()},m.prototype.use=function(e){d.equal(typeof e,"function","choo.use: cb should be type function");var t=this;this._stores.push((function(n){var i="choo.use";i=e.storeName?i+"("+e.storeName+")":i;var s=r(i);e(n,t.emitter,t),s()}))},m.prototype.start=function(){d.equal(typeof window,"object","choo.start: window was not found. .start() must be called in a browser, use .toString() if running in Node");var e=r("choo.start"),t=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,(function(){t._matchRoute(t.state),t._loaded&&(t.emitter.emit(t._events.RENDER),setTimeout(i.bind(null,window.location.hash),0))})),this.emitter.prependListener(this._events.POPSTATE,(function(){t.emitter.emit(t._events.NAVIGATE)})),this.emitter.prependListener(this._events.PUSHSTATE,(function(e){d.equal(typeof e,"string","events.pushState: href should be type string"),window.history.pushState(p,null,e),t.emitter.emit(t._events.NAVIGATE)})),this.emitter.prependListener(this._events.REPLACESTATE,(function(e){d.equal(typeof e,"string","events.replaceState: href should be type string"),window.history.replaceState(p,null,e),t.emitter.emit(t._events.NAVIGATE)})),window.onpopstate=function(){t.emitter.emit(t._events.POPSTATE)},t._hrefEnabled&&u((function(e){var n=e.href,s=e.hash;n!==window.location.href?t.emitter.emit(t._events.PUSHSTATE,n):!t._hashEnabled&&s&&i(s)}))),this._setCache(this.state),this._matchRoute(this.state),this._stores.forEach((function(e){e(t.state)})),this._tree=this._prerender(this.state),d.ok(this._tree,"choo.start: no valid DOM node returned for location "+this.state.href),this.emitter.prependListener(t._events.RENDER,c((function(){var e=r("choo.render"),n=t._prerender(t.state);d.ok(n,"choo.render: no valid DOM node returned for location "+t.state.href),d.equal(t._tree.nodeName,n.nodeName,"choo.render: The target node <"+t._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+n.nodeName.toLowerCase()+">.");var i=r("choo.morph");a(t._tree,n),i(),e()}))),s((function(){t.emitter.emit(t._events.DOMCONTENTLOADED),t._loaded=!0})),e(),this._tree},m.prototype.mount=function(e){var t=r("choo.mount('"+e+"')");if("object"!=typeof window)return d.ok("string"==typeof e,"choo.mount: selector should be type String"),this.selector=e,t(),this;d.ok("string"==typeof e||"object"==typeof e,"choo.mount: selector should be type String or HTMLElement");var n=this;s((function(){var t=r("choo.render"),i=n.start();n._tree="string"==typeof e?document.querySelector(e):e,d.ok(n._tree,"choo.mount: could not query selector: "+e),d.equal(n._tree.nodeName,i.nodeName,"choo.mount: The target node <"+n._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+i.nodeName.toLowerCase()+">.");var s=r("choo.morph");a(n._tree,i),s(),t()})),t()},m.prototype.toString=function(e,t){(t=t||{}).components=t.components||{},t.events=Object.assign({},t.events,this._events),d.notEqual(typeof window,"object","choo.mount: window was found. .toString() must be called in Node, use .start() or .mount() if running in the browser"),d.equal(typeof e,"string","choo.toString: location should be type string"),d.equal(typeof t,"object","choo.toString: state should be type object"),this._setCache(t),this._matchRoute(t,e),this.emitter.removeAllListeners(),this._stores.forEach((function(e){e(t)}));var n=this._prerender(t);return d.ok(n,"choo.toString: no valid value returned for the route "+e),d(!Array.isArray(n),"choo.toString: return value was an array for the route "+e),"string"==typeof n.outerHTML?n.outerHTML:n.toString()},m.prototype._matchRoute=function(e,t){var n,i;t?(n=t.replace(/\?.+$/,"").replace(/\/$/,""),this._hashEnabled||(n=n.replace(/#.+$/,"")),i=t):(n=window.location.pathname.replace(/\/$/,""),this._hashEnabled&&(n+=window.location.hash.replace(/^#/,"/")),i=window.location.search);var s=this.router.match(n);this._handler=s.cb,e.href=n,e.query=l(i),e.route=s.route,e.params=s.params},m.prototype._prerender=function(e){var t=r("choo.prerender('"+e.route+"')"),n=this._handler(e,this.emit);return t(),n},m.prototype._setCache=function(e){var t=new f(e,this.emitter.emit.bind(this.emitter),this._cache);function n(e,n){d.equal(typeof e,"function","choo.state.cache: Component should be type function");for(var i=[],s=0,r=arguments.length;s<r;s++)i.push(arguments[s]);return t.render.apply(t,i)}e.cache=n,n.toJSON=function(){return null}}},988:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)throw new Error("document-ready only runs in the browser");var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",(function(){e()}))}},692:e=>{e.exports=function(e){return function(n,i,s){for(var r in i)r in t&&(i[t[r]]=i[r],delete i[r]);return e(n,i,s)}};var t={class:"className",for:"htmlFor","http-equiv":"httpEquiv"}},374:(e,t,n)=>{var i=n(692),s=10,r=11,o=12,a=13;function l(e){return 9===e||e===s}e.exports=function(e,t){t||(t={});var n=t.concat||function(e,t){return String(e)+String(t)};return!1!==t.attrToProp&&(e=i(e)),function(i){for(var h=1,d="",f=arguments.length,p=[],m=0;m<i.length;m++)if(m<f-1){var y=arguments[m+1],g=L(i[m]),w=h;w===s&&(w=8),9===w&&(w=8),7===w&&(w=8),4===w&&(w=5),2===w?"/"===d?(g.push([2,"/",y]),d=""):g.push([2,y]):w===a&&t.comments?d+=String(y):w!==a&&g.push([0,w,y]),p.push.apply(p,g)}else p.push.apply(p,L(i[m]));var v=[null,{},[]],b=[[v,-1]];for(m=0;m<p.length;m++){var S=b[b.length-1][0],k=(g=p[m])[0];if(2===k&&/^\//.test(g[1])){var x=b[b.length-1][1];b.length>1&&(b.pop(),b[b.length-1][0][2][x]=e(S[0],S[1],S[2].length?S[2]:void 0))}else if(2===k){var C=[g[1],{},[]];S[2].push(C),b.push([C,S[2].length-1])}else if(5===k||0===k&&5===g[1]){for(var U,_="";m<p.length;m++)if(5===p[m][0])_=n(_,p[m][1]);else{if(0!==p[m][0]||5!==p[m][1])break;if("object"!=typeof p[m][2]||_)_=n(_,p[m][2]);else for(U in p[m][2])p[m][2].hasOwnProperty(U)&&!S[1][U]&&(S[1][U]=p[m][2][U])}p[m][0]===r&&m++;for(var T=m;m<p.length;m++)if(8===p[m][0]||5===p[m][0])S[1][_]?""===p[m][1]||(S[1][_]=n(S[1][_],p[m][1])):S[1][_]=u(p[m][1]);else{if(0!==p[m][0]||8!==p[m][1]&&5!==p[m][1]){!_.length||S[1][_]||m!==T||3!==p[m][0]&&p[m][0]!==o||(S[1][_]=_.toLowerCase()),3===p[m][0]&&m--;break}S[1][_]?""===p[m][2]||(S[1][_]=n(S[1][_],p[m][2])):S[1][_]=u(p[m][2])}}else if(5===k)S[1][g[1]]=!0;else if(0===k&&5===g[1])S[1][g[2]]=!0;else if(3===k)c(S[0])&&b.length&&(x=b[b.length-1][1],b.pop(),b[b.length-1][0][2][x]=e(S[0],S[1],S[2].length?S[2]:void 0));else if(0===k&&1===g[1])void 0===g[2]||null===g[2]?g[2]="":g[2]||(g[2]=n("",g[2])),Array.isArray(g[2][0])?S[2].push.apply(S[2],g[2]):S[2].push(g[2]);else if(1===k)S[2].push(g[1]);else if(k!==r&&k!==o)throw new Error("unhandled: "+k)}if(v[2].length>1&&/^\s*$/.test(v[2][0])&&v[2].shift(),v[2].length>2||2===v[2].length&&/\S/.test(v[2][1])){if(t.createFragment)return t.createFragment(v[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(v[2][0])&&"string"==typeof v[2][0][0]&&Array.isArray(v[2][0][2])&&(v[2][0]=e(v[2][0][0],v[2][0][1],v[2][0][2])),v[2][0];function L(e){var n=[];7===h&&(h=4);for(var i=0;i<e.length;i++){var u=e.charAt(i);1===h&&"<"===u?(d.length&&n.push([1,d]),d="",h=2):">"!==u||l(h)||h===a?h===a&&/-$/.test(d)&&"-"===u?(t.comments&&n.push([8,d.substr(0,d.length-1)]),d="",h=1):2===h&&/^!--$/.test(d)?(t.comments&&n.push([2,d],[5,"comment"],[r]),d=u,h=a):1===h||h===a?d+=u:2===h&&"/"===u&&d.length||(2===h&&/\s/.test(u)?(d.length&&n.push([2,d]),d="",h=4):2===h?d+=u:4===h&&/[^\s"'=/]/.test(u)?(h=5,d=u):4===h&&/\s/.test(u)?(d.length&&n.push([5,d]),n.push([o])):5===h&&/\s/.test(u)?(n.push([5,d]),d="",h=6):5===h&&"="===u?(n.push([5,d],[r]),d="",h=7):5===h?d+=u:6!==h&&4!==h||"="!==u?6!==h&&4!==h||/\s/.test(u)?7===h&&'"'===u?h=s:7===h&&"'"===u?h=9:h===s&&'"'===u||9===h&&"'"===u?(n.push([8,d],[o]),d="",h=4):7!==h||/\s/.test(u)?8===h&&/\s/.test(u)?(n.push([8,d],[o]),d="",h=4):8!==h&&9!==h&&h!==s||(d+=u):(h=8,i--):(n.push([o]),/[\w-]/.test(u)?(d+=u,h=5):h=4):(n.push([r]),h=7)):(2===h&&d.length?n.push([2,d]):5===h?n.push([5,d]):8===h&&d.length&&n.push([8,d]),n.push([3]),d="",h=1)}return 1===h&&d.length?(n.push([1,d]),d=""):8===h&&d.length||h===s&&d.length||9===h&&d.length?(n.push([8,d]),d=""):5===h&&(n.push([5,d]),d=""),n}};function u(e){return"function"==typeof e||"string"==typeof e||e&&"object"==typeof e||null==e?e:n("",e)}};var u=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-ï¿¿_:-]+)*$");function c(e){return u.test(e)}},204:e=>{function t(e,t){if(!e)throw new Error(t||"AssertionError")}t.notEqual=function(e,n,i){t(e!=n,i)},t.notOk=function(e,n){t(!e,n)},t.equal=function(e,n,i){t(e==n,i)},t.ok=t,e.exports=t},559:(e,t,n)=>{var i=n(69),s=n(999),r=n(204);function o(e){if(!(this instanceof o))return new o(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}e.exports=o,o.prototype.emit=function(e){r.ok("string"==typeof e||"symbol"==typeof e,"nanobus.emit: eventName should be type string or symbol");for(var t=[],n=1,i=arguments.length;n<i;n++)t.push(arguments[n]);var o=s(this._name+"('"+e.toString()+"')"),a=this._listeners[e];return a&&a.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,o.uuid),o(),this},o.prototype.on=o.prototype.addListener=function(e,t){return r.ok("string"==typeof e||"symbol"==typeof e,"nanobus.on: eventName should be type string or symbol"),r.equal(typeof t,"function","nanobus.on: listener should be type function"),"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},o.prototype.prependListener=function(e,t){return r.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependListener: eventName should be type string or symbol"),r.equal(typeof t,"function","nanobus.prependListener: listener should be type function"),"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},o.prototype.once=function(e,t){r.ok("string"==typeof e||"symbol"==typeof e,"nanobus.once: eventName should be type string or symbol"),r.equal(typeof t,"function","nanobus.once: listener should be type function");var n=this;return this.on(e,(function i(){t.apply(n,arguments),n.removeListener(e,i)})),this},o.prototype.prependOnceListener=function(e,t){r.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependOnceListener: eventName should be type string or symbol"),r.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var n=this;return this.prependListener(e,(function i(){t.apply(n,arguments),n.removeListener(e,i)})),this},o.prototype.removeListener=function(e,t){return r.ok("string"==typeof e||"symbol"==typeof e,"nanobus.removeListener: eventName should be type string or symbol"),r.equal(typeof t,"function","nanobus.removeListener: listener should be type function"),"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(i(e,n,1),!0):void 0}}},o.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},o.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var i=t.length,s=0;s<i;s++)n.push(t[s]);return n},o.prototype._emit=function(e,t,n,i){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==i?[t].concat(n,i):[t].concat(n));for(var s=e.length,r=0;r<s;r++){var o=e[r];o.apply(o,n)}}}},996:(e,t,n)=>{var i=n(204),s=/(noopener|noreferrer) (noopener|noreferrer)/,r=/^[\w-_]+:/;e.exports=function(e,t){i.notEqual(typeof window,"undefined","nanohref: expected window to exist"),t=t||window.document,i.equal(typeof e,"function","nanohref: cb should be type function"),i.equal(typeof t,"object","nanohref: root should be type object"),window.addEventListener("click",(function(n){if(!(n.button&&0!==n.button||n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||n.defaultPrevented)){var i=function e(n){if(n&&n!==t)return"a"!==n.localName||void 0===n.href?e(n.parentNode):n}(n.target);i&&(window.location.protocol!==i.protocol||window.location.hostname!==i.hostname||window.location.port!==i.port||i.hasAttribute("data-nanohref-ignore")||i.hasAttribute("download")||"_blank"===i.getAttribute("target")&&s.test(i.getAttribute("rel"))||r.test(i.getAttribute("href"))||(n.preventDefault(),e(i)))}}))}},949:e=>{"use strict";var t=/\n[\s]+$/,n=/^\n[\s]+/,i=/[\s]+$/,s=/^[\s]+/,r=/[\n\s]+/g,o=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],a=["code","pre","textarea"];e.exports=function e(l,u){if(Array.isArray(u))for(var c,h,d=l.nodeName.toLowerCase(),f=!1,p=0,m=u.length;p<m;p++){var y=u[p];if(Array.isArray(y))e(l,y);else{("number"==typeof y||"boolean"==typeof y||"function"==typeof y||y instanceof Date||y instanceof RegExp)&&(y=y.toString());var g=l.childNodes[l.childNodes.length-1];if("string"==typeof y)f=!0,g&&"#text"===g.nodeName?g.nodeValue+=y:(y=l.ownerDocument.createTextNode(y),l.appendChild(y),g=y),p===m-1&&(f=!1,-1===o.indexOf(d)&&-1===a.indexOf(d)?""===(c=g.nodeValue.replace(n,"").replace(i,"").replace(t,"").replace(r," "))?l.removeChild(g):g.nodeValue=c:-1===a.indexOf(d)&&(h=0===p?"":" ",c=g.nodeValue.replace(n,h).replace(s," ").replace(i,"").replace(t,"").replace(r," "),g.nodeValue=c));else if(y&&y.nodeType){f&&(f=!1,-1===o.indexOf(d)&&-1===a.indexOf(d)?""===(c=g.nodeValue.replace(n,"").replace(t," ").replace(r," "))?l.removeChild(g):g.nodeValue=c:-1===a.indexOf(d)&&(c=g.nodeValue.replace(s," ").replace(n,"").replace(t," ").replace(r," "),g.nodeValue=c));var w=y.nodeName;w&&(d=w.toLowerCase()),l.appendChild(y)}}}}},644:e=>{"use strict";e.exports=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"]},207:(e,t,n)=>{e.exports=n(191)(document)},844:e=>{"use strict";e.exports=["indeterminate"]},191:(e,t,n)=>{"use strict";var i=n(374),s=n(949),r=n(962),o=n(644),a=n(844);e.exports=function(e){function t(t,n,i){var l;-1!==r.indexOf(t)&&(n.namespace="http://www.w3.org/2000/svg");var u=!1;n.namespace&&(u=n.namespace,delete n.namespace);var c=!1;if(n.is&&(c=n.is,delete n.is),u)l=c?e.createElementNS(u,t,{is:c}):e.createElementNS(u,t);else{if("!--"===t)return e.createComment(n.comment);l=c?e.createElement(t,{is:c}):e.createElement(t)}for(var h in n)if(n.hasOwnProperty(h)){var d=h.toLowerCase(),f=n[h];if("classname"===d&&(d="class",h="class"),"htmlFor"===h&&(h="for"),-1!==o.indexOf(d))if("true"===String(f))f=d;else if("false"===String(f))continue;"on"===d.slice(0,2)||-1!==a.indexOf(d)?l[h]=f:u?"xlink:href"===h?l.setAttributeNS("http://www.w3.org/1999/xlink",h,f):/^xmlns($|:)/i.test(h)||l.setAttributeNS(null,h,f):l.setAttribute(h,f)}return s(l,i),l}var n=i(t,{comments:!0,createFragment:function t(n){for(var i=e.createDocumentFragment(),s=0;s<n.length;s++)null!=n[s]&&(Array.isArray(n[s])?i.appendChild(t(n[s])):("string"==typeof n[s]&&(n[s]=e.createTextNode(n[s])),i.appendChild(n[s])));return i}});return n.default=n,n.createComment=t,n}},962:e=>{"use strict";e.exports=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]},439:e=>{function t(e){if(!(this instanceof t))return new t(e);"number"==typeof e&&(e={max:e}),e||(e={}),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}e.exports=t,Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),t.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},t.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},t.prototype._unlink=function(e,t,n){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[t].next=n,this.cache[n].prev=t)},t.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},t.prototype.set=function(e,t){var n;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((n=this.cache[e]).value=t,this.maxAge&&(n.modified=Date.now()),e===this.head)return t;this._unlink(e,n.prev,n.next)}else n={value:t,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[e]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},t.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge&&(this.remove(e),1))},t.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},t.prototype.evict=function(){this.tail&&this.remove(this.tail)}},647:(e,t,n)=>{var i=n(204),s=n(342);function r(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName||o(e)!==o(t)?e:(s(e,t),a(e,t),t):null:e}function o(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function a(e,t){for(var n,i,s,o,a=0,u=0;n=t.childNodes[u],i=e.childNodes[u-a],n||i;u++)if(i)if(n)if(l(i,n))(s=r(i,n))!==n&&(t.replaceChild(s,n),a++);else{o=null;for(var c=u;c<t.childNodes.length;c++)if(l(t.childNodes[c],i)){o=t.childNodes[c];break}o?((s=r(i,o))!==o&&a++,t.insertBefore(s,n)):i.id||n.id?(t.insertBefore(i,n),a++):(s=r(i,n))!==n&&(t.replaceChild(s,n),a++)}else t.appendChild(i),a++;else t.removeChild(n),u--}function l(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&3===e.type&&e.nodeValue===t.nodeValue}e.exports=function(e,t,n){return i.equal(typeof e,"object","nanomorph: oldTree should be an object"),i.equal(typeof t,"object","nanomorph: newTree should be an object"),n&&n.childrenOnly?(a(t,e),e):(i.notEqual(t.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),r(t,e))}},822:e=>{e.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"]},342:(e,t,n)=>{var i=n(822),s=i.length;function r(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}e.exports=function(e,t){var n=e.nodeType,o=e.nodeName;1===n&&function(e,t){for(var n=t.attributes,i=e.attributes,s=null,r=null,o=null,a=null,l=i.length-1;l>=0;--l)o=(a=i[l]).name,s=a.namespaceURI,r=a.value,s?(o=a.localName||o,t.getAttributeNS(s,o)!==r&&t.setAttributeNS(s,o,r)):t.hasAttribute(o)?t.getAttribute(o)!==r&&("null"===r||"undefined"===r?t.removeAttribute(o):t.setAttribute(o,r)):t.setAttribute(o,r);for(var u=n.length-1;u>=0;--u)!1!==(a=n[u]).specified&&(o=a.name,(s=a.namespaceURI)?(o=a.localName||o,e.hasAttributeNS(s,o)||t.removeAttributeNS(s,o)):e.hasAttributeNS(null,o)||t.removeAttribute(o))}(e,t),3!==n&&8!==n||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===o?function(e,t){var n=e.value,i=t.value;r(e,t,"checked"),r(e,t,"disabled"),e.indeterminate!==t.indeterminate&&(t.indeterminate=e.indeterminate),"file"!==t.type&&(n!==i&&(t.setAttribute("value",n),t.value=n),"null"===n&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value"))}(e,t):"OPTION"===o?function(e,t){r(e,t,"selected")}(e,t):"TEXTAREA"===o&&function(e,t){var n=e.value;if(n!==t.value&&(t.value=n),t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}(e,t),function(e,t){for(var n=0;n<s;n++){var r=i[n];e[r]?t[r]=e[r]:t[r]&&(t[r]=void 0)}}(e,t)}},801:(e,t,n)=>{var i=/([^?=&]+)(=([^&]*))?/g,s=n(204);e.exports=function(e){s.equal(typeof e,"string","nanoquery: url should be type string");var t={};return e.replace(/^.*\?/,"").replace(i,(function(e,n,i,s){var r=decodeURIComponent(s),o=decodeURIComponent(n);t.hasOwnProperty(o)?Array.isArray(t[o])?t[o].push(r):t[o]=[t[o],r]:t[o]=r})),t}},850:(e,t,n)=>{"use strict";var i=n(204);e.exports=function(e,t){i.equal(typeof e,"function","nanoraf: render should be a function"),i.ok("function"==typeof t||void 0===t,"nanoraf: raf should be a function or undefined"),t||(t=window.requestAnimationFrame);var n=!1,s=null;return function(){null!==s||n||(n=!0,t((function(){n=!1;for(var t=s.length,i=new Array(t),r=0;r<t;r++)i[r]=s[r];e.apply(e,i),s=null}))),s=arguments}}},395:(e,t,n)=>{var i=n(204),s=n(100),r=/file:\/\//.test("object"==typeof window&&window.location&&window.location.origin),o=new RegExp("^(file://|/)(.*.html?/?)?"),a=new RegExp("^(http(s)?(://))?(www.)?[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?"),l=new RegExp("#"),u=new RegExp("[?].*$");function c(e){if(!(this instanceof c))return new c(e);e=e||{},this.router=s(e.default||"/404")}function h(e,t){return e=t?e.replace(o,""):e.replace(a,""),decodeURI(e.replace(u,"").replace(l,"/"))}e.exports=c,c.prototype.on=function(e,t){i.equal(typeof e,"string"),e=e.replace(/^[#/]/,""),this.router.on(e,t)},c.prototype.emit=function(e){return i.equal(typeof e,"string"),e=h(e,r),this.router.emit(e)},c.prototype.match=function(e){return i.equal(typeof e,"string"),e=h(e,r),this.router.match(e)}},61:(e,t,n)=>{var i=n(204),s="undefined"!=typeof window;function r(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}r.prototype.push=function(e){i.equal(typeof e,"function","nanoscheduler.push: cb should be type function"),this.queue.push(e),this.schedule()},r.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method((function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()}))}},r.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})},e.exports=function(){var e;return s?(window._nanoScheduler||(window._nanoScheduler=new r(!0)),e=window._nanoScheduler):e=new r,e}},999:(e,t,n)=>{var i,s=n(61)(),r=n(204);o.disabled=!0;try{i=window.performance,o.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!i.mark}catch(e){}function o(e){if(r.equal(typeof e,"string","nanotiming: name should be type string"),o.disabled)return a;var t=(1e4*i.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function l(r){var o="end-"+t+"-"+e;i.mark(o),s.push((function(){var s=null;try{var a=e+" ["+t+"]";i.measure(a,n,o),i.clearMarks(n),i.clearMarks(o)}catch(e){s=e}r&&r(s,e)}))}return i.mark(n),l.uuid=t,l}function a(e){e&&s.push((function(){e(new Error("nanotiming: performance API unavailable"))}))}e.exports=o},69:e=>{"use strict";e.exports=function(e,t,n){var i,s=e.length;if(!(t>=s||0===n)){var r=s-(n=t+n>s?s-t:n);for(i=t;i<r;++i)e[i]=e[i+n];e.length=r}}},874:e=>{e.exports=function(e,t){if(e)try{var n=document.querySelector(e);n&&n.scrollIntoView(t)}catch(e){}}},100:(e,t,n)=>{var i=n(204),s=n(465);e.exports=function e(t){if(!(this instanceof e))return new e(t);var n=(t||"").replace(/^\//,""),r=s();return o._trie=r,o.on=function(e,t){if(i.equal(typeof e,"string"),i.equal(typeof t,"function"),e=e||"/",t._wayfarer&&t._trie)r.mount(e,t._trie.trie);else{var n=r.create(e);n.cb=t,n.route=e}return o},o.emit=o,o.match=a,o._wayfarer=!0,o;function o(e){var t=a(e),n=new Array(arguments.length);n[0]=t.params;for(var i=1;i<n.length;i++)n[i]=arguments[i];return t.cb.apply(t.cb,n)}function a(e){i.notEqual(e,void 0,"'route' must be defined");var t=r.match(e);if(t&&t.cb)return new l(t);var s=r.match(n);if(s&&s.cb)return new l(s);throw new Error("route '"+e+"' did not match")}function l(e){this.cb=e.cb,this.route=e.route,this.params=e.params}}},465:(e,t,n)=>{var i=n(204);function s(){if(!(this instanceof s))return new s;this.trie={nodes:{}}}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=s,s.prototype.create=function(e){i.equal(typeof e,"string","route should be a string");var t=e.replace(/^\//,"").split("/");return function e(n,i){var s=r(t,n)&&t[n];if(!1===s)return i;var o=null;return/^:|^\*/.test(s)?(r(i.nodes,"$$")?o=i.nodes.$$:(o={nodes:{}},i.nodes.$$=o),"*"===s[0]&&(i.wildcard=!0),i.name=s.replace(/^:|^\*/,"")):r(i.nodes,s)?o=i.nodes[s]:(o={nodes:{}},i.nodes[s]=o),e(n+1,o)}(0,this.trie)},s.prototype.match=function(e){i.equal(typeof e,"string","route should be a string");var t=e.replace(/^\//,"").split("/"),n={},s=function e(i,s){if(void 0!==s){var o=t[i];if(void 0===o)return s;if(r(s.nodes,o))return e(i+1,s.nodes[o]);if(s.name){try{n[s.name]=decodeURIComponent(o)}catch(t){return e(i,void 0)}return e(i+1,s.nodes.$$)}if(s.wildcard){try{n.wildcard=decodeURIComponent(t.slice(i).join("/"))}catch(t){return e(i,void 0)}return s.nodes.$$}return e(i+1)}}(0,this.trie);if(s)return(s=Object.assign({},s)).params=n,s},s.prototype.mount=function(e,t){i.equal(typeof e,"string","route should be a string"),i.equal(typeof t,"object","trie should be a object");var n=e.replace(/^\//,"").split("/"),s=null,r=null;if(1===n.length)r=n[0],s=this.create(r);else{var o=n.join("/");r=n[0],s=this.create(o)}Object.assign(s.nodes,t.nodes),t.name&&(s.name=t.name),s.nodes[""]&&(Object.keys(s.nodes[""]).forEach((function(e){"nodes"!==e&&(s[e]=s.nodes[""][e])})),Object.assign(s.nodes,s.nodes[""].nodes),delete s.nodes[""].nodes)}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=n(247);function t(e,t,n){const i=(new TextEncoder).encode(n),s=new Uint8Array([...i,...new Uint8Array(t)]);return e.subtle.digest("SHA-256",s)}class i{shouldCancel;onCancel;constructor(){this.reset(),this.onCancel=()=>{}}addOnCancel(e){const t=this.onCancel;this.onCancel=()=>{t(),e()}}reset(){this.shouldCancel=!1}cancel(){this.shouldCancel=!0,null!==this.onCancel&&this.onCancel()}}function s(t,n){return n instanceof ArrayBuffer?e.encode(n):n}var r;!function(e){e[e.File_=0]="File_",e[e.Root=1]="Root"}(r||(r={}));class o extends Error{constructor(e){super("invalid ID '"+e+"'")}}class a{id;constructor(e){this.id=e}static fromStr(t,n){const i=new Uint8Array((s=(s=t).replace(/-/g,"+").replace(/_/g,"/"),s+=Array(2-s.length%3).join("="),e.decode(s)));var s;const a=i[0],c=i.slice(1);if(null!==n&&n!==a)throw new o(t);switch(a){case r.Root:return new u(c.buffer);case r.File_:return new l(c.buffer);default:throw new o(t)}}str(){return t=new Uint8Array([this.kind(),...new Uint8Array(this.id)]),e.encode(t).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_");var t}}class l extends a{kind(){return r.File_}}class u extends a{kind(){return r.Root}async fileID(e){const n=await t(e,this.id,"secsend_fiid");return new l(n.slice(0,10))}}const c=n(247);class h{id;key;fileURL;fileURLPromise;constructor(e,t,n){this.id=e,this.key=t,e instanceof l?(this.fileURL=this,this.fileURLPromise=null):(this.fileURL=null,this.fileURLPromise=e.fileID(n).then((e=>{this.fileURL=new h(e,t,n)})))}static keyFromTxt(e){const t=function(e){return[...e].reduce(((e,t)=>36n*e+BigInt(parseInt(t,36))),0n)}(e),n=new ArrayBuffer(16),i=new DataView(n);return i.setBigUint64(0,BigInt.asUintN(64,t),!0),i.setBigUint64(8,BigInt.asUintN(64,t>>64n),!0),n}static keyToTxt(e){const t=new DataView(e);return(t.getBigUint64(0,!0)|t.getBigUint64(8,!0)<<64n).toString(36)}jsonable(){return{id:this.id.str(),key:c.encode(this.key)}}static fromJsonable(e,t){return new h(a.fromStr(e.id,null),c.decode(e.key),t)}}function d(e,t,n,i=!0){let s=e+"/dl?id="+t.id.str();return n&&(s+="&v=1"),i&&(s+="#"+h.keyToTxt(t.key)),s}class f{iv;key;fileKey;metadataKey;crypto;static KEY_LEN=16;static TAG_LEN=16;static IV_LEN=12;static PROTO_NAME="aes-gcm";protoName(){return f.PROTO_NAME}constructor(e,t,n,i,s){this.iv=t,this.key=n,this.fileKey=i,this.metadataKey=s,this.crypto=e}static async import(e,n,i){const s=t=>e.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt","decrypt"]),r=function(e,n){return t(e,n,"secsend_file")}(e,i).then(s),o=function(e,n){return t(e,n,"secsend_meta")}(e,i).then(s);return new f(e,n,i,await r,await o)}static async generate(e){const t=new Uint8Array(12),n=new Uint8Array(16),i=e.getRandomValues(t),s=e.getRandomValues(n);return await i,await s,f.import(e,t.buffer,n.buffer)}static outChunkSize(e){return e+f.TAG_LEN}static encryptedSize(e,t){let n=Math.floor(e/t)*(t+f.TAG_LEN);const i=e%t;return i>0&&(n+=i+f.TAG_LEN),n}static decryptedSize(e,t){const n=this.outChunkSize(t);let i=Math.floor(e/n)*t;const s=e%n;return s>0&&(i+=s-f.TAG_LEN),i}fragment(){return this.key}async encrypt(e,t){const n=this.algoChunk(t);return this.crypto.subtle.encrypt(n,this.fileKey,e)}async decrypt(e,t){const n=this.algoChunk(t);return this.crypto.subtle.decrypt(n,this.fileKey,e)}async encrSignMetadata(e,t){const n=this.algoChunk(e);return this.crypto.subtle.encrypt(n,this.metadataKey,t)}async decrVerifyMetadata(e,t){const n=this.algoChunk(e);return this.crypto.subtle.decrypt(n,this.metadataKey,t)}algoChunk(e){return{name:"AES-GCM",iv:this.chunkIV(e),tagLength:8*f.TAG_LEN}}chunkIV(e){const t=this.iv.slice(0),n=new DataView(t);let i=n.getBigUint64(0,!0);return i+=BigInt(e),n.setBigUint64(0,i,!0),t}}const p=new Map([[f.PROTO_NAME,f]]);function m(e){return(t,n)=>e.encrypt(t,n)}function y(e,n,i){return t(e,new Uint8Array([...new Uint8Array(i),...new Uint8Array(n)]),"secsend_sign")}const g=n(247);class w extends Error{}class v extends w{constructor(e){super("unsupported algorithm '"+e+"'")}}class b extends w{constructor(e){super("unsupported version '"+e+"'")}}class S{version;name;mimeType;iv;chunkSize;algo;complete;keySign;timeoutSec;constructor(e,t,n,i,s,r,o,a,l){this.version=e,this.name=t,this.mimeType=n,this.iv=i,this.chunkSize=s,this.algo=r,this.complete=o,this.keySign=a,this.timeoutSec=l}jsonable(){return{version:this.version,name:g.encode(this.name),mime_type:g.encode(this.mimeType),iv:g.encode(this.iv),chunk_size:g.encode(this.chunkSize),algo:this.algo,complete:this.complete,key_sign:g.encode(this.keySign),timeout_s:this.timeoutSec}}static fromJsonable(e){if(!p.has(e.algo))throw new v(e.algo);if(1!==e.version)throw new b(e.version);const t=g.decode(e.iv),n=g.decode(e.key_sign),i=g.decode(e.name),s=g.decode(e.mime_type),r=g.decode(e.chunk_size);return new S(e.version,i,s,t,r,e.algo,e.complete,n,e.timeout_s)}}class k{version;name;mimeType;iv;chunkSize;algo;complete;keySign;timeoutSec;constructor(e,t,n,i,s,r,o,a,l){this.version=e,this.name=t,this.mimeType=n,this.iv=i,this.chunkSize=s,this.algo=r,this.complete=o,this.keySign=a,this.timeoutSec=l}static async create(e,t,n,i){const s=await y(n.crypto,await n.fragment(),n.iv);return new k(1,e,t,n.iv,1048576,n.protoName(),!0,s,i)}static async fromFile(e,t,n){let i=e.type;return""===i&&(i="application/octet-stream"),k.create(e.name,i,t,n)}}class x extends Error{}class C extends Error{res;err;constructor(e,t){super(t.message),this.res=e,this.err=t}static async check(e){if(!e.ok)throw new C(e,await e.json())}}class U{base;constructor(e){this.base=e.replace(/[/ ]+$/g,"")}async metadata(e){const t=await fetch(this.url("metadata/"+e.str()),{method:"GET"});await C.check(t);const n=await t.json();return{metadata:S.fromJsonable(n.metadata),size:n.size}}async config(){const e=await fetch(this.url("config"),{method:"GET"});return await C.check(e),await e.json()}async upload_new(e){const t=await fetch(this.url("upload/new"),{method:"POST",body:JSON.stringify(e.jsonable())});return await C.check(t),u.fromStr((await t.json()).root_id,r.Root)}async upload_push_blob(e,t,n,i){return new Promise(((s,r)=>{const o=new XMLHttpRequest;let a=null,l=null;o.upload.onprogress=e=>{clearTimeout(a),a=setTimeout((()=>{l=new C(null,{message:"request timeout",status:400,description:"request timeout"}),o.abort()}),2e3),n(e.loaded)},o.onabort=()=>{clearTimeout(a),r(l)},o.onerror=()=>{clearTimeout(a),r(new C(null,{message:"request error",status:400,description:"request error"}))},o.onload=()=>{clearTimeout(a),200!==o.status&&r(new C(null,o.response)),s()},o.open("POST",this.url("upload/push/"+e.str()),!0),o.setRequestHeader("Content-Type","application/octet-stream"),o.send(t),i.addOnCancel((()=>{clearTimeout(a),l=new x,o.abort()}))}))}async upload_finish(e){const t=await fetch(this.url("upload/finish/"+e.str()),{method:"POST"});await C.check(t)}async delete(e){const t=await fetch(this.url("delete/"+e.str()),{method:"POST"});await C.check(t)}url(e){return this.base+"/v1/"+e}}function _(e){const t=new DataTransfer;if(null!==e)for(let n=0;n<e.length;n++)t.items.add(e.item(n));return t.files}class T{url;name;mimeType;constructor(e,t,n){this.url=e,this.name=t,this.mimeType=n}jsonable(){return{url:this.url.jsonable(),name:this.name,mimeType:this.mimeType}}static fromJsonable(e){return new T(h.fromJsonable(e.url,window.crypto),e.name,e.mimeType)}}class L{cancellable;uploadProm;progress;uploadSpeed;eta;prevDone;chunkStart;constructor(){this.progress=0,this.uploadSpeed=0,this.eta=0,this.prevDone=null,this.cancellable=new i,this.uploadProm=null,this.chunkStart=null}start(){this.chunkStart=L.timeNow(),this.prevDone=null}setProgress(e,t){if(this.progress=Math.round(e/t*1e4)/100,null===this.chunkStart||null===this.prevDone)return this.chunkStart=L.timeNow(),void(this.prevDone=e);const n=L.timeNow()-this.chunkStart;n>=500&&(this.uploadSpeed=(e-this.prevDone)/(n/1e3),this.eta=(t-e)/this.uploadSpeed,this.chunkStart=L.timeNow(),this.prevDone=e)}async cancel(){this.cancellable.cancel();try{await this.uploadProm}catch(e){if(e instanceof x==0)throw e}}static timeNow(){try{return performance.now()}catch(e){return(new Date).getTime()}}}var A;!function(e){e[e.RESUMABLE=0]="RESUMABLE",e[e.RESUMING=1]="RESUMING",e[e.COMPLETE=2]="COMPLETE"}(A||(A={}));class N{info;fileList;constructor(e,t){this.info=e,this.fileList=_(t)}url(){return this.info.url}id(){return this.url().id}static fromJsonable(e){const t=T.fromJsonable(e.info);switch(e.kind){case A.RESUMABLE:return new D(t,e.curProgress,null);case A.RESUMING:return new z(t,e.curProgress,null);case A.COMPLETE:return new M(t,null)}throw new Error("unsupported upload state")}}class E extends N{progress;ctx;constructor(e,t,n){super(t,n),this.ctx=e,this.progress=new L}progressPercent(){return this.progress.progress}uploadSpeed(){return this.progress.uploadSpeed}eta(){return this.progress.eta}cancellable(){return this.progress.cancellable}async run(e){this.progress.start();const t=this.ctx.run(((t,n)=>{this.progress.setProgress(t,n),e(this)}),this.cancellable());return this.progress.uploadProm=t,t}async cancel(){return await this.progress.cancel(),new D(this.info,this.progress.progress,this.fileList)}error(){return new D(this.info,this.progress.progress,this.fileList)}finished(){return new M(this.info,this.fileList)}toJsonable(){return null}}class z extends N{curProgress;valid;constructor(e,t,n){super(e,n),this.curProgress=t,this.valid=!0}resumed(e){return new E(e,this.info,this.fileList)}retry(){return this.valid=!1,new D(this.info,this.curProgress,this.fileList)}invalid(){return!1===this.valid}progressPercent(){return this.curProgress}toJsonable(){return{info:this.info.jsonable(),curProgress:this.curProgress,kind:A.RESUMING}}}class D extends N{curProgress;constructor(e,t,n){super(e,n),this.curProgress=t}resuming(){return new z(this.info,this.curProgress,this.fileList)}progressPercent(){return this.curProgress}toJsonable(){return{info:this.info.jsonable(),curProgress:this.curProgress,kind:A.RESUMABLE}}}class M extends N{progressPercent(){return 100}toJsonable(){return{info:this.info.jsonable(),kind:A.COMPLETE}}}class R{states;curState;channel;onStateUpdate;constructor(){this.states=new Map,this.channel=new BroadcastChannel("uploadStates"),this.channel.onmessage=e=>{this.onUploadStateUpdated(e)},this.curState=null,this.onStateUpdate=()=>{},this.initFromLocalStorage()}initFromLocalStorage(){const e=window.localStorage,t=e.length,n=[];for(let i=0;i<t;i+=1){const t=e.key(i),{state:s,ts:r}=JSON.parse(e.getItem(t));try{n.push({id:t,state:N.fromJsonable(s),ts:r})}catch(e){}}n.sort(((e,t)=>e.ts<t.ts?-1:e.ts>t.ts?1:0));for(const{id:e,state:t}of n)this.states.set(e,t)}allStates(){return this.states.values()}selectState(e){this.curState=e}selectNewState(e){this.states.set(e.id().str(),e),this.selectState(e),this.broadcastUploadState(e)}currentUploadState(){return this.curState}setStateNewUpload(){this.curState=null}updateUploadState(e,t){const n=t.id();return this.states.set(n.str(),t),this.broadcastUploadState(t),e===this.curState&&(this.curState=t),t}updateCurState(e){return this.updateUploadState(this.curState,e)}broadcastUploadState(e){e instanceof E&&(e=new D(e.info,e.progressPercent(),null));const t=e.toJsonable();if(null===t)throw new Error("unable to serialize state");const n=e.id().str();window.localStorage.setItem(n,JSON.stringify({state:t,ts:(new Date).getTime()},s)),this.channel.postMessage({id:n,state:t})}getStateByID(e){return this.states.get(e.str())||null}deleteState(e){const t=e.id().str();this.states.delete(t),window.localStorage.removeItem(t),this.channel.postMessage({id:t,state:null})}onUploadStateUpdated(e){const t=e.data.id;if(null===e.data.state)null!==this.curState&&this.curState.id().str()===t&&this.setStateNewUpload(),this.states.delete(t);else{const n=N.fromJsonable(e.data.state);this.states.set(t,n)}this.onStateUpdate()}}class q{chunkSize;partialChunk;offset;constructor(e){this.chunkSize=e,this.partialChunk=new Uint8Array(e),this.offset=0}transform(e,t){let n=0;if(this.offset>0){const i=Math.min(e.byteLength,this.chunkSize-this.offset);this.partialChunk.set(new Uint8Array(e.slice(0,i)),this.offset),this.offset+=i,n+=i,this.offset===this.chunkSize&&this.send(this.partialChunk,t)}for(;n<e.byteLength;){const i=e.byteLength-n;if(i>=this.chunkSize){const i=e.slice(n,n+this.chunkSize);n+=this.chunkSize,this.send(new Uint8Array(i),t)}else{const t=e.slice(n,n+i);n+=t.byteLength,this.partialChunk.set(new Uint8Array(t)),this.offset=t.byteLength}}}flush(e){this.offset>0&&e.enqueue(this.partialChunk.slice(0,this.offset))}send(e,t){t.enqueue(e),this.partialChunk=new Uint8Array(this.chunkSize),this.offset=0}}class O{cipherFunc;chunkIdx;constructor(e,t){this.chunkIdx=t,this.cipherFunc=e}start(){}flush(){}async transform(e,t){try{const n=await this.cipherFunc(e,this.chunkIdx);t.enqueue(new Uint8Array(n))}catch(e){t.error(e)}this.chunkIdx+=1}}class P{firstSkip;lastSize;prevChunk;constructor(e,t){this.firstSkip=e,this.lastSize=t,this.prevChunk=null}transform(e,t){null!==this.prevChunk?(t.enqueue(this.prevChunk),this.prevChunk=e):this.prevChunk=e.slice(this.firstSkip)}flush(e){if(null===this.prevChunk)return;let t;t=null!==this.lastSize?this.prevChunk.slice(0,this.lastSize):this.prevChunk,e.enqueue(t)}}class B{bytesToSkip;skippedBytes;constructor(e){this.bytesToSkip=e,this.skippedBytes=0}transform(e,t){null!==this.bytesToSkip?(this.skippedBytes+=e.byteLength,this.skippedBytes>this.bytesToSkip&&(t.enqueue(e.slice(this.bytesToSkip-this.skippedBytes)),this.bytesToSkip=null)):t.enqueue(e)}}function F(e,t,n=null){try{return e.pipeThrough(new TransformStream(t))}catch(i){const s=e.getReader();return new ReadableStream({start(e){if(t.start)return t.start(e)},async pull(e){let n=!1;const i={enqueue(t){n=!0,e.enqueue(t)}};for(;!n;){const n=await s.read();if(n.done)return t.flush&&await t.flush(e),e.close();await t.transform(n.value,i)}},cancel(t){e.cancel(t),null!==n&&n(t)}})}}class I{inStreamSeekBytes;outStreamBeginSkip;inChunkBegin;inStreamLength;outStreamLastSize;outStreamBegin;outStreamLength;constructor(e,t,n,i,s,r,o){this.inStreamSeekBytes=t,this.inChunkBegin=e,this.inStreamLength=i,this.outStreamBeginSkip=n,this.outStreamLastSize=s,this.outStreamBegin=r,this.outStreamLength=o}inStreamRangeEnd(){return null===this.inStreamLength?null:this.inStreamLength+this.inStreamSeekBytes-1}static compute(e,t,n,i){let s=0,r=0,o=0;if(null!==n){const i=Math.floor(n/t);s=i*e,r=n%t,o=i}let a=null,l=null;return null!==i&&(a=Math.ceil(i/t)*e,l=i%t),new I(o,s,r,a,l,n,i)}outTruncator(){return new P(this.outStreamBeginSkip,this.outStreamLastSize)}}class $ extends Error{}class j{client;stream;sentBytes;metadata;encrSize;url;constructor(e,t,n,i,s,r){this.stream=e,this.metadata=t,this.encrSize=n,this.url=i,this.client=s,this.sentBytes=r}id(){return this.url.id}static async uploadNew(e,t,n,i){const s=await f.generate(e),r=await function(e,t,n){return e instanceof File?k.fromFile(e,t,n):k.create(e.name,"application/zip",t,n)}(n,s,i),o=await async function(e,t){const n=(e,n)=>{const i=(new TextEncoder).encode(n);return t.encrSignMetadata(e,i)};return new S(e.version,await n(0,e.name),await n(1,e.mimeType),e.iv,await((e,n)=>{const i=new ArrayBuffer(4);return new DataView(i).setUint32(0,n,!0),t.encrSignMetadata(2,i)})(0,e.chunkSize),e.algo,e.complete,e.keySign,e.timeoutSec)}(r,s),a=await t.upload_new(o),l=new O(m(s),0);let u=F(n.stream(),new q(r.chunkSize));u=F(u,l);const c=f.encryptedSize(n.size,r.chunkSize),d=new h(a,await s.fragment(),e);return await d.fileURLPromise,new j(u,r,c,d,t,0)}static async uploadResume(e,t,n,i){await i.fileURLPromise;const{metadata:s,size:r}=await t.metadata(i.fileURL.id);if(!1===await async function(e,t,n,i){return function(e,t){const n=new DataView(e),i=new DataView(t);if(n.byteLength!==i.byteLength)return!1;for(let e=0;e<n.byteLength;e++)if(n.getUint8(e)!==i.getUint8(e))return!1;return!0}(await y(e,n,i),t)}(e,s.keySign,i.key,s.iv))throw new $;const o=await f.import(e,s.iv,i.key),a=await async function(e,t){const n=async(e,n)=>(n=await t.decrVerifyMetadata(e,n),(new TextDecoder).decode(n));return new k(e.version,await n(0,e.name),await n(1,e.mimeType),e.iv,await(async(e,n)=>(n=await t.decrVerifyMetadata(2,n),new DataView(n).getUint32(0,!0)))(0,e.chunkSize),e.algo,e.complete,e.keySign,e.timeoutSec)}(s,o),l=f.encryptedSize(n.size,a.chunkSize),u=f.outChunkSize(a.chunkSize),c=I.compute(a.chunkSize,u,r,null),h=new O(m(o),c.inChunkBegin);let d;return d=n instanceof File?n.slice(c.inStreamSeekBytes).stream():F(n.stream(),new B(c.inStreamSeekBytes)),d=F(d,new q(a.chunkSize)),d=F(d,h),d=F(d,c.outTruncator()),new j(d,a,l,i,t,r)}async run(e,t){const n=this.stream.getReader();for(;;){const{value:i,done:s}=await n.read();if(s)break;if(t.shouldCancel)throw new x;await this.client.upload_push_blob(this.id(),i,(t=>{e(this.sentBytes+t,this.encrSize)}),t),this.sentBytes+=i.length,e(this.sentBytes,this.encrSize)}await this.client.upload_finish(this.id())}}const V=new Int32Array(4096);for(let e=0;e<256;++e){let t=e,n=9;for(;--n;)t=(1&t&&-306674912)^t>>>1;V[e]=t}for(let e=0;e<256;++e){let t=V[e];for(let n=256;n<4096;n+=256)t=V[e|n]=t>>>8^V[255&t]}const G=[];for(let e=0;e<16;)G[e]=V.subarray(e<<8,++e<<8);const[H,J,K,W,Z,X,Y,Q,ee,te,ne,ie,se,re,oe,ae]=G;class le{buf;view;idx;le;constructor(e,t){this.buf=e,this.view=new DataView(this.buf.buffer),this.idx=0,this.le=t}pushU64(e){this.view.setBigUint64(this.idx,BigInt(e),this.le),this.idx+=8}pushU32(e){this.view.setUint32(this.idx,e,this.le),this.idx+=4}pushU16(e){this.view.setUint16(this.idx,e,this.le),this.idx+=2}pushBuffer(e){this.buf.set(e,this.idx),this.idx+=e.length}}class ue{serializeToBuf(){const e=new Uint8Array(this.serializeLength()),t=new le(e,!0);return this.serialize(t),e}}class ce extends ue{originalSize;compressedSize;relativeHeaderOffset;diskStartNumber;serialize(e){e.pushU16(1),e.pushU16(28),e.pushU64(this.originalSize),e.pushU64(this.compressedSize),e.pushU64(this.relativeHeaderOffset),e.pushU32(this.diskStartNumber)}serializeLength(){return 32}}class he extends ue{neededVersion;flags;compressionMethod;lastModTime;lastModDate;crc32;compressedSize;uncompressedSize;filename;extraFields=[];serialize(e){e.pushU32(67324752),e.pushU16(this.neededVersion),e.pushU16(this.flags),e.pushU16(this.compressionMethod),e.pushU16(this.lastModTime),e.pushU16(this.lastModDate),e.pushU32(this.crc32),e.pushU32(this.compressedSize),e.pushU32(this.uncompressedSize),e.pushU16(this.filename.length),e.pushU16(this.extraLength()),e.pushBuffer(this.filename);for(const t of this.extraFields)t.serialize(e)}serializeLength(){return 30+this.filename.length+this.extraLength()}extraLength(){let e=0;for(const t of this.extraFields)e+=t.serializeLength();return e}}class de extends ue{crc32;compressedSize;uncompressedSize;serialize(e){e.pushU32(134695760),e.pushU32(this.crc32),e.pushU64(this.compressedSize),e.pushU64(this.uncompressedSize)}serializeLength(){return 24}}class fe extends ue{versionMadeBy;versionNeededToExtract;flags;compression;lastModTime;lastModDate;crc32;compressedSize;uncompressedSize;diskNumberStart;internalFileAttributes;externalFileAttributes;offsetLocalHeader;filename;comment=new Uint8Array;extraFields=[];serialize(e){e.pushU32(33639248),e.pushU16(this.versionMadeBy),e.pushU16(this.versionNeededToExtract),e.pushU16(this.flags),e.pushU16(this.compression),e.pushU16(this.lastModTime),e.pushU16(this.lastModDate),e.pushU32(this.crc32),e.pushU32(this.compressedSize),e.pushU32(this.uncompressedSize),e.pushU16(this.filename.length),e.pushU16(this.extraLength()),e.pushU16(this.comment.length),e.pushU16(this.diskNumberStart),e.pushU16(this.internalFileAttributes),e.pushU32(this.externalFileAttributes),e.pushU32(this.offsetLocalHeader),e.pushBuffer(this.filename);for(const t of this.extraFields)t.serialize(e);e.pushBuffer(this.comment)}serializeLength(){return 46+this.filename.length+this.extraLength()+this.comment.length}extraLength(){let e=0;for(const t of this.extraFields)e+=t.serializeLength();return e}}class pe extends ue{diskNumber;diskNumberStartCD;entriesCountCDDisk;entriesCountCD;sizeCD;offsetStartCDDisk;comment=new Uint8Array;serialize(e){e.pushU32(101010256),e.pushU16(this.diskNumber),e.pushU16(this.diskNumberStartCD),e.pushU16(this.entriesCountCDDisk),e.pushU16(this.entriesCountCD),e.pushU32(this.sizeCD),e.pushU32(this.offsetStartCDDisk),e.pushU16(this.comment.length),e.pushBuffer(this.comment)}serializeLength(){return 22+this.comment.length}}class me extends ue{versionMadeBy;versionNeededToExtract;diskNumber;diskNumberStartCD;centralDirDisk;numberEntriesCentralDirDisk;numberEntriesCentralDir;sizeCentralDirectory;offsetStartCentralDirectoryDisk;extensions=[];serialize(e){e.pushU32(101075792),e.pushU64(this.serializeLength()-12),e.pushU16(this.versionMadeBy),e.pushU16(this.versionNeededToExtract),e.pushU32(this.diskNumber),e.pushU32(this.diskNumberStartCD),e.pushU64(this.numberEntriesCentralDirDisk),e.pushU64(this.numberEntriesCentralDir),e.pushU64(this.sizeCentralDirectory),e.pushU64(this.offsetStartCentralDirectoryDisk);for(const t of this.extensions)t.serialize(e)}serializeLength(){return 56+this.extLength()}extLength(){let e=0;for(const t of this.extensions)e+=t.serializeLength();return e}}class ye extends ue{diskNumber;offsetEndOfCentralDirRecord;numberDisks;serialize(e){e.pushU32(117853008),e.pushU32(this.diskNumber),e.pushU64(this.offsetEndOfCentralDirRecord),e.pushU32(this.numberDisks)}serializeLength(){return 20}}const ge=45|3<<255,we=45|3<<255;function ve(e){const t=e.getUTCDate()|e.getUTCMonth()+1<<5|e.getUTCFullYear()-1980<<9;return{time:Math.floor(e.getUTCSeconds()/2)|e.getUTCMinutes()<<5|e.getUTCHours()<<11,date:t}}class be{files;constructor(){this.files=[]}add(e){this.files.push(e)}stream(){return new ReadableStream(new Se(this))}get size(){const e=(new de).serializeLength();let t=0;for(const n of this.files){const i=ve(n.lastMod);t+=be.localFileHeader(n.name,i).serializeLength(),t+=be.centralFileHeader(n.name,i,0,0,0).serializeLength(),t+=e,t+=n.blob.size}return t+=be.endOfCentralDirRecord64(0,0,0).serializeLength(),t+=(new ye).serializeLength(),t+=(new pe).serializeLength(),t}static localFileHeader(e,t){const n=new he;n.neededVersion=we,n.flags=2056,n.compressionMethod=0,n.lastModTime=t.time,n.lastModDate=t.date,n.crc32=0,n.compressedSize=0,n.uncompressedSize=0,n.filename=(new TextEncoder).encode(e);const i=new ce;return n.extraFields.push(i),i.originalSize=0,i.compressedSize=0,i.relativeHeaderOffset=0,i.diskStartNumber=0,n}static dataDescriptor64(e,t){const n=new de;return n.crc32=e,n.compressedSize=t,n.uncompressedSize=t,n}static centralFileHeader(e,t,n,i,s){const r=new fe;r.versionMadeBy=ge,r.versionNeededToExtract=we,r.flags=2056,r.compression=0,r.lastModTime=t.time,r.lastModDate=t.date,r.crc32=n,r.compressedSize=4294967295,r.uncompressedSize=4294967295,r.diskNumberStart=0,r.offsetLocalHeader=4294967295,r.filename=(new TextEncoder).encode(e);const o=new ce;return r.extraFields.push(o),o.originalSize=i,o.compressedSize=i,o.relativeHeaderOffset=s,o.diskStartNumber=0,r}static endOfCentralDirRecord64(e,t,n){const i=new me;return i.versionMadeBy=ge,i.versionNeededToExtract=we,i.diskNumber=0,i.diskNumberStartCD=0,i.centralDirDisk=0,i.numberEntriesCentralDirDisk=e,i.numberEntriesCentralDir=e,i.sizeCentralDirectory=t,i.offsetStartCentralDirectoryDisk=n,i}}class Se{files;curBufIdx;curFileIdx;curFile;curReader;curCRC;curSize;curFileHeaderStart;cfhs;constructor(e){this.files=e.files.slice(0).sort(((e,t)=>e.name.localeCompare(t.name))),this.curBufIdx=0,this.curFileIdx=0,this.curReader=null,this.curFile=null,this.curCRC=0,this.curSize=0,this.curFileHeaderStart=0,this.cfhs=[]}nextFile(){const e=this.files[this.curFileIdx++]||null;if(null===e)return this.curFile=null,void(this.curReader=null);this.curFile=e,this.curReader=e.blob.stream().getReader(),this.curCRC=0,this.curSize=0}start(e){if(this.nextFile(),null===this.curFile)return this.emitZipEnd(e),e.close();this.emitFileHeader(e)}async pull(e){const t=await this.curReader.read();return!1===t.done?(this.curCRC=await function(e,t){t=~t;let n=0;const i=e.length-16;for(;n<i;)t=ae[e[n++]^255&t]^oe[e[n++]^t>>8&255]^re[e[n++]^t>>16&255]^se[e[n++]^t>>>24]^ie[e[n++]]^ne[e[n++]]^te[e[n++]]^ee[e[n++]]^Q[e[n++]]^Y[e[n++]]^X[e[n++]]^Z[e[n++]]^W[e[n++]]^K[e[n++]]^J[e[n++]]^H[e[n++]];for(;n<e.length;++n)t=H[255&t^e[n]]^t>>>8;return~t>>>0}(t.value,this.curCRC),this.curSize+=t.value.length,void this.enqueue(t.value,e)):(this.emitFileEnd(e),this.nextFile(),null===this.curReader?(this.emitZipEnd(e),e.close()):void this.emitFileHeader(e))}emitFileHeader(e){this.curFileHeaderStart=this.curBufIdx;const t=be.localFileHeader(this.curFile.name,ve(this.curFile.lastMod));this.enqueue(t.serializeToBuf(),e)}emitFileEnd(e){const t=be.dataDescriptor64(this.curCRC,this.curSize);this.enqueue(t.serializeToBuf(),e);const n=be.centralFileHeader(this.curFile.name,ve(this.curFile.lastMod),this.curCRC,this.curSize,this.curFileHeaderStart);this.cfhs.push(n)}emitZipEnd(e){const t=this.curBufIdx;for(const t of this.cfhs)this.enqueue(t.serializeToBuf(),e);const n=this.curBufIdx-t,i=this.curBufIdx,s=be.endOfCentralDirRecord64(this.files.length,n,t);this.enqueue(s.serializeToBuf(),e);const r=new ye;r.diskNumber=0,r.offsetEndOfCentralDirRecord=i,r.numberDisks=1,this.enqueue(r.serializeToBuf(),e);const o=new pe;o.diskNumber=0,o.diskNumberStartCD=0,o.entriesCountCDDisk=65535,o.entriesCountCD=65535,o.sizeCD=4294967295,o.offsetStartCDDisk=4294967295,this.enqueue(o.serializeToBuf(),e)}enqueue(e,t){this.curBufIdx+=e.length,t.enqueue(e)}}class ke extends be{name}function xe(e){let t,n;return e>=1e9?(t=e/1e9,n="GB"):e>=1e6?(t=e/1e6,n="MB"):e>=1e3?(t=e/1e3,n="KB"):(t=e,n="B"),t.toFixed(2)+" "+n}function Ce(e,t){return e+(t>1?"s":"")}const Ue=n(566);function _e(e,t){if(0===e.length)return null;if(1===e.length)return e[0];const n=new ke;for(let t=0;t<e.length;++t){const i=e.item(t);n.add({name:i.name,blob:i,lastMod:new Date(i.lastModified)})}return n.name=t,n}function Te(){const e=window.document.querySelector("#timeout").selectedOptions[0].value;return Number.parseInt(e)}let Le=!1;const Ae=n(490)();Ae.use((function(e){e.crypto=window.crypto,e.client=new U("/"),e.timeoutValids=null,e.filesize_limit=0,e.configProm=e.client.config().then((t=>{const n=t.timeout_s_valid.sort(((e,t)=>e-t));n.length>1&&0===n[0]&&(n.shift(),n.push(0)),e.timeoutValids=n,e.lastSelectedTimeout=n[n.length-1],e.filesizeLimit=t.filesize_limit}))})),Ae.use((function(e){const t=new R;e.appState=t})),Ae.route("/",(function(e,t){const n=e=>{console.log("emit"),t(e)},i=function(e,t){let i=null,s=[],r=[];const o=()=>{i=null;const e=[...s],t=[...r];s=[],r=[],(async()=>{n("render")})().then((t=>{for(const n of e)n(t)})).catch((e=>{for(const n of t)n(e)}))};return()=>new Promise(((e,t)=>{s.push(e),r.push(t),null===i&&(i=setTimeout(o,100))}))}();return e.appState.onStateUpdate=i,Le||(e.configProm.then((()=>{n("render")})),Le=!0),Ue`
    <body>
    <main>
    <div class="wrapper">
    <div id="sidebar">
      <h1>secsend</h1>

      <p align="center"><a onclick=${r} class="clickable">New upload</a></p>

      <h2>In-progress uploads</h2>
      <table>
        ${o((e=>e instanceof E)).map((function(e){const t=e.info;return Ue`<tr onclick=${()=>{m(e)}} class="clickable"><td class="ellipsis">${t.name}</td><td>${e.progressPercent()}%</td></tr>`}))}
      </table>
      <hr>

      <h2>Unfinished uploads</h2>
      <ul class="list-unstyled">
        ${o((e=>e instanceof D||e instanceof z)).map((function(e){const t=e.info;return Ue`<li><div class="ellipsis clickable" title=${t.name} onclick=${()=>{m(e)}}>${t.name}</div></li>`}))}
      </ul>
      <hr>

      <h2>Recent uploads</h2>
      <table>
        ${o((e=>e instanceof M)).map((function(t){const s=t.info,r=s.url.fileURL;if(null===r)return s.url.fileURLPromise.then(i),null;const o=d(window.location.origin,r,!1),a=d(window.location.origin,r,!0);return Ue`<tr><td class="ellipsis clickable" title=${s.name} onclick=${function(){e.appState.selectState(t),n("render")}}>${s.name}</td><td><a href=${o}>dl</a></td><td><a href=${a}>view</a></td></tr>`}))}
      </table>
    </div>
    <div id="content" class="d-inline-flex justify-content-md-center text-center">
    <div class="container w-75">
      <div class="row">
        <div class="col-sm">
        <form class="p-md-4 border rounded-3 bg-light" id="upload" onsubmit=${async function(t){t.preventDefault();const i=e.appState;let s=i.currentUploadState();if(s instanceof M)return void r();if(s instanceof E)return i.updateUploadState(s,await s.cancel()),void n("render");s instanceof z&&(s=i.updateUploadState(s,s.retry()));const o=t.currentTarget,a=o.querySelector("#file_input").files,l=o.querySelector("#file_name"),u=_e(a,(""===l.value?l.placeholder:l.value)+".zip");null!==u&&p(s,u,a)}}>
          <p style="margin-bottom: 1em">
          ${function(){const e=u();return null===e?Ue`<strong>New upload</strong>`:e.info.name}()}
          </p>
          <div class="form-group row">
            <label for="file_input" class="col-sm-2 col-form-label" style='display: ${u()instanceof M?"none":"block"}'>File</label>
            <div class="col-sm-10" style='display: ${u()instanceof M?"none":"block"}'>
              <input type="file" class="form-control-plaintext" id="file_input" multiple onchange=${()=>{n("render")}} ${function(){const e=u();return null!==e&&e.fileList.length>0}()?"disabled":""}>
            </div>
            <label for="file_name" class="col-sm-2 col-form-label" style='display: ${s()?"block":"none"}'>Filename</label>
            <div class="col-sm-10" style='display: ${s()?"block":"none"}'>
              <div style="display:flex;">
                <input type="text" class="form-control" id="file_name" placeholder="archive">
                <div>.zip</div>
              </div>
            </div>
            <label for="timeout" class="col-sm-2 col-form-label" style='display: ${null===u()?"block":"none"}'>Time limit</label>
            <div class="col-sm-10" style='display: ${null===u()?"block":"none"}'>
              <select class="form-control-plaintext" id="timeout" onchange=${function(){e.lastSelectedTimeout=Te()}}>
                ${function(){const t=e.timeoutValids;return null===t?[]:t}().map((function(t){const n=function(e){if(0==e)return"No limit";let t=e,n="";if(t>=86400){const e=Math.floor(t/86400);n+=e+" "+Ce("day",e)+" ",t-=86400*e}if(t>=3600){const e=Math.floor(t/3600);n+=e+" "+Ce("hour",e)+" ",t-=3600*e}if(t>=60){const e=Math.floor(t/60);n+=e+" "+Ce("minute",e)+" ",t-=60*e}return t>0&&(n+=t+" "+Ce("second",t)),n}(t);let i="";return t===e.lastSelectedTimeout&&(i="selected"),Ue`<option value="${t}" ${i}>${n}</option>`}))}
              </select>
            </div>
            <button type="submit" class="w-100 btn btn-lg ${f()?"btn-danger":"btn-primary"}" ${f()?"disabled":""}>${function(){const t=u();if(null===t){const t=c();return null!==t?"Size is "+xe(t)+", which exceeds current limit of "+xe(e.filesizeLimit):"Upload"}return t instanceof E?"Pause":t instanceof z?"Resuming... (retry)":t instanceof D?"Resume":t instanceof M?"New upload":void 0}()}</button>
          </div>
        </form>
        </div>
      </div>

      <div class="row">
        <div class="col-sm">
        <div class="progress position-relative" style='visibility: ${null===a()?"hidden":"visible"}'>
          <div class="progress-bar" role="progressbar" aria-valuenow=${a()} aria-valuemin="0" aria-valuemax="100" style="width:${a()}%">
          <div class="justify-content-center d-flex position-absolute w-100" style="color: #000000">${function(){const e=u();if(null===e)return"";let t=e.progressPercent().toString()+"%";if(e instanceof E){t+=" ("+xe(e.uploadSpeed())+"/s)"}return t}()}</div>
          <div class="justify-content-end d-flex position-absolute w-100" style="color: #000000">${function(){const e=u();return null!==e&&e instanceof E?"ETA: "+function(e){e=Math.round(e);const t=Math.floor(e/3600);e-=3600*t;const n=Math.floor(e/60);e-=60*n;const i=e=>e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});return i(t)+":"+i(n)+":"+i(e)}(e.eta()):""}()}</div>
          </div>
        </div>
        <p style='visibility: ${null===u()?"hidden":"visible"}' align="center">
          <table class='table-links'>
            <tr><td align="right">Links:</td><td><a href=${l(!1,!0)}>download</a> | <a href=${l(!0,!0)}>preview</a></td></tr>
            <tr class="tr-padding-top"><td align="right">Passwordless links:</td><td><a href=${l(!1,!1)}>download</a> | <a href=${l(!0,!1)}>preview</a></td></tr>
            <tr><td align="right">Password:</td><td style="font-family: monospace">${function(){const e=u();if(null===e)return"";const t=e.url().fileURL;return null===t?"":h.keyToTxt(t.key)}()}</td></tr>
          </table>
        </p>

        <p><button type="button" onclick=${async function(){let t=u();if(null===t)return;if(!1===confirm("Are you sure you want to delete this file? This is a non revertible operation!"))return;const n=e.appState;if(t instanceof E){const e=await t.cancel();n.updateUploadState(t,e),t=e}try{await e.client.delete(t.id())}catch(e){if(404!==e.res.status)throw e}n.deleteState(t),r()}} class="w-100 btn btn-primary" style='display: ${null===u()?"none":"block"}'>Delete</button></p>
      </div>
      </div>
    </div>
    </div>
    </div>
    </main>
    </body>
  `;function s(){if(null!==u())return!1;const e=window.document.querySelector("#file_input");return null!==e&&e.files.length>1}function r(){e.appState.setStateNewUpload();const t=window.document.querySelector("#upload");null!==t&&t.reset(),n("render")}function o(t){const n=e.appState;return Array.from(n.allStates()).filter(t).reverse()}function a(){const e=u();return null===e?null:e.progressPercent()}function l(e,t){const n=u();if(null===n)return"";const i=n.url().fileURL;return null===i?"":d(window.location.origin,i,e,t)}function u(){return e.appState.currentUploadState()}function c(){if(0===e.filesizeLimit)return null;const t=window.document.querySelector("#file_input");if(null===t)return null;const n=_e(t.files,"");if(null===n)return null;const i=n.size;return i>=e.filesizeLimit?i:null}function f(){const e=u(),t=c();return null===e&&null!==t}async function p(t,s,r){const o=e.appState;if(null===t){const n=Te(),i=await j.uploadNew(e.crypto,e.client,s,n),a=new T(i.url,i.metadata.name,i.metadata.mimeType);t=new E(i,a,r),o.selectNewState(t)}else{if(s.name!==t.info.name&&!window.confirm("Warning: the file name you chose is different from the previously uploaded file name. Are you sure you want to continue?"))return;let n;try{const r=t.url();t=o.updateUploadState(t,t.resuming()),i(),n=await j.uploadResume(e.crypto,e.client,s,r)}catch(e){if(e instanceof $)return void alert("Invalid encryption key! It looks like your application state is invalid. Unfortunately, there is no way to recover the good key.");throw o.updateUploadState(t,t.error()),e}if(t.invalid())return;t=o.updateUploadState(t,t.resumed(n))}await async function(t,n,s){const r=e.appState,o=e=>{r.broadcastUploadState(e),i()};try{const e=t.run(o);i(),await e,r.updateUploadState(t,t.finished())}catch(e){if(e instanceof x==0){r.updateUploadState(t,t.error());const e=t.id();setTimeout((async()=>{const t=r.getStateByID(e);t instanceof D&&p(t,n,s)}),1e3)}}}(t,s,r),n("render")}function m(t){e.appState.selectState(t),n("render");const i=window.document.querySelector("#file_input");null!==i&&(i.files=_(t.fileList))}})),Ae.mount("body"),navigator.serviceWorker.register("./sw.js",{scope:"/v1/download/"})})()})();