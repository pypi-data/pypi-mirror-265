(()=>{"use strict";function e(e,t,n,a,s){const o=e+"v1/download/"+t+"?v="+n+"#"+a;s?window.location.assign(o):window.location.replace(o)}function t(e){let t=e.trim();return t.length>0&&"#"===t[0]&&(t=t.substring(1)),t}document.addEventListener("DOMContentLoaded",(async()=>{!async function(){const n=window.location,a=n.origin+n.pathname.replace("/dl","/");try{await navigator.serviceWorker.register("./sw.js",{scope:"/v1/download/"})}catch(e){return void n.replace(a)}const s=new URL(n.href).searchParams,o=s.get("id")||null;if(null===o)return void n.replace(a);const r=s.get("v")||"0",l=t(window.location.hash);if(l.length>0)e(a,o,r,l,!1);else{const n=document.forms.namedItem("key_form"),s=n.elements.namedItem("key_value");n.onsubmit=n=>{n.preventDefault();let l=s.value;l=t(l),l.length>0&&e(a,o,r,l,!0)},document.getElementById("toggle_password").onclick=e=>{const t=e.currentTarget;"password"===s.type?(s.type="text",t.classList.replace("fa-eye","fa-eye-slash")):(s.type="password",t.classList.replace("fa-eye-slash","fa-eye"))},1===parseInt(r)&&(n.elements.namedItem("btn").textContent="Preview"),n.style.display=""}}()}))})();