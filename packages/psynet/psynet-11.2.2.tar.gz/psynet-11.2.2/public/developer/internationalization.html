<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Running tests" href="running_tests.html" /><link rel="prev" title="Updating documentation" href="updating_documentation.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>Internationalization - PsyNet 11.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=a26321a0" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">PsyNet 11.1.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">PsyNet 11.1.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/applications.html">When to use PsyNet?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/team.html">Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/command_line.html">Command line</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../learning/how_to_learn.html">How to learn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../learning/exercises/index.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Exercises</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../learning/exercises/timeline.html">Timeline exercise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning/exercises/graphics.html">Graphics exercise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning/exercises/js_synth.html">JSSynth exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../learning/tracks/index.html">Tracks</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Tracks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../learning/tracks/music_perception.html">Music perception track</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dependencies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dependencies/dallinger.html">Dallinger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies/docker.html">Docker</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">INSTALLATION</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../installation/index.html">Installation overview</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Installation overview</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../installation/virtualenv_installation/index.html">Installing PsyNet via virtualenv</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Installing PsyNet via virtualenv</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/virtualenv_installation/linux.html">Installing PsyNet via virtualenv (Linux)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/virtualenv_installation/macos.html">Installing PsyNet via virtualenv (macOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/virtualenv_installation/windows.html">Installing PsyNet via virtualenv (Windows)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../installation/docker_installation/index.html">Installing PsyNet via Docker</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Installing PsyNet via Docker</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/docker_installation/unix_installation.html">Installing PsyNet via Docker (macOS/Linux)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/docker_installation/windows_installation.html">Installing PsyNet via Docker (Windows)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EXPERIMENT DEVELOPMENT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/experiment_directory.html">Experiment directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/development_workflow.html">Development workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/dependencies.html">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../demos/index.html">Demos</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Demos</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../demos/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/hello_world.html">Hello world</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/timeline.html">Timeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/survey_js.html">SurveyJS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/trial.html">Trials (1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/trial_2.html">Trials (2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/trial_3.html">Trials (3)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/audio.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/static_audio.html">Audio trial maker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/gibbs.html">Gibbs Sampling with People</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/audio_gibbs.html">Audio Gibbs Sampling with People</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/imitation_chains.html">Imitation chains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/tapping_imitation_chain.html">Tapping imitation chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/mcmcp.html">Markov Chain Monte Carlo with People (MCMCP)</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../example_experiments/index.html">Example experiments</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Example experiments</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../example_experiments/carillon.html">Consonance and the carillon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example_experiments/emotions-scales.html">Emotions of musical scales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example_experiments/pitch-matching.html">Pitch-matching test</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/creating_a_new_experiment.html">Creating a new experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/classes.html">Classes in PsyNet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/timeline.html">Timeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/assets.html">Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/specifying_dependencies.html">Specifying dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/tests.html">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/internationalization.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/synchronization.html">Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/ad_page.html">The Ad Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/modular_page.html">Modular Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/graphics.html">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/demography.html">Demography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/prescreening_tasks.html">Pre-screening tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/create_and_rate.html">Create and Rate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/pre_deploy_routines.html">Pre-deploy routines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/experiment_variables.html">Experiment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/unity_integration.html">Unity integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/writing_custom_frontends.html">Writing custom frontends</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/event_management.html">Event management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/communicating_with_backend.html">Communicating with the back-end via custom routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/payment_limits.html">Payment limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/deploy_tokens.html">Deploy tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/introduction_to_sql_alchemy.html">Introduction to SQLAlchemy</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorials/version_control_with_git.html">Version control with Git</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Version control with Git</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/version_control_with_git/essential_concepts.html">Essential concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/version_control_with_git/experiment_implementation_workflow.html">Experiment implementation workflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/upgrading_to_psynet_10.html">Upgrading to PsyNet 10</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">API Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of API Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/asset.html">Asset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/audio_mixer.html">AudioMixer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/bot.html">Bot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/command_line.html">Command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/consents.html">Consents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/data.html">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/demography.html">Demography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/error.html">Error</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/experiment.html">Experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/field.html">Field</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/graphics.html">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/js_synth.html">JSSynth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/media.html">Media</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/modular_page.html">ModularPage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/page.html">Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/participant.html">Participant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/prescreen.html">Prescreen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/process.html">Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/recruiters.html">Recruiters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/redis.html">Redis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/serialize.html">Serialize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/sync.html">Sync</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/timeline.html">Timeline</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/trial/index.html">Trial</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Trial</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/audio.html">Audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/audio_gibbs.html">AudioGibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/chain.html">Chain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/dense.html">Dense</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/gibbs.html">Gibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/graph.html">Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/imitation_chain.html">ImitationChain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/main.html">Main</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/media_gibbs.html">MediaGibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/mcmcp.html">MCMCP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/record.html">Record</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/static.html">Static</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/video.html">Video</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/utils.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/version.html">Version</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DEPLOYING</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deploy/web_servers.html">Web servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/aws_server_setup.html">Setting up an experiment server with AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/ssh_server.html">SSH servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/heroku_server.html">Heroku deployments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/prolific.html">Deploying an experiment to Prolific</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/deploy_from_archive.html">Deploying from archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/export.html">Exporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to PsyNet</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Developer workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing_a_feature_or_bugfix.html">Contributing a feature/bugfix</a></li>
<li class="toctree-l1"><a class="reference internal" href="prescreening_tasks.html">Creating pre-screening tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="updating_documentation.html">Updating documentation</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_tests.html">Running tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_release.html">Making a release</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dashboards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dashboards/translation.html">Translation dashboard</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://gitlab.com/PsyNetDev/PsyNet/-/edit/master/docs/developer/internationalization.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="internationalization">
<h1>Internationalization<a class="headerlink" href="#internationalization" title="Link to this heading">#</a></h1>
<p>The internationalization pipeline can be difficult to understand at first. This document aims to explain the process behind the scenes and which steps are necessary to translate an experiment.</p>
<section id="internationalization-process">
<h2>Internationalization process<a class="headerlink" href="#internationalization-process" title="Link to this heading">#</a></h2>
<p>All PsyNet internationalization relies on <code class="docutils literal notranslate"><span class="pre">gettext</span></code> which is a common tool for internationalization.
There are basically four steps to translate an experiment:</p>
<ol class="arabic simple">
<li><p>Marking strings for translation</p></li>
<li><p>Extracting the strings into a template file (<code class="docutils literal notranslate"><span class="pre">.pot</span></code>)</p></li>
<li><p>Translating the strings into a <code class="docutils literal notranslate"><span class="pre">.po</span></code> file</p></li>
<li><p>Compiling the <code class="docutils literal notranslate"><span class="pre">.po</span></code> file into a machine-readable <code class="docutils literal notranslate"><span class="pre">.mo</span></code> file</p></li>
</ol>
<p>PsyNet automatically handles steps 1, 2, and 4. Step 3 can be partly be automized using machine translation (see third-party package <a class="reference external" href="https://gitlab.com/computational-audition-lab/internationalization">internat</a>), nevertheless we recommend to have a native speaker check the translations.</p>
<section id="install-gettext">
<h3>Install <code class="docutils literal notranslate"><span class="pre">gettext</span></code><a class="headerlink" href="#install-gettext" title="Link to this heading">#</a></h3>
<p>Run the following command to install <code class="docutils literal notranslate"><span class="pre">gettext</span></code> on your system:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>gettext<span class="w"> </span><span class="c1"># for Ubuntu-based distributions</span>
$<span class="w"> </span>brew<span class="w"> </span>install<span class="w"> </span>gettext<span class="w"> </span><span class="c1"># for macOS</span>
</pre></div>
</div>
</section>
<section id="mark-strings-for-translation">
<h3>Mark strings for translation<a class="headerlink" href="#mark-strings-for-translation" title="Link to this heading">#</a></h3>
<p>In order to translate the experiment, one needs to mark which strings
need to be translated. <code class="docutils literal notranslate"><span class="pre">gettext</span></code> will search for those strings in the
respective files and will create a <code class="docutils literal notranslate"><span class="pre">.pot</span></code> file. <code class="docutils literal notranslate"><span class="pre">gettext</span></code> by default
will look for <code class="docutils literal notranslate"><span class="pre">gettext</span></code> and its alias <code class="docutils literal notranslate"><span class="pre">_</span></code>. Let’s try it for this Python snippet in a file called <code class="docutils literal notranslate"><span class="pre">example.py</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>from<span class="w"> </span>gettext<span class="w"> </span>import<span class="w"> </span>gettext

<span class="nv">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>gettext
<span class="nv">my_info_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>InfoPage<span class="o">(</span>
<span class="w">     </span>Markup<span class="o">(</span>
<span class="w">         </span>f<span class="s2">&quot;&quot;&quot;</span>
<span class="s2">         &lt;h1&gt;{_(&quot;</span>Instructions<span class="s2">&quot;)}&lt;/h1&gt;</span>
<span class="s2">         &lt;hr&gt;</span>
<span class="s2">         {_(&quot;</span>In<span class="w"> </span>this<span class="w"> </span>experiment,<span class="w"> </span>you<span class="w"> </span>will<span class="w"> </span>listen<span class="w"> </span>to<span class="w"> </span>different<span class="w"> </span>music<span class="w"> </span>clips.<span class="s2">&quot;)} &lt;br&gt;</span>
<span class="s2">         {_(&quot;</span>You<span class="w"> </span>have<span class="w"> </span>to<span class="w"> </span><span class="k">select</span><span class="w"> </span>the<span class="w"> </span>music<span class="w"> </span>you<span class="w"> </span>like<span class="w"> </span>most.<span class="s2">&quot;)}</span>
<span class="s2">         &quot;&quot;&quot;</span>
<span class="w">     </span><span class="o">)</span>,
<span class="w">     </span><span class="nv">time_estimate</span><span class="o">=</span><span class="m">5</span>
<span class="w"> </span><span class="o">)</span>
</pre></div>
</div>
<p>In PsyNet we use a wrapper for this:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>import<span class="w"> </span>os

from<span class="w"> </span>markupsafe<span class="w"> </span>import<span class="w"> </span>Markup
from<span class="w"> </span>psynet.page<span class="w"> </span>import<span class="w"> </span>InfoPage
from<span class="w"> </span>psynet.utils<span class="w"> </span>import<span class="w"> </span>get_translator

<span class="nv">locale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;nl&quot;</span>
_,<span class="w"> </span><span class="nv">_p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>get_translator<span class="o">(</span>
<span class="w">    </span>locale,<span class="w"> </span><span class="nv">module</span><span class="o">=</span><span class="s2">&quot;experiment&quot;</span>,<span class="w"> </span><span class="nv">locales_dir</span><span class="o">=</span>os.path.abspath<span class="o">(</span><span class="s2">&quot;locales&quot;</span><span class="o">)</span>
<span class="o">)</span>

<span class="nv">my_info_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>InfoPage<span class="o">(</span>
<span class="w">    </span>Markup<span class="o">(</span>
<span class="w">        </span>f<span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        &lt;h1&gt;{_(&quot;</span>Instructions<span class="s2">&quot;)}&lt;/h1&gt;</span>
<span class="s2">        &lt;hr&gt;</span>
<span class="s2">        {_(&quot;</span>In<span class="w"> </span>this<span class="w"> </span>experiment,<span class="w"> </span>you<span class="w"> </span>will<span class="w"> </span>listen<span class="w"> </span>to<span class="w"> </span>different<span class="w"> </span>music<span class="w"> </span>clips.<span class="s2">&quot;)} &lt;br&gt;</span>
<span class="s2">        {_(&quot;</span>You<span class="w"> </span>have<span class="w"> </span>to<span class="w"> </span><span class="k">select</span><span class="w"> </span>the<span class="w"> </span>music<span class="w"> </span>you<span class="w"> </span>like<span class="w"> </span>most.<span class="s2">&quot;)}</span>
<span class="s2">        &quot;&quot;&quot;</span>
<span class="w">    </span><span class="o">)</span>,
<span class="w">    </span><span class="nv">time_estimate</span><span class="o">=</span><span class="m">5</span>
<span class="o">)</span>
</pre></div>
</div>
<p>Here you see two ways to mark strings for translation. The first one is <code class="docutils literal notranslate"><span class="pre">_</span></code> which is an alias of <code class="docutils literal notranslate"><span class="pre">gettext</span></code> and the second one is <code class="docutils literal notranslate"><span class="pre">_p</span></code> (alias of <code class="docutils literal notranslate"><span class="pre">pgettext</span></code>) which takes the context a translation occurs in and the string which has to be translated. This is useful to disambiguate the same string in different contexts. For example, the word “play” can be a verb or a noun. In English, the translation would be the same, but in other languages, it might be different. In this case, we would use <code class="docutils literal notranslate"><span class="pre">_p</span></code> to mark the strings for translation.</p>
<p>The same mechanism works for HTML templates:</p>
<p>Extracting and marking the translatable strings in PsyNet are the same as for any other Python script. For Jinja2 templates (HTML files), you can use:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">{{</span><span class="w"> </span>pgettext<span class="o">(</span><span class="s1">&#39;final_page_unsuccessful&#39;</span>,<span class="w"> </span><span class="s2">&quot;Unfortunately the experiment must end early.&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">}}</span>
</pre></div>
</div>
</section>
<section id="extracting-the-strings-into-a-template-file-pot">
<h3>Extracting the strings into a template file (<code class="docutils literal notranslate"><span class="pre">.pot</span></code>)<a class="headerlink" href="#extracting-the-strings-into-a-template-file-pot" title="Link to this heading">#</a></h3>
<p>The next step is to create the PO Template (<code class="docutils literal notranslate"><span class="pre">.pot</span></code>) file. This can be done manually by running the following command in the directory where the <code class="docutils literal notranslate"><span class="pre">example.py</span></code> file is located:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>xgettext<span class="w"> </span>-d<span class="w"> </span>experiment<span class="w"> </span>-o<span class="w"> </span>locales/experiment.pot<span class="w"> </span>example.py
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">xgettext</span></code> command consists of three arguments:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-d</span></code> indicating the name of the module. Modules are like namespaces, for example, translations in PsyNet will use the module <code class="docutils literal notranslate"><span class="pre">psynet</span></code>. For experiments, we recommend using the module name <code class="docutils literal notranslate"><span class="pre">experiment</span></code></p></li>
<li><p>Translation files are stored in the <code class="docutils literal notranslate"><span class="pre">locales</span></code> folder. Make sure you have created one in your experiment. You can do this by running</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>locales
</pre></div>
</div>
<p>in your experiment directory.</p>
<ol class="arabic simple" start="3">
<li><p>Finally, you need to pass in the file. Here we use one file (<code class="docutils literal notranslate"><span class="pre">example.py</span></code>), but you can add multiple files, e.g. all Python files in a folder:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>xgettext<span class="w"> </span>-d<span class="w"> </span>experiment<span class="w"> </span>-o<span class="w"> </span>locales/experiment.pot<span class="w"> </span>*.py
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">-L</span></code> you can optionally specify the programming language,
e.g. <code class="docutils literal notranslate"><span class="pre">-L</span> <span class="pre">Python</span></code>.</p>
<p>In PsyNet, we use a wrapper for this:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>create_pot<span class="o">(</span>
<span class="w">    </span>input_folder,<span class="w"> </span><span class="s2">&quot;path/to/my/files/*.html&quot;</span>,<span class="w"> </span>pot_path
<span class="o">)</span>
</pre></div>
</div>
<p>Which looks for all HTML files in the folder <code class="docutils literal notranslate"><span class="pre">f&quot;{input_folder}/path/to/my/files&quot;</span></code> and extracts the strings into the <code class="docutils literal notranslate"><span class="pre">.pot</span></code> file <code class="docutils literal notranslate"><span class="pre">pot_path</span></code>.</p>
<p>We provide a default extraction script for the PsyNet package <code class="docutils literal notranslate"><span class="pre">create_psynet_translation_template()</span></code> and for experiment folder <code class="docutils literal notranslate"><span class="pre">Experiment.create_translation_template_from_experiment_folder()</span></code>.</p>
<p>While this probably works for most experiments (it scans all .py files in the experiment directory and the templates folder if it exists), it can be easily extended to scan other subdirectories:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>class<span class="w"> </span>Exp<span class="o">(</span>psynet.experiment.Experiment<span class="o">)</span>:
<span class="w">    </span>@classmethod
<span class="w">    </span>def<span class="w"> </span>create_translation_template_from_experiment_folder<span class="o">(</span>cls,<span class="w"> </span>input_directory,<span class="w"> </span>pot_path<span class="o">)</span>:
<span class="w">        </span>super<span class="o">(</span>Exp,<span class="w"> </span>cls<span class="o">)</span>.extract_pot_from_experiment_folder<span class="o">(</span>input_directory,<span class="w"> </span>pot_path<span class="o">)</span>

<span class="w">        </span>from<span class="w"> </span>psynet.internationalization<span class="w"> </span>import<span class="w"> </span>create_pot

<span class="w">        </span>create_pot<span class="o">(</span>input_directory,<span class="w"> </span><span class="s2">&quot;my_module/.&quot;</span>,<span class="w"> </span>pot_path<span class="o">)</span>
</pre></div>
</div>
<p>We also provide a command line interface to extract the strings: <code class="docutils literal notranslate"><span class="pre">psynet</span> <span class="pre">prepare-translation</span> <span class="pre">&lt;iso_code&gt;</span></code>.</p>
</section>
<section id="po-format">
<h3>PO format<a class="headerlink" href="#po-format" title="Link to this heading">#</a></h3>
<p>Let’s have a look at the PO format by opening
<code class="docutils literal notranslate"><span class="pre">locales/experiment.pot</span></code>. You can see a lot of entries starting with
<code class="docutils literal notranslate"><span class="pre">msgid</span></code> and <code class="docutils literal notranslate"><span class="pre">msgstr</span></code>. The first entry looks like this and has meta-information
about the translation:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>msgid<span class="w"> </span><span class="s2">&quot;&quot;</span>
msgstr<span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="s2">&quot;Project-Id-Version: PACKAGE VERSION\n&quot;</span>
<span class="s2">&quot;Report-Msgid-Bugs-To: \n&quot;</span>
<span class="s2">&quot;POT-Creation-Date: 2022-11-17 10:43+0100\n&quot;</span>
<span class="s2">&quot;PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n&quot;</span>
<span class="s2">&quot;Last-Translator: FULL NAME &lt;EMAIL@ADDRESS&gt;\n&quot;</span>
<span class="s2">&quot;Language-Team: LANGUAGE &lt;LL@li.org&gt;\n&quot;</span>
<span class="s2">&quot;Language: \n&quot;</span>
<span class="s2">&quot;MIME-Version: 1.0\n&quot;</span>
<span class="s2">&quot;Content-Type: text/plain; charset=CHARSET\n&quot;</span>
<span class="s2">&quot;Content-Transfer-Encoding: 8bit\n&quot;</span>
</pre></div>
</div>
<p>The other entries start with a comment where it occurs in the code
followed by a <code class="docutils literal notranslate"><span class="pre">msgid</span></code> (key, string to be translation) and <code class="docutils literal notranslate"><span class="pre">msgstr</span></code> (value, this is where the translation goes):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#: example.py:8</span>
msgid<span class="w"> </span><span class="s2">&quot;Instructions&quot;</span>
msgstr<span class="w"> </span><span class="s2">&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="po-files">
<h3>PO files<a class="headerlink" href="#po-files" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">.po</span></code> files are created from <code class="docutils literal notranslate"><span class="pre">.pot</span></code> files and are identical in
structure. The translations will replace the empty string in <code class="docutils literal notranslate"><span class="pre">msgstr</span></code>
with the translation. This means that for every language that you want
your experiment to be translated to, you need to create a <code class="docutils literal notranslate"><span class="pre">.po</span></code> file
from the main <code class="docutils literal notranslate"><span class="pre">.pot</span></code> file. Translations will be stored in:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>locales/&lt;ISO_LANG&gt;/LC_MESSAGES/&lt;module&gt;.po
</pre></div>
</div>
<p>Create the <code class="docutils literal notranslate"><span class="pre">locales</span></code> folder that will contain all translations
(e.g., <code class="docutils literal notranslate"><span class="pre">de</span></code>, <code class="docutils literal notranslate"><span class="pre">el</span></code>). This folder must contain a subfolder <code class="docutils literal notranslate"><span class="pre">LC_MESSAGES</span></code> (this folder naming
is mandatory) which in turn contains the <code class="docutils literal notranslate"><span class="pre">.po</span></code> and the compiled translations (<code class="docutils literal notranslate"><span class="pre">.mo</span></code> files).</p>
</section>
<section id="translating-the-strings-into-a-po-file">
<h3>Translating the strings into a <code class="docutils literal notranslate"><span class="pre">.po</span></code> file<a class="headerlink" href="#translating-the-strings-into-a-po-file" title="Link to this heading">#</a></h3>
<p>Let’s translate into Greek. We first have to set up a
folder for the Greek translation file (<code class="docutils literal notranslate"><span class="pre">el</span></code> is the ISO code for Greek,
see
<a class="reference external" href="https://www.gnu.org/software/gettext/manual/html_node/Usual-Language-Codes.html">here</a>
for full list):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>locales/el/LC_MESSAGES
</pre></div>
</div>
<p>We now have to copy the template to the directory:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>locales/experiment.pot<span class="w"> </span>locales/el/LC_MESSAGES/experiment.po
</pre></div>
</div>
<p>Open this file and add the translation to <code class="docutils literal notranslate"><span class="pre">msgstr</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#: example.py:8</span>
msgid<span class="w"> </span><span class="s2">&quot;Instructions&quot;</span>
msgstr<span class="w"> </span><span class="s2">&quot;Οδηγίες&quot;</span>
</pre></div>
</div>
<p>A better way of doing this is to copy the <code class="docutils literal notranslate"><span class="pre">.pot</span></code> file to <code class="docutils literal notranslate"><span class="pre">locales/&lt;your_language&gt;/LC_MESSAGES/experiment.po</span></code> and open it with <a class="reference external" href="https://poedit.net">POedit editor</a>.</p>
<p>You can also use the package <a class="reference external" href="https://gitlab.com/computational-audition-lab/internationalization">internat</a> to create machine translation using Google Translate and DeepL for a <code class="docutils literal notranslate"><span class="pre">.pot</span></code> file. Note this package is still work in progress. To translate a <code class="docutils literal notranslate"><span class="pre">.pot</span></code> file you would run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>from<span class="w"> </span>internat.translate<span class="w"> </span>import<span class="w"> </span>translate_pot

translate_pot<span class="o">(</span>
<span class="w">    </span>pot_path,
<span class="w">    </span><span class="nv">input_language</span><span class="o">=</span><span class="s2">&quot;en&quot;</span>,
<span class="w">    </span><span class="nv">output_language</span><span class="o">=</span>target_language,
<span class="w">    </span><span class="nv">translator</span><span class="o">=</span><span class="s2">&quot;DeepL&quot;</span>,
<span class="w">    </span><span class="nv">formality</span><span class="o">=</span><span class="s2">&quot;formal&quot;</span>,
<span class="o">)</span>
</pre></div>
</div>
<p>Note you should open the resulting <code class="docutils literal notranslate"><span class="pre">.po</span></code> file with <a class="reference external" href="https://poedit.net">POedit editor</a> and check the translations. Unchecked translations are flagged. Unflag them once you checked them. Otherwise they will not compile.</p>
</section>
<section id="combining-translations">
<h3>Combining translations<a class="headerlink" href="#combining-translations" title="Link to this heading">#</a></h3>
<p>Many times you will have to update a translation because new strings are added, modified or removed. To manipulate the translation files and keep them updated, you can use the <code class="docutils literal notranslate"><span class="pre">msgcat</span></code> and <code class="docutils literal notranslate"><span class="pre">msgmerge</span></code> commands. We will now have a quick look at them.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>msgcat<span class="w"> </span>filename_1.po<span class="w"> </span>filename_2.po<span class="w"> </span>-o<span class="w"> </span>output.po
</pre></div>
</div>
<p>Given two .po files, <code class="docutils literal notranslate"><span class="pre">msgcat</span></code> concatenates these two files into a single one.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the same key exists within both files but with different translations, then <code class="docutils literal notranslate"><span class="pre">msgcat</span></code> adds both translations to the new file and the translator should fix the conflict.</p>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>msgmerge<span class="w"> </span>previous.po<span class="w"> </span>updated.po<span class="w"> </span>-o<span class="w"> </span>output.po<span class="w"> </span><span class="o">[</span>--no-fuzzy-matching<span class="o">]</span><span class="sb">``</span>
</pre></div>
</div>
<p>To merge two translations, you can use <code class="docutils literal notranslate"><span class="pre">msgmerge</span></code>. Imagine you created a new PO file from all of your translatable strings from your code called <code class="docutils literal notranslate"><span class="pre">updated.po</span></code>, but you already have the translations for a large part of the code in <code class="docutils literal notranslate"><span class="pre">previous.po</span></code>. You can use <code class="docutils literal notranslate"><span class="pre">msgmerge</span></code> to only add the new entries of <code class="docutils literal notranslate"><span class="pre">updated.po</span></code> to <code class="docutils literal notranslate"><span class="pre">previous.po</span></code> and store the result in the final <code class="docutils literal notranslate"><span class="pre">output.po</span></code> file. The optional argument <code class="docutils literal notranslate"><span class="pre">--no-fuzzy-matching</span></code> will prevent the merging of fuzzy translations. Fuzzy matching means that it will not look for a 100% match, but will also match keys which changed slightly. Fuzzy matched translations will be flagged with the keyword <code class="docutils literal notranslate"><span class="pre">fuzzy</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#: psynet/demography/general.py:145</span>
<span class="c1">#, fuzzy</span>
msgctxt<span class="w"> </span><span class="s2">&quot;gender&quot;</span>
msgid<span class="w"> </span><span class="s2">&quot;Female&quot;</span>
msgstr<span class="w"> </span><span class="s2">&quot;Weiblich&quot;</span>
</pre></div>
</div>
<p>In practice, it turned out if a translation only changed minimally, it’s fastest to simply do a text search over the <code class="docutils literal notranslate"><span class="pre">.po</span></code> files.</p>
</section>
<section id="compiling-the-po-file-into-a-machine-readable-mo-file">
<h3>Compiling the <code class="docutils literal notranslate"><span class="pre">.po</span></code> file into a machine-readable <code class="docutils literal notranslate"><span class="pre">.mo</span></code> file<a class="headerlink" href="#compiling-the-po-file-into-a-machine-readable-mo-file" title="Link to this heading">#</a></h3>
<p>In PsyNet translations are compiled on demand. This means that if you add a new translation, you do not have to compile the translations. Also, PsyNet makes sure fuzzy translations (i.e. unvalidated translations) are unflagged so they are shown in the experiments.</p>
<p>If you would want to compile the translations manually, you can do so by running:</p>
<p>In order to use the translation in PsyNet (or in any other code), we have to convert
the <code class="docutils literal notranslate"><span class="pre">.po</span></code> file to a machine-readable translation <code class="docutils literal notranslate"><span class="pre">.mo</span></code>-file. You can
do so by running:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>msgfmt<span class="w"> </span>-o<span class="w"> </span>locales/el/LC_MESSAGES/experiment.po<span class="w"> </span>locales/el/LC_MESSAGES/experiment.mo
</pre></div>
</div>
<p>Make sure to double check the translation before compiling, because gettext in Python <cite>does not show</cite> fuzzy translations. Also note that <code class="docutils literal notranslate"><span class="pre">msgmerge</span></code> removes keys that are not in the updated file (e.g., you might loose translations which were commented out). Lastly, keep in
mind that the order of the files in this command matters.</p>
</section>
<section id="setting-the-language">
<h3>Setting the language<a class="headerlink" href="#setting-the-language" title="Link to this heading">#</a></h3>
<p>To load the translation, you need to access the current participant as language settings are attached to a participant. By default the participant language is set to the language of the experiment, which can be set in <code class="docutils literal notranslate"><span class="pre">config.txt</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">language</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>&lt;your_language_iso_code&gt;
</pre></div>
</div>
<p>To get the translation from the participant, we can run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>from<span class="w"> </span>os.path<span class="w"> </span>import<span class="w"> </span>abspath
from<span class="w"> </span>psynet.utils<span class="w"> </span>import<span class="w"> </span>get_translator

_,<span class="w"> </span>_p,<span class="w"> </span><span class="nv">_np</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>get_translator<span class="o">(</span>
<span class="w">    </span><span class="nv">locale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>participant.get_locale<span class="o">()</span>,
<span class="w">    </span><span class="nv">module</span><span class="o">=</span><span class="s1">&#39;experiment&#39;</span>,
<span class="w">    </span><span class="nv">localedir</span><span class="o">=</span>abspath<span class="o">(</span><span class="s1">&#39;locales&#39;</span><span class="o">)</span>
<span class="o">)</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">_</span></code> is an alias for <code class="docutils literal notranslate"><span class="pre">gettext</span></code> and <code class="docutils literal notranslate"><span class="pre">_p</span></code> for <code class="docutils literal notranslate"><span class="pre">pgettext</span></code>. <code class="docutils literal notranslate"><span class="pre">participant.get_locale()</span></code> will return the
language settings of a participant.</p>
<p>You can also set additional language settings in the config:</p>
<ul class="simple">
<li><p>Supported languages the user can choose from</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">supported_locales</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;en&quot;</span>,<span class="w"> </span><span class="s2">&quot;de&quot;</span>,<span class="w"> </span><span class="s2">&quot;nl&quot;</span><span class="o">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The ability for the participant to change the language during the experiment</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">allow_switching_locale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>True
</pre></div>
</div>
<p>It is always possible to programmatically overwrite the language of the
user by overwriting <code class="docutils literal notranslate"><span class="pre">participant.var.locale</span></code>. To access the <code class="docutils literal notranslate"><span class="pre">participant</span></code> variable in the timeline, you can use <a class="reference internal" href="../api/timeline.html#psynet.timeline.PageMaker" title="psynet.timeline.PageMaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">PageMaker</span></code></a>.</p>
<p>To see the translation in action, have a look at the <code class="docutils literal notranslate"><span class="pre">translation</span></code> demo.</p>
</section>
</section>
<section id="design-choices">
<h2>Design choices<a class="headerlink" href="#design-choices" title="Link to this heading">#</a></h2>
<p>There are a few design choices that we made when implementing the translation system in PsyNet. We will explain these choices and the reasoning behind them.</p>
<ul class="simple">
<li><p>Language is set on the level of the experiment. The participant inherits this language setting. The translation shown to the participant depends on the participants’ language setting. The idea behind is that you can have multilingual experiments, where individual participants do the experiment in different languages. This also allows participants to potentially switch between languages during the experiment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gettext</span></code> provides various ways to translate strings, <code class="docutils literal notranslate"><span class="pre">gettext</span></code> simple key value, <code class="docutils literal notranslate"><span class="pre">pgettext</span></code> translation within a context and <code class="docutils literal notranslate"><span class="pre">ngettext</span></code> for plural forms. Then there are also all combinations of them. We decided to only use <code class="docutils literal notranslate"><span class="pre">gettext</span></code> and <code class="docutils literal notranslate"><span class="pre">pgettext</span></code> and not use any of the other functions. The reason is that plural forms are highly language dependent and it is not possible to write a generic function that works for all languages. Instead, we recommend to write separate translations for each condition.</p></li>
<li><p>Variables in translatable strings can be error prone as they might not be translated properly which can lead to runtime errors. PsyNet automatically checks them in a predeploy routine before starting the experiment. To minimize error, we have strong variable naming rules. You may only use f-string notation where the variable name only consists of captial letters and underscores. So <code class="docutils literal notranslate"><span class="pre">_(&quot;My</span> <span class="pre">variable:</span> <span class="pre">{MY_VARIABLE}&quot;)</span></code> would be allowed, but <code class="docutils literal notranslate"><span class="pre">_(&quot;My</span> <span class="pre">variable:</span> <span class="pre">{my_variable}&quot;)</span></code> or <code class="docutils literal notranslate"><span class="pre">_(&quot;My</span> <span class="pre">variable:</span> <span class="pre">{}&quot;)</span></code> would not. This is because the captial letters are less likely to be translated into the target language by machine translation. They are also more visible to human translators. You can also only use <code class="docutils literal notranslate"><span class="pre">.format()</span></code> and not f-strings as the latter will replace the variable before looking up the translation. Say <code class="docutils literal notranslate"><span class="pre">&quot;This</span> <span class="pre">is</span> <span class="pre">your</span> <span class="pre">{AGE}&quot;</span></code> is a defined translation, <code class="docutils literal notranslate"><span class="pre">&quot;This</span> <span class="pre">is</span> <span class="pre">your</span> <span class="pre">12&quot;</span></code> is probably not! So the correct way to use variables in translations is <code class="docutils literal notranslate"><span class="pre">_(&quot;This</span> <span class="pre">is</span> <span class="pre">your</span> <span class="pre">{AGE}&quot;).format(AGE=12)</span></code>.</p></li>
<li><p>Translations are structured into modules. Each module should have distinct name. So PsyNet has a separate module called <code class="docutils literal notranslate"><span class="pre">psynet</span></code> and the experiment called <code class="docutils literal notranslate"><span class="pre">experiment</span></code>. Each package is responsible for the text in their package, so PsyNet stores all translations in <code class="docutils literal notranslate"><span class="pre">psynet/locales</span></code>, where the template is stored in <code class="docutils literal notranslate"><span class="pre">psynet/locales/psynet.pot</span></code> and the translations are stored in <code class="docutils literal notranslate"><span class="pre">psynet/locales/&lt;language_code&gt;/LC_MESSAGES/psynet.po</span></code>. The same is true for the experiment, where the template is stored in <code class="docutils literal notranslate"><span class="pre">&lt;experiment_dir&gt;/locales/experiment.pot</span></code> and the translations are stored in <code class="docutils literal notranslate"><span class="pre">&lt;experiment_dir&gt;/locales/&lt;language_code&gt;/LC_MESSAGES/experiment.po</span></code>.</p></li>
<li><p>Translations of the experiment are checked automatically in a predeploy route. Translations of psynet are checked using CI.</p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="running_tests.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Running tests</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="updating_documentation.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Updating documentation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Peter Harrison
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Internationalization</a><ul>
<li><a class="reference internal" href="#internationalization-process">Internationalization process</a><ul>
<li><a class="reference internal" href="#install-gettext">Install <code class="docutils literal notranslate"><span class="pre">gettext</span></code></a></li>
<li><a class="reference internal" href="#mark-strings-for-translation">Mark strings for translation</a></li>
<li><a class="reference internal" href="#extracting-the-strings-into-a-template-file-pot">Extracting the strings into a template file (<code class="docutils literal notranslate"><span class="pre">.pot</span></code>)</a></li>
<li><a class="reference internal" href="#po-format">PO format</a></li>
<li><a class="reference internal" href="#po-files">PO files</a></li>
<li><a class="reference internal" href="#translating-the-strings-into-a-po-file">Translating the strings into a <code class="docutils literal notranslate"><span class="pre">.po</span></code> file</a></li>
<li><a class="reference internal" href="#combining-translations">Combining translations</a></li>
<li><a class="reference internal" href="#compiling-the-po-file-into-a-machine-readable-mo-file">Compiling the <code class="docutils literal notranslate"><span class="pre">.po</span></code> file into a machine-readable <code class="docutils literal notranslate"><span class="pre">.mo</span></code> file</a></li>
<li><a class="reference internal" href="#setting-the-language">Setting the language</a></li>
</ul>
</li>
<li><a class="reference internal" href="#design-choices">Design choices</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=bffcfdfb"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../_static/js/custom.js?v=ca86d9ac"></script>
    </body>
</html>