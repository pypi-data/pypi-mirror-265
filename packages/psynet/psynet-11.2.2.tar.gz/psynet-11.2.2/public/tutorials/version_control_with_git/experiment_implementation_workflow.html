<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Upgrading to PsyNet 10" href="../upgrading_to_psynet_10.html" /><link rel="prev" title="Essential concepts" href="essential_concepts.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>Experiment implementation workflow - PsyNet 11.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=a26321a0" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">PsyNet 11.1.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">PsyNet 11.1.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/applications.html">When to use PsyNet?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/team.html">Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/command_line.html">Command line</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../learning/how_to_learn.html">How to learn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../learning/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../learning/exercises/index.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Exercises</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../learning/exercises/timeline.html">Timeline exercise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/exercises/graphics.html">Graphics exercise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/exercises/js_synth.html">JSSynth exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../learning/tracks/index.html">Tracks</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Tracks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../learning/tracks/music_perception.html">Music perception track</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dependencies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dependencies/dallinger.html">Dallinger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dependencies/docker.html">Docker</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">INSTALLATION</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../installation/index.html">Installation overview</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Installation overview</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../installation/virtualenv_installation/index.html">Installing PsyNet via virtualenv</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Installing PsyNet via virtualenv</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../installation/virtualenv_installation/linux.html">Installing PsyNet via virtualenv (Linux)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../installation/virtualenv_installation/macos.html">Installing PsyNet via virtualenv (macOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../installation/virtualenv_installation/windows.html">Installing PsyNet via virtualenv (Windows)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../installation/docker_installation/index.html">Installing PsyNet via Docker</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Installing PsyNet via Docker</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../installation/docker_installation/unix_installation.html">Installing PsyNet via Docker (macOS/Linux)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../installation/docker_installation/windows_installation.html">Installing PsyNet via Docker (Windows)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EXPERIMENT DEVELOPMENT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../experiment_development/experiment_directory.html">Experiment directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../experiment_development/development_workflow.html">Development workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../experiment_development/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../experiment_development/dependencies.html">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../experiment_development/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../demos/index.html">Demos</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Demos</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../demos/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/hello_world.html">Hello world</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/timeline.html">Timeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/survey_js.html">SurveyJS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/trial.html">Trials (1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/trial_2.html">Trials (2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/trial_3.html">Trials (3)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/audio.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/static_audio.html">Audio trial maker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/gibbs.html">Gibbs Sampling with People</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/audio_gibbs.html">Audio Gibbs Sampling with People</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/imitation_chains.html">Imitation chains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/tapping_imitation_chain.html">Tapping imitation chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../demos/mcmcp.html">Markov Chain Monte Carlo with People (MCMCP)</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../example_experiments/index.html">Example experiments</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Example experiments</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../example_experiments/carillon.html">Consonance and the carillon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../example_experiments/emotions-scales.html">Emotions of musical scales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../example_experiments/pitch-matching.html">Pitch-matching test</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../creating_a_new_experiment.html">Creating a new experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../classes.html">Classes in PsyNet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timeline.html">Timeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specifying_dependencies.html">Specifying dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tests.html">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internationalization.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../synchronization.html">Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad_page.html">The Ad Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modular_page.html">Modular Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graphics.html">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demography.html">Demography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prescreening_tasks.html">Pre-screening tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create_and_rate.html">Create and Rate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pre_deploy_routines.html">Pre-deploy routines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../experiment_variables.html">Experiment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unity_integration.html">Unity integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../writing_custom_frontends.html">Writing custom frontends</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event_management.html">Event management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../communicating_with_backend.html">Communicating with the back-end via custom routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../payment_limits.html">Payment limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploy_tokens.html">Deploy tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction_to_sql_alchemy.html">Introduction to SQLAlchemy</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../version_control_with_git.html">Version control with Git</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Version control with Git</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="essential_concepts.html">Essential concepts</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Experiment implementation workflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upgrading_to_psynet_10.html">Upgrading to PsyNet 10</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../api/index.html">API Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of API Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/asset.html">Asset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/audio_mixer.html">AudioMixer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/bot.html">Bot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/command_line.html">Command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/consents.html">Consents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/data.html">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/demography.html">Demography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/error.html">Error</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/experiment.html">Experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/field.html">Field</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/graphics.html">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/js_synth.html">JSSynth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/media.html">Media</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/modular_page.html">ModularPage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/page.html">Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/participant.html">Participant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/prescreen.html">Prescreen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/process.html">Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/recruiters.html">Recruiters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/redis.html">Redis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/serialize.html">Serialize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/sync.html">Sync</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/timeline.html">Timeline</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../api/trial/index.html">Trial</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Trial</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/audio.html">Audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/audio_gibbs.html">AudioGibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/chain.html">Chain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/dense.html">Dense</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/gibbs.html">Gibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/graph.html">Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/imitation_chain.html">ImitationChain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/main.html">Main</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/media_gibbs.html">MediaGibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/mcmcp.html">MCMCP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/record.html">Record</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/static.html">Static</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/trial/video.html">Video</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/utils.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/version.html">Version</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DEPLOYING</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/web_servers.html">Web servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/aws_server_setup.html">Setting up an experiment server with AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/ssh_server.html">SSH servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/heroku_server.html">Heroku deployments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/prolific.html">Deploying an experiment to Prolific</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/deploy_from_archive.html">Deploying from archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/export.html">Exporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to PsyNet</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer/workflow.html">Developer workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/contributing_a_feature_or_bugfix.html">Contributing a feature/bugfix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/prescreening_tasks.html">Creating pre-screening tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/updating_documentation.html">Updating documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/internationalization.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/running_tests.html">Running tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/making_a_release.html">Making a release</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dashboards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dashboards/translation.html">Translation dashboard</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://gitlab.com/PsyNetDev/PsyNet/-/edit/master/docs/tutorials/version_control_with_git/experiment_implementation_workflow.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="experiment-implementation-workflow">
<h1>Experiment implementation workflow<a class="headerlink" href="#experiment-implementation-workflow" title="Link to this heading">#</a></h1>
<p>PsyNet experiments are represented as folders of files, including most importantly:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">config.txt</span></code> (contains configuration parameters);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">experiment.py</span></code> (defines the logic of the experiment);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> (lists the Python packages imported by the experiment);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">constraints.txt</span></code> (lists all Python packages to be installed on the server).</p></li>
</ul>
</div></blockquote>
<p>The resulting folder might look something like this:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/folder.png"><img alt="../../_images/folder.png" src="../../_images/folder.png" style="width: 500px;" /></a>
</figure>
<p><br />
Let’s suppose that we’ve just now created this experiment directory for the first time, perhaps by copying it from a demo in the PsyNet source code. Our first task is to <strong>initialize the Git repository</strong>. We do this by navigating to the experiment directory in our Terminal, and entering the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">init</span></code> command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~/path-to-my-experiment</span>
<span class="go">git init</span>
</pre></div>
</div>
<p>This creates a hidden folder called <code class="docutils literal notranslate"><span class="pre">.git</span></code> in our experiment directory. On a Mac this will be hidden by default, but we can show it by pressing ‘Command + Shift + .’ (note the period at the end).</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/folder_with_git.png"><img alt="../../_images/folder_with_git.png" src="../../_images/folder_with_git.png" style="width: 500px;" /></a>
</figure>
<p><br />
We can verify that the repository has been initialized successfully with the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> command.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_status.gif"><img alt="../../_images/git_status.gif" src="../../_images/git_status.gif" style="width: 800px;" /></a>
</figure>
<p><br />
Our repository does not have any commits yet. Let’s make our first commit, including all of the files we’ve added so far.</p>
<p>Making a commit in Git comprises two steps. First, we identify which changes we wish to commit: this process is called <em>staging</em>. Once we’re happy with our staged changes, we finalize the commit, making sure to provide a descriptive title.</p>
<p>We stage changes using the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> command. We use this command to select individual files that we want to commit. In particular, we are interested in files that either (a) are new to the repository or (b) have changed since the last commit. Staging a file means that the upcoming commit will record the file in its current state, including any changes since the last commit. Git will not let you stage a file that has not changed since the last commit because this would be a redundant action.</p>
<p>One way to use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> is to select individual files one-by-one. We write <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> followed by the path to the file that we wish to add. If we run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> again we can verify that the file has indeed been staged.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_add_file.gif"><img alt="../../_images/git_add_file.gif" src="../../_images/git_add_file.gif" style="width: 800px;" /></a>
</figure>
<p>Alternatively, if we know we want to stage all the remaining files in the directory (listed currently in red), we can write</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git add .</span>
</pre></div>
</div>
<p>The period is a shorthand for ‘all files in the directory’. This shorthand is useful, but it can encourage people to be reckless in their commits, including files that ought not to be included (e.g. API credentials). It’s good practice to check the file list carefully before running this command.</p>
<p>A related command is <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">-i</span></code> (no period at the end). This gives a simple interactive interface that allows you to select which files you want to add to the commit.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_add_dir.gif"><img alt="../../_images/git_add_dir.gif" src="../../_images/git_add_dir.gif" style="width: 800px;" /></a>
</figure>
<p>Suppose we’re happy that we’ve now staged all the files we want to stage. We then finalize the commit by writing a command of the following form:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git commit -m &quot;Write your commit title here&quot;</span>
</pre></div>
</div>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_commit.gif"><img alt="../../_images/git_commit.gif" src="../../_images/git_commit.gif" style="width: 800px;" /></a>
</figure>
<p>We can verify that this commit has made it into our repository’s history by running <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code>.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_log1.gif"><img alt="../../_images/git_log1.gif" src="../../_images/git_log1.gif" style="width: 640px;" /></a>
</figure>
<p><br />
Currently our repository is only stored on our local computer. This is fine for local work, but usually we’d want to create a remote copy of the repository too, serving both as a useful backup of our code and a portal for other people to contribute modifications.</p>
<p>To create a remote repository, we go to our favorite version-control platform (e.g., GitHub, GitLab, Bitbucket), login to our account, and follow the instructions to create a new ‘repository’ (GitHub     terminology) or ‘project’ (GitLab terminology). There are a few things to think about here:</p>
<blockquote>
<div><ul class="simple">
<li><p>You will need to decide on a name for the repository (GitLab calls this the <em>project slug</em>). It is useful to make this name self-descriptive, not too long, and without capital letters, for example <em>stroop-implementation</em>.</p></li>
</ul>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/repository_name.png"><img alt="../../_images/repository_name.png" src="../../_images/repository_name.png" style="width: 320px;" /></a>
</figure>
<ul class="simple">
<li><p>If you are working as part of a team (e.g. the MPIEA Computational Auditory Perception group), you may want to make sure that the repository is created as part of your shared group.</p></li>
</ul>
<p>For example, on the GitHub interface:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/github_interface.png"><img alt="../../_images/github_interface.png" src="../../_images/github_interface.png" style="width: 600px;" /></a>
</figure>
<p><br />
On the GitLab interface:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/gitlab_interface.png"><img alt="../../_images/gitlab_interface.png" src="../../_images/gitlab_interface.png" style="width: 540px;" /></a>
</figure>
<dl class="simple">
<dt><br /></dt><dd><ul class="simple">
<li><p>These two components (group and slug name) are combined together to produce the repository’s URL, for example <cite>https://gitlab.com/computational-audition-lab/stroop-implementation</cite>.</p></li>
<li><p>Think carefully about whether to make your repository <em>public</em> or <em>private</em>. Public repositories can be viewed by the general public, whereas private repositories can only be viewed by yourself or your team. If you make the repository public, you must be very careful about accidentally leaking sensitive information (e.g., API keys, or participant data; note that it’s best practice not to commit these files to Git in the first place!). Remember that the repository stores its own full version history, so once you commit something sensitive it’ll be accessible forever, even if you subsequently delete it from the repository and commit that deletion.</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<p>Once you’ve created your remote repository your version-control framework will typically display you some instructions about how to link it to your local repository. On GitHub the instructions look like this:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/github_instructions.png"><img alt="../../_images/github_instructions.png" src="../../_images/github_instructions.png" style="width: 800px;" /></a>
</figure>
<p><br />
We’ve created our local repository already, so we can follow the instructions titled ‘push an existing repository from the command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git remote add origin git@github.com:pmcharrison/stroop-implementation.git</span>
<span class="go">git branch -M main</span>
<span class="go">git push -u origin main</span>
</pre></div>
</div>
<p>There are three commands here:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">add</span></code> tells the local repository to add a remote repository called ‘origin’ at the specified URL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">-M</span> <span class="pre">main</span></code> tells Git to rename the current branch to main (since by default it might be called master, and GitHub is trying to push back against this).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">-u</span> <span class="pre">origin</span> <span class="pre">main</span></code> tells Git to push the local branch (called <code class="docutils literal notranslate"><span class="pre">main</span></code>) to the remote repository (called <code class="docutils literal notranslate"><span class="pre">origin</span></code>).</p></li>
</ul>
</div></blockquote>
<p>You don’t need to remember these commands, because you can just copy them from your version-control framework, but it’s useful to cast your eye over them to make sure you’re aware of what they’re doing.</p>
<p>If we now refresh the page on our version-control framework, we should see our files uploaded.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/github_main_branch.png"><img alt="../../_images/github_main_branch.png" src="../../_images/github_main_branch.png" style="width: 800px;" /></a>
</figure>
<p><br />
Now, suppose we continue working on our experiment by adding a couple of lines of content to <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>. We make our changes locally via our chosen text editor, then once we’re happy with our changes we perform three steps:</p>
<blockquote>
<div><ul class="simple">
<li><p>Stage the file;</p></li>
<li><p>Commit the file;</p></li>
<li><p>Push the changes to the remote repository.</p></li>
</ul>
</div></blockquote>
<p>This is achieved using the following commands:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git add requirements.txt</span>
<span class="go">git commit -m &quot;Adding content to requirements.txt&quot;</span>
<span class="go">git push</span>
</pre></div>
</div>
<p>Once the push command has completed, we should be able to see our new changes reflected in the version-control framework. Version-control frameworks like GitHub provide a handy way to explore the status and history of a repository. For example, we can explore the content of a given file:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/github_file.png"><img alt="../../_images/github_file.png" src="../../_images/github_file.png" style="width: 720px;" /></a>
</figure>
<p>We can also explore the commit history:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/github_commit_history.png"><img alt="../../_images/github_commit_history.png" src="../../_images/github_commit_history.png" style="width: 800px;" /></a>
</figure>
<p>and view individual commits:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/github_diff.png"><img alt="../../_images/github_diff.png" src="../../_images/github_diff.png" style="width: 800px;" /></a>
</figure>
<p><br />
These kinds of displays can provide a useful substitute for Git command-line actions such as <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code>.</p>
<p>We can continue to develop our experiment by repeating this cycle of making changes, staging, committing, and pushing. We will build up a coherent and interpretable version-control history for our repository that describes the series of steps that we took to write our code.</p>
<p>Let’s consider a few situations that might come up during this process.</p>
<section id="deleting-files">
<h2>Deleting files<a class="headerlink" href="#deleting-files" title="Link to this heading">#</a></h2>
<p>Suppose we committed a file to Git, but now we want to delete it. How do we achieve this? One way is to use the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rm</span></code> command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git rm accident.txt</span>
</pre></div>
</div>
<p>This will delete the offending file and stage the deletion in Git, so that next time we commit the deletion will be logged.</p>
<p>Alternatively, we can delete the file outside of Git (e.g. in Finder), and then run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git add .</span>
</pre></div>
</div>
<p>which will have the same effect, namely staging the deletion of the file.</p>
</section>
<section id="ignoring-files">
<h2>Ignoring files<a class="headerlink" href="#ignoring-files" title="Link to this heading">#</a></h2>
<p>Git is designed for tracking <em>text</em> files, typically source code files. The evolution of a source-code file can typically be expressed efficiently in terms of line-by-line diffs, and does not take much space to capture on disk.</p>
<p>It is also possible to store other kinds of files in Git, for example images, videos, or executable files. It is usually fine to store a small number of such files in a repository. However, if the number or size of such files gets big, it becomes a problem, with Git repositories becoming slow to download and Git actions becoming slow to run.</p>
<p>In such cases it is often useful to instruct Git <em>not</em> to track certain files. Perhaps we tell the software to download these files by a separate mechanism instead, or to generate them from scratch when running the code for the first time on a new machine.</p>
<p>There are other situations too where it is useful to tell Git to ignore certain files. Some software generates certain cache files which are generated automatically from the code and do not need to be tracked. For example, Python often generates cache files with the extension <code class="docutils literal notranslate"><span class="pre">.pyc.</span></code> Some software also generates log files, which are useful for debugging, but aren’t useful to keep long-term. For example, PsyNet generates log files called <code class="docutils literal notranslate"><span class="pre">server.log</span></code>.</p>
<p>The way we tell Git to ignore certain files is using a ‘.gitignore’ file. We create a file with the name ‘.gitignore’ (note the leading period) in a folder containing files we want Git to ignore. This would often be the top-level directory of the repository, but it’s equally possible to place the files in subdirectories. On each line of the ‘.gitignore’ file we provide a path specification that tells Git what files to ignore. It’s possible to use wildcards to ignore all files that match a certain specification. For example, the following ‘.gitignore’ file instructs Git to ignore the file called <code class="docutils literal notranslate"><span class="pre">secret-api-key.txt</span></code>, as well as all files with the extension ‘.wav’.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">secret-api-key.txt</span>
<span class="go">\*.wav</span>
</pre></div>
</div>
<p>If we commit a file to Git, and only later add the file to ‘.gitignore’, then Git will by default continue to track the file. To stop tracking the file, you can write a command like the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git rm --cached secret-api-key.txt</span>
</pre></div>
</div>
<p>As discussed above, though, this won’t necessarily save you from hackers mining repositories for API keys. It also won’t undo the damage wrought by accidentally committing a massive file to Git; even if you subsequently stop tracking the file, it will still be stored somewhere in the Git repository’s version history, and this will make the Git repository very slow to download in the future.</p>
<p>One solution for pruning away big files is to use a service like <a class="reference external" href="https://rtyley.github.io/bfg-repo-cleaner/">BFG Repo-Cleaner</a>. This can be instructed to strip away any files bigger than a certain size.</p>
<p>If you know what you’re doing, there are likewise methods for removing individual files containing sensitive data from the commit history (see for example <a class="reference external" href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository">GitHub’s documentation on removing sensitive files</a>). The stakes here are high if you don’t know what you’re doing, though; you might accidentally leave some sensitive data anyway.</p>
<p>In many situations, the simplest situation might simply be to start a new repository from scratch. This is not really an option on big collaborative repositories, but it can be fine if you’re the only person working on the current repository.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rm -rf .git</span>
<span class="go">git init</span>
<span class="go">git add .</span>
<span class="go">git commit -m &quot;Initial commit&quot;</span>
</pre></div>
</div>
<p>The ‘.gitignore’ file has a dual function in PsyNet experiment implementations. In addition to telling Git which files to track, it also tells PsyNet which files should be uploaded to the remote server when deploying an experiment. This functionality is particularly important in the context of large media files (coming to a total size of &gt; 100 MB). Such files should generally not be uploaded as part of the experiment directory, but should instead be accessed through separate web-hosting services such as AWS S3. In fact, if you try to launch an experiment containing too many files in the experiment directory, PsyNet will throw an error that can only be disabled by removing the files or alternatively adding them to ‘.gitignore’.</p>
</section>
<section id="tagging-commits">
<h2>Tagging commits<a class="headerlink" href="#tagging-commits" title="Link to this heading">#</a></h2>
<p>Sometimes it is useful to <em>tag</em> particular commits that represent special moments in a repository’s history. For example, each time we deploy our experiment online, it’s good practice to tag the current commit, so that it’s easy to look back in the future and see exactly what form the code took at that particular point in time. The tag name you choose can then be used in Git commands as an alternative to the commit checksum.</p>
<p>We achieve this using the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span></code> command. This command creates a tag for the currently active commit in your Git repository, which will normally just be the last commit you made.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git tag -a deploy-pilot -m &quot;Deploying the pilot experiment&quot;</span>
</pre></div>
</div>
<p>Here the <code class="docutils literal notranslate"><span class="pre">-a</span></code> flag means that the tag is a so-called <em>annotated</em> tag. Annotated tags are able to carry useful metadata like the message above, ‘Deploying the pilot experiment’. Immediately following the <code class="docutils literal notranslate"><span class="pre">-a</span></code> flag, we write the name of the tag, in this case <code class="docutils literal notranslate"><span class="pre">deploy-pilot</span></code>. The <code class="docutils literal notranslate"><span class="pre">-m</span></code> option is then used to specify the message to include with the tag.</p>
<p>The default <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> command does <em>not</em> push tags, it only pushes commits. To push tags as well, you need the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git push --tags</span>
</pre></div>
</div>
<p>Once you’ve pushed your tags, you can view them in your version-control framework:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_gui_tags.png"><img alt="../../_images/git_gui_tags.png" src="../../_images/git_gui_tags.png" style="width: 800px;" /></a>
</figure>
<p><br />
You can also list all tags via the Git command-line:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_tag.gif"><img alt="../../_images/git_tag.gif" src="../../_images/git_tag.gif" style="width: 600px;" /></a>
</figure>
</section>
<section id="undoing-uncommitted-changes">
<h2>Undoing uncommitted changes<a class="headerlink" href="#undoing-uncommitted-changes" title="Link to this heading">#</a></h2>
<p>Sometimes we will make changes to the files in our local repository and then decide we don’t want to keep or commit them. We can undo changes to a specific file using the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code>  command, passing it the filename of the file we want to revert.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout my-file.txt</span>
</pre></div>
</div>
<p>If we want to undo all changes to files in the repository, including any changes already staged for committing, we can use the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span></code> command.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git stash</span>
</pre></div>
</div>
<p>The useful thing about <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span></code> is that it remembers the changes you’ve undone, just in case you decide later you want to reinstate them. You can reinstate the latest set of stashed changes using the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git stash apply</span>
</pre></div>
</div>
<p>It is also possible via this command to access previous stashes if necessary. In particular, you can run the command</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git stash list</span>
</pre></div>
</div>
<p>which lists your previous stashes. Stashes are saved and applied in a last-in-first-out pattern.</p>
</section>
<section id="temporarily-visiting-a-historic-commit-or-tag">
<h2>Temporarily visiting a historic commit or tag<a class="headerlink" href="#temporarily-visiting-a-historic-commit-or-tag" title="Link to this heading">#</a></h2>
<p>Git makes it easy to visit arbitrary points in a repository’s history. To visit a given commit, we refer to its <em>checksum</em>. The checksum is a pseudorandom alphanumeric string listed alongside each commit in a repository’s commit history. We can find these checksums either through the Git command line (<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code>) or through our version-control framework (e.g., GitHub):</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/github_commit_history.png"><img alt="../../_images/github_commit_history.png" src="../../_images/github_commit_history.png" style="width: 800px;" /></a>
</figure>
<p><br />
In the example above, GitHub displays the starting seven characters of each commit’s checksum; ‘39ece5b’ for the first commit, and ‘a329717’ for the second commit. These starting characters can be used as shorthand for the full 40-character checksum, assuming that there are no two commits that share the same starting characters.</p>
<p>Let’s suppose we want to explore the historic state of the repository at the point of ‘Initial commit’. There are two ways of doing this. One is to explore the files via the GitHub/GitLab interface, using an option labeled something like ‘Browse files’ or ‘View files’:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_gui_browse.gif"><img alt="../../_images/git_gui_browse.gif" src="../../_images/git_gui_browse.gif" style="width: 700px;" /></a>
</figure>
<p><br />
Alternatively, we can take the files in our local repository back to their historic states. We do this using the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> command.</p>
<p>Before using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code>, your current local repository should be <em>clean</em>, that is, containing no changes from its parent commit. If you do have changes (staged or unstaged) you could consider using the <em>stash</em> command described above to stash them temporarily and re-<em>apply</em> them afterwards.</p>
<p>We pass <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> the commit’s checksum, or alternatively just the first few characters of it (as long as they uniquely identify that commit).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout 39ece5b</span>
</pre></div>
</div>
<p>This recreates the historic status of the repository as snapshotted in commit 39ece5b, while still preserving in the version history the commits that were logged since then. We can then explore the files at our leisure, run the code they contain, etcetera.</p>
<p>If we run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> like this, we’ll get a message from Git notifying us that we are in ‘detached HEAD’ state:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">You are in &#39;detached HEAD&#39; state. You can look around, make experimental</span>
<span class="go">changes and commit them, and you can discard any commits you make in this</span>
<span class="go">state without impacting any branches by switching back to a branch.</span>
</pre></div>
</div>
<p>It sounds a bit scary to have a ‘detached head’ but don’t worry, there’s nothing wrong here. All this means is that, if you make commits now, they <em>won’t</em> be added to the end of the current branch as they normally would. In most workflows you won’t need to make commits now anyway.  Just take the opportunity to look around and gather the information you need. Once you’re done, you can ‘reattach’ your head (that’s not the technical term) by checking out the branch again, for example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout master</span>
</pre></div>
</div>
<p>Then, if you run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> again, you can confirm that everything looks like it normally does.
In the above example we checked out a particular commit using its checksum. We can also check out particular tags using their names. For example, above we created a tag called <code class="docutils literal notranslate"><span class="pre">deploy-pilot</span></code>. We can check out that tag as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout deploy-pilot</span>
</pre></div>
</div>
<p>The process behaves exactly the same otherwise as checking out a tag by its checksum.</p>
</section>
<section id="undoing-a-historic-commit">
<h2>Undoing a historic commit<a class="headerlink" href="#undoing-a-historic-commit" title="Link to this heading">#</a></h2>
<p>Sometimes you will look through your commit history and decide that you want to undo a particular commit. Perhaps this commit renamed a particular variable in a way you don’t like, or introduced some kind of bug that you don’t want to do with.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code> command is designed for this kind of situation. Its job is to work out what the repository would look like if that historic commit had never occurred. Make sure first you are on your branch HEAD by running <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> plus your branch name. You then refer to the historic command using its checksum, and write something like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git revert 39ece5b</span>
</pre></div>
</div>
<p>Git will then display you a window like this:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_revert_vim.png"><img alt="../../_images/git_revert_vim.png" src="../../_images/git_revert_vim.png" style="width: 700px;" /></a>
</figure>
<p>This is the Vim text editor. It is famously frustrating for people who don’t know how to use it but for some reason it is the default text editor that comes up with people’s Git installations. At the time of writing, the simple question of ‘how do I exit Vim?’ has been viewed 2.5 million times on <a class="reference external" href="https://stackoverflow.com/questions/11828270/how-do-i-exit-the-vim-editor">StackOverflow</a>:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/stackoverflow_exit_vim.png"><img alt="../../_images/stackoverflow_exit_vim.png" src="../../_images/stackoverflow_exit_vim.png" style="width: 600px;" /></a>
</figure>
<p><br />
These people are the lucky ones – at least they realized that they were using Vim and knew what to Google. Others have just met with a lot of frustration.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/twitter_exit_vim.png"><img alt="../../_images/twitter_exit_vim.png" src="../../_images/twitter_exit_vim.png" style="width: 400px;" /></a>
</figure>
<p><br />
When Git throws you into Vim, it gives you the opportunity to modify the pregenerated commit message. By default it’s given the new commit the title ‘Revert “Add content to requirements.txt”’, but you could customize this if you wanted by typing your own commit title.</p>
<p>Once you’re happy, you need to ‘save and quit’ Vim. The way you do this is as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>Quit ‘edit mode’ by pressing ESC.</p></li>
<li><p>Press ‘:’ to enter the menu.</p></li>
<li><p>Type ‘wq’, short for ‘write and quit’.</p></li>
<li><p>Press ‘enter’.</p></li>
</ul>
</div></blockquote>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_revert_status.gif"><img alt="../../_images/git_revert_status.gif" src="../../_images/git_revert_status.gif" style="width: 800px;" /></a>
</figure>
<p><br />
You will do well to memorize these few commands. If you really hate Vim, though, you can configure Git to use a more intuitive text editor (‘Nano’) by default using the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git config --global core.editor &quot;nano&quot;</span>
</pre></div>
</div>
<p>Now that you’ve completed your <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code> command, Git will have created a new commit that undoes the historic commit you chose, something like the inverse of what you had originally. For example, if your original commit looked like this:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_original_commit.png"><img alt="../../_images/git_original_commit.png" src="../../_images/git_original_commit.png" style="width: 700px;" /></a>
</figure>
<p><br />
Then your ‘revert’ commit will look like this:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_revert_commit.png"><img alt="../../_images/git_revert_commit.png" src="../../_images/git_revert_commit.png" style="width: 700px;" /></a>
</figure>
<p><br />
An important feature of the ‘revert’ command is that it preserves history – the old commit stays in the commit log. We can see it for example in our GitHub history:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_revert_history.png"><img alt="../../_images/git_revert_history.png" src="../../_images/git_revert_history.png" style="width: 700px;" /></a>
</figure>
<p><br />
This is a useful feature because it protects us from ever doing anything truly disastrous and losing data. There is an alternative Git command that allows destructive deletion like this, called <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code>. We’re not going to talk about that here precisely because of its dangerous nature; it’s best to save that until you really know what you’re doing.</p>
</section>
<section id="reverting-to-a-historic-commit-or-tag">
<h2>Reverting to a historic commit or tag<a class="headerlink" href="#reverting-to-a-historic-commit-or-tag" title="Link to this heading">#</a></h2>
<p>Sometimes things will have gone so poorly that you want to permanently revert the status of your repository to its snapshot from a previous commit. This means setting all the files to their historic states at a particular point in time.</p>
<p>One way of doing this in Git is with the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code> command. However, this by default is a <em>destructive</em> operation, in that it rewrites history. This is dangerous and we’re not going to recommend it here.</p>
<p>Another way of doing it in Git is with the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code> command. However, the standard use of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code> is to undo individual commits, not to revert the whole repository to the snapshot from a particular commit. There are ways that you can customize the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code> command to work in the way that we want, but they’re hard to remember and the common ones fail in certain applications (e.g., if your history contains a merge commit).</p>
<p>Instead, we recommend a slightly hacky workflow which is actually rather simple and robust. It works as follows. Suppose we are on our master branch, and we want to revert back to the repository’s status at the time of commit 39ece5b. We do the following:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Open your repository in the GUI from your operating system (e.g. Finder).</p></li>
<li><p>Make sure that ‘view hidden files’ is disabled. In particular, you should NOT be able to see the ‘.git’ folder in your repository. In Mac you can toggle this with CMD + Shift + ‘.’.</p></li>
<li><p>Check out the historic commit of interest:</p></li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout 39ece5b</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Using your GUI from your operating system (e.g. Finder), copy all files/folders in your repository to the clipboard.</p></li>
<li><p>Check out the branch you’re wanting to perform the edits for (e.g., ‘master’):</p></li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout master</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Stage the changes and commit them:</p></li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git add .</span>
<span class="go">git commit -m &quot;Reverting to commit 39ece5b&quot;</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<p>This workflow should work fine except for cases where your version-controlled changes include hidden files. In such cases you’ll need to perform the same procedure, except enabling hidden file viewing in the GUI, and copying all files/folders EXCEPT the ‘.git’ folder.</p>
</section>
<section id="undoing-commits-accidentally-committed-to-the-wrong-branch">
<h2>Undoing commits accidentally committed to the wrong branch<a class="headerlink" href="#undoing-commits-accidentally-committed-to-the-wrong-branch" title="Link to this heading">#</a></h2>
<p>Sometimes we might accidentally make some commits to the wrong branch. As long as we realize this before pushing our commits, the problem is relatively straightforward to fix.</p>
<p>The most efficient process here depends on the precise state of the repository. Here we will describe a process that should work well for any state, but in particular use cases there will be slightly more efficient methods.</p>
<p>Start out on the branch where you committed the erroneous commits (this is often the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch). If you have uncommitted changes in your working directory that you want to keep but moved to the new branch, commit them using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>.</p>
<p>Now <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> to work out exactly how many commits you need to undo (the <code class="docutils literal notranslate"><span class="pre">--oneline</span></code> flag instructs Git to print each commit on just one line):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git log --oneline</span>
</pre></div>
</div>
<p>Count the number of commits that you want to undo and make a note of this number. Also make a note of the checksum corresponding to the last valid commit (i.e., the commit immediately before your first erroneous commit). Lastly, make a note of the checksums for the commits you want to take to your new branch, <strong>in order from oldest to newest</strong>.</p>
<p>If the branch you want to commit doesn’t exist yet, proceed by following these instructions:</p>
<blockquote>
<div><p>Check out the last valid commit using the checksum you copied earlier, for example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout 6ad7c7d3</span>
</pre></div>
</div>
<p>Create a branch from this commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout -b my-branch</span>
</pre></div>
</div>
<p>Then continue with the next instructions.</p>
</div></blockquote>
<p>Now check out the branch you want to commit to:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout -b my-branch</span>
</pre></div>
</div>
<p>Now <em>cherry-pick</em> the commits you want to move to this branch in order from oldest to newest.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git cherry-pick my-commit-hash-1</span>
<span class="go">git cherry-pick my-commit-hash-2</span>
<span class="go">git cherry-pick my-commit-hash-3</span>
<span class="go">...</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">my-branch</span></code> should now contain all the commits we wished to port. Lastly, we need to remove these commits from the original branch, which was <code class="docutils literal notranslate"><span class="pre">master</span></code> in our example. First we check out that branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout master</span>
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> to verify that the erroneous commits are actually present in the current branch (they might not be if you checked out the wrong branch!).</p>
<p>If so, run the following command to roll the branch to its last valid commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git reset f265hfr --hard</span>
</pre></div>
</div>
<p>replacing <code class="docutils literal notranslate"><span class="pre">f265hfr</span></code> with the checksum of your last valid commit.</p>
<p>Verify that the commits have been appropriately using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>. If so, you can consider your problem fixed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cherry-pick</span></code> command works by taking a historic commit and applying it to the current branch. It is useful whenever you want to copy commits to a new branch without going through the process of merging branches.</p>
</div>
</section>
<section id="using-the-git-gui-in-your-ide">
<h2>Using the Git GUI in your IDE<a class="headerlink" href="#using-the-git-gui-in-your-ide" title="Link to this heading">#</a></h2>
<p>So far we’ve been interacting with Git primarily using the command-line. This is a useful skill to have because the command-line will be available in almost all Git development contexts, and it provides a huge amount of flexibility.</p>
<p>However, it can be rather slow to explore changes to the codebase using command-line. For example, when examining precisely what changes are going to be introduced by a staged commit, it’s useful to be able to skim quickly through the diffs for all the altered files and verify that they look correct.</p>
<p>We therefore recommend taking advantage of the Git GUI in your IDE. Most IDEs do provide some kind of Git GUI. Here we’re going to provide some screenshots from the Git GUI in PyCharm, the recommended IDE for PsyNet, but most IDEs should offer similar functionalities. <a class="footnote-reference brackets" href="#id3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
<p>When using the PyCharm Git GUI we typically open a PyCharm ‘project’ corresponding to the Git repository. For example, when working with the PsyNet codebase, we open the ‘psynet’ folder that we get when downloading our repository from Git.</p>
<p>Suppose we have been working on our code in PyCharm. We can open PyCharm’s Git GUI by clicking the ‘Commit’ tab, typically located on the left-hand side of the screen:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pycharm_commit_tab.png"><img alt="../../_images/pycharm_commit_tab.png" src="../../_images/pycharm_commit_tab.png" style="width: 340px;" /></a>
</figure>
<p><br />
This panel lists the files that have been changed so far. If we double-click on a particular file, we are then given a familiar diff visualization that efficiently summarizes the changes to this file:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pycharm_panel.png"><img alt="../../_images/pycharm_panel.png" src="../../_images/pycharm_panel.png" style="width: 700px;" /></a>
</figure>
<p><br />
We can use the interface to stage changes to particular files or regions of files. This is generally done by clicking checkboxes. For example, we can stage the particular implementation of the ‘subtract’ function by clicking the checkbox next to it:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pycharm_panel_subtract.png"><img alt="../../_images/pycharm_panel_subtract.png" src="../../_images/pycharm_panel_subtract.png" style="width: 340px;" /></a>
</figure>
<p><br />
We can alternatively stage changes to the entire file by clicking the checkbox next to that file in the commit pane:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pycharm_changes.png"><img alt="../../_images/pycharm_changes.png" src="../../_images/pycharm_changes.png" style="width: 340px;" /></a>
</figure>
<p><br />
We can type a commit message in the box below, and we can commit and optionally push at the click of a button:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pycharm_commit_message.png"><img alt="../../_images/pycharm_commit_message.png" src="../../_images/pycharm_commit_message.png" style="width: 340px;" /></a>
</figure>
<p><br />
This GUI also becomes particularly handy when resolving merge conflicts, which we will talk about later.</p>
</section>
<section id="carrying-out-experimental-work-on-a-development-branch">
<h2>Carrying out experimental work on a development branch<a class="headerlink" href="#carrying-out-experimental-work-on-a-development-branch" title="Link to this heading">#</a></h2>
<p>When we’re implementing an experiment or data analysis on our local machine, it’s often useful to experiment with some code modifications on a separate branch to our main branch. This allows us to be a bit more radical with our changes without worrying about breaking the stable version of our experiment.</p>
<p>Let’s talk through the workflow for this. First, we make sure we’re on the HEAD of our main branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout master</span>
</pre></div>
</div>
<p>or if you’ve named your branch ‘main’:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout main</span>
</pre></div>
</div>
<p>Then, we create and checkout a new branch with a descriptive name (here ‘new-feature’):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout -b new-feature</span>
</pre></div>
</div>
<p>We can now work on this branch as normal, making code edits and committing them using the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> commands.</p>
<p>In some cases, we might have already made some local changes before realizing that we want to make a new branch. That’s fine too – you can run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">new-feature</span></code> even if you have uncommitted local changes.</p>
<p>When we try and push our new branch the first time, Git will throw us an error message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">fatal: The current branch new-feature has no upstream branch.</span>
<span class="go">To push the current branch and set the remote as upstream, use</span>

<span class="go">    git push --set-upstream origin new-feature</span>
</pre></div>
</div>
<p>All we need to do is copy and paste the suggested command into our terminal and run it again.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git push --set-upstream origin new-feature</span>
</pre></div>
</div>
<p>Suppose we need to switch back temporarily to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch. We can do this using the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> command.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout master</span>
</pre></div>
</div>
<p>We can then keep working on the master branch as usual. When we’re ready, we can switch back to the <code class="docutils literal notranslate"><span class="pre">new-feature</span></code> branch.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout new-feature</span>
</pre></div>
</div>
<p>Version-control frameworks like GitHub and GitLab make it easy to compare different branches. We do this by creating a draft <em>pull request</em> (GitHub terminology) or <em>merge request</em> (GitLab terminology). Pull requests and merge requests are created through the GitHub/GitLab websites. The idea behind a pull/merge request is specifically that you are planning (eventually) to merge the new branch (e.g., <code class="docutils literal notranslate"><span class="pre">new-feature</span></code>) into the branch it came from (e.g., <code class="docutils literal notranslate"><span class="pre">master</span></code>). The GitHub/GitLab interface correspondingly provides you with a diff explaining how the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch will be updated once you complete this merge. For example, the following screenshot summarizes a very simple work-in-progress merge request in the PsyNet repository:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/psynet_merge_request.png"><img alt="../../_images/psynet_merge_request.png" src="../../_images/psynet_merge_request.png" style="width: 700px;" /></a>
</figure>
<p><br />
This view is particularly useful for code review processes in collaborative projects, but it’s also rather useful when evaluating changes in one’s own code.</p>
<p>At some point you may decide you wish to merge your feature branch back into the master branch. To achieve this in Git, you do the following:</p>
<ol class="arabic simple">
<li><p>Check out the master branch (or main, if you called it main):</p></li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout master</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Merge in your feature branch:</p></li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git merge new-feature</span>
</pre></div>
</div>
</div></blockquote>
<p>Git will ask you at this point to provide a merge commit message. Here’s an opportunity for you to use your new-found Vim skills (or simply do what most of us do and type “:wq” in order to save the default merge commit message and quit Vim).</p>
<p>Alternatively, it’s possible to perform the merge using the version-control interface (e.g. GitHub, GitLab). The ‘overview’ page for the corresponding pull/merge request will generally contain some kind of ‘Merge’ button which, if you click it, will perform the merge for you.</p>
<p>Some people delete branches once they’re merged in order to keep the branch list clean. This is perfectly acceptable and generally quite safe. However, if you find yourself deleting branches a lot, you may want to consider instead thinking up a better branch naming convention that makes your branch list easier to navigate.</p>
</section>
<section id="resolving-merge-conflicts">
<h2>Resolving merge conflicts<a class="headerlink" href="#resolving-merge-conflicts" title="Link to this heading">#</a></h2>
<p>Sometimes when performing a merge you will run into a so-called <em>merge conflict</em>. A merge conflict happens when two different branches try to modify overlapping bits of the same code, and Git can’t work out how to resolve it. This most commonly happens on collaborative projects where multiple developers are working on the same codebase, but it is also possible when working on one’s own project.</p>
<p>You will see that a merge conflict has occurred when Git spits out an error message that looks something like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>merge<span class="w"> </span>feature
<span class="go">Auto-merging main.py</span>
<span class="go">CONFLICT (content): Merge conflict in main.py</span>
<span class="go">Automatic merge failed; fix conflicts and then commit the result.</span>
</pre></div>
</div>
<p>If you were to open main.py in a text editor, you’d see something like this:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_merge_conflict.png"><img alt="../../_images/git_merge_conflict.png" src="../../_images/git_merge_conflict.png" style="width: 700px;" /></a>
</figure>
<p><br />
Note how Git has inserted various lines with symbols like ‘&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;’ and ‘=========’. These demarcate parts of the code where conflicts have occurred that need to be resolved manually.</p>
<p>It is possible to deal with these merge conflicts directly in the text file. However, it is much easier to work instead with the Git GUI in (e.g. PyCharm). We can do this by heading to our Git GUI pain and clicking the text marked ‘Resolve’ next to ‘Merge Conflicts’.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pycharm_merge_commit_resolve.png"><img alt="../../_images/pycharm_merge_commit_resolve.png" src="../../_images/pycharm_merge_commit_resolve.png" style="width: 340px;" /></a>
</figure>
<p><br />
This opens a pane listing all the files with merge conflicts.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pycharm_merge_conflicts_pane.png"><img alt="../../_images/pycharm_merge_conflicts_pane.png" src="../../_images/pycharm_merge_conflicts_pane.png" style="width: 700px;" /></a>
</figure>
<p><br />
We select the file we wish to address first, and click the ‘Merge’ button. This gives us an interface like the following:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pycharm_merge_conflict_interface.png"><img alt="../../_images/pycharm_merge_conflict_interface.png" src="../../_images/pycharm_merge_conflict_interface.png" style="width: 700px;" /></a>
</figure>
<p><br />
On the left we have the diff for the main branch; on the right we have the diff for our feature branch; in the middle we are meant to construct our ‘solution’ to the merge conflict.</p>
<p>There are different ways that we can construct our solution. One of the most natural ways is as follows: start at the top of all three files, and work down gradually, looking at the changes that have been implemented in both branches. Before doing anything, look at the diff for that section on that particular branch, and try to summarize mentally what that change is doing conceptually. Then look to the other branch; has the other branch tried to edit this part of the code too? If not, you can simply accept the change on the other branch (use the ‘&gt;&gt;’ button in the PyCharm interface). If it has, again try to summarize mentally what the change is doing conceptually. Then look to the centre column, and try to write down a solution that combines both modifications. Once you are done, make sure the diffs for the corresponding code section on both sides are marked complete, either by pressing the corresponding ‘&gt;&gt;’ button (which ports the diff to the centre) or pressing the corresponding ‘X’ button (which ignores the diff).</p>
<p>Once you have resolved all the conflicts, you should see a green error message reporting that all conflicts have been resolved successfully:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pycharm_merge_conflict_resolved.png"><img alt="../../_images/pycharm_merge_conflict_resolved.png" src="../../_images/pycharm_merge_conflict_resolved.png" style="width: 340px;" /></a>
</figure>
<p><br />
You are then free to press the ‘Apply’ button, which will conclude this manual resolution process. To finalise the merge, you can then simply type the following command into the Git terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git commit</span>
</pre></div>
</div>
<p>Alternatively you can stage the relevant files via the Git GUI:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/git_gui.png"><img alt="../../_images/git_gui.png" src="../../_images/git_gui.png" style="width: 400px;" /></a>
</figure>
<p><br />
To try this merge conflict resolution yourself, you can clone the following repository: <a class="reference external" href="https://github.com/pmcharrison/Merge-conflict-demo/pull/1">https://github.com/pmcharrison/Merge-conflict-demo/pull/1</a> Once you’ve cloned the repository, you should try to merge the feature branch into the main branch, and resolve the resulting conflict.</p>
<p>Resolving merge conflicts is a bit of an art, and like all arts it takes practice. Don’t be disillusioned if you find it difficult the first few times.</p>
<p>When working on collaborative projects it is difficult to avoid merge conflicts entirely. However, there are strategies for making them as painless as possible. One important strategy is to avoid letting branches diverge for too long. Try to keep feature branches limited in scope, so that they can be merged to the main branch before they accumulate too many changes.  If you know that you are working on the same branch as someone else, make sure to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> regularly so that any changes they make are quickly integrated into your local branch. When working on a particular feature branch, if you notice that changes are accumulating meanwhile in the main branch, it’s worth regularly merging those changes in the main branch back into your feature branch. This follows a similar pattern to the merge commands described above:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout master</span>
<span class="go">git pull # this ensures you have the latest changes to master</span>
<span class="go">git checkout new-feature</span>
<span class="go">git merge master</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some software projects use ‘rebasing’ instead of merging in this context. We do not recommend that in general, because rebasing is a destructive operation that can cause difficult-to-resolve problems down the road.</p>
</div>
</section>
<section id="recap-of-concepts-we-covered">
<h2>Recap of concepts we covered<a class="headerlink" href="#recap-of-concepts-we-covered" title="Link to this heading">#</a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><p>Initialize a local repository</p></li>
<li><p>Adding files</p></li>
<li><p>Deleting files</p></li>
<li><p>Making commits</p></li>
<li><p>Creating a corresponding remote repository (on GitHub, GitLab, or similar), and linking it to the local repository</p></li>
<li><p>Ignoring files</p></li>
<li><p>Creating tags</p></li>
<li><p>Undoing uncommitted changes</p></li>
<li><p>Temporarily visiting a historic commit or tag</p></li>
<li><p>Undoing a historic commit</p></li>
<li><p>Reverting to a historic commit or tag</p></li>
<li><p>Staging commits using the PyCharm GUI</p></li>
<li><p>Creating a branch</p></li>
<li><p>Merging a branch</p></li>
<li><p>Resolving merge conflicts (see <a class="reference external" href="https://github.com/pmcharrison/Merge-conflict-demo/pull/1">https://github.com/pmcharrison/Merge-conflict-demo/pull/1</a> for an example; to get the merge conflict, you should clone it and then run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span> <span class="pre">feature</span></code>)</p></li>
</ol>
</div></blockquote>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>In particular, a recommended free alternative to PyCharm is VSCode.</p>
</aside>
</aside>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../upgrading_to_psynet_10.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Upgrading to PsyNet 10</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="essential_concepts.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Essential concepts</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Peter Harrison
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Experiment implementation workflow</a><ul>
<li><a class="reference internal" href="#deleting-files">Deleting files</a></li>
<li><a class="reference internal" href="#ignoring-files">Ignoring files</a></li>
<li><a class="reference internal" href="#tagging-commits">Tagging commits</a></li>
<li><a class="reference internal" href="#undoing-uncommitted-changes">Undoing uncommitted changes</a></li>
<li><a class="reference internal" href="#temporarily-visiting-a-historic-commit-or-tag">Temporarily visiting a historic commit or tag</a></li>
<li><a class="reference internal" href="#undoing-a-historic-commit">Undoing a historic commit</a></li>
<li><a class="reference internal" href="#reverting-to-a-historic-commit-or-tag">Reverting to a historic commit or tag</a></li>
<li><a class="reference internal" href="#undoing-commits-accidentally-committed-to-the-wrong-branch">Undoing commits accidentally committed to the wrong branch</a></li>
<li><a class="reference internal" href="#using-the-git-gui-in-your-ide">Using the Git GUI in your IDE</a></li>
<li><a class="reference internal" href="#carrying-out-experimental-work-on-a-development-branch">Carrying out experimental work on a development branch</a></li>
<li><a class="reference internal" href="#resolving-merge-conflicts">Resolving merge conflicts</a></li>
<li><a class="reference internal" href="#recap-of-concepts-we-covered">Recap of concepts we covered</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=bffcfdfb"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../../_static/js/custom.js?v=ca86d9ac"></script>
    </body>
</html>