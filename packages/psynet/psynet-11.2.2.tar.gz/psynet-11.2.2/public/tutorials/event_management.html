<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Communicating with the back-end via custom routes" href="communicating_with_backend.html" /><link rel="prev" title="Writing custom frontends" href="writing_custom_frontends.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>Event management - PsyNet 11.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=a26321a0" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">PsyNet 11.1.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">PsyNet 11.1.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/applications.html">When to use PsyNet?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/team.html">Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/command_line.html">Command line</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../learning/how_to_learn.html">How to learn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../learning/exercises/index.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Exercises</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../learning/exercises/timeline.html">Timeline exercise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning/exercises/graphics.html">Graphics exercise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning/exercises/js_synth.html">JSSynth exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../learning/tracks/index.html">Tracks</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Tracks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../learning/tracks/music_perception.html">Music perception track</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dependencies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dependencies/dallinger.html">Dallinger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies/docker.html">Docker</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">INSTALLATION</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../installation/index.html">Installation overview</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Installation overview</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../installation/virtualenv_installation/index.html">Installing PsyNet via virtualenv</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Installing PsyNet via virtualenv</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/virtualenv_installation/linux.html">Installing PsyNet via virtualenv (Linux)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/virtualenv_installation/macos.html">Installing PsyNet via virtualenv (macOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/virtualenv_installation/windows.html">Installing PsyNet via virtualenv (Windows)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../installation/docker_installation/index.html">Installing PsyNet via Docker</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Installing PsyNet via Docker</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/docker_installation/unix_installation.html">Installing PsyNet via Docker (macOS/Linux)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/docker_installation/windows_installation.html">Installing PsyNet via Docker (Windows)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EXPERIMENT DEVELOPMENT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/experiment_directory.html">Experiment directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/development_workflow.html">Development workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/dependencies.html">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../demos/index.html">Demos</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Demos</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../demos/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/hello_world.html">Hello world</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/timeline.html">Timeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/survey_js.html">SurveyJS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/trial.html">Trials (1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/trial_2.html">Trials (2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/trial_3.html">Trials (3)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/audio.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/static_audio.html">Audio trial maker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/gibbs.html">Gibbs Sampling with People</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/audio_gibbs.html">Audio Gibbs Sampling with People</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/imitation_chains.html">Imitation chains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/tapping_imitation_chain.html">Tapping imitation chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/mcmcp.html">Markov Chain Monte Carlo with People (MCMCP)</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../example_experiments/index.html">Example experiments</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Example experiments</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../example_experiments/carillon.html">Consonance and the carillon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example_experiments/emotions-scales.html">Emotions of musical scales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example_experiments/pitch-matching.html">Pitch-matching test</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="creating_a_new_experiment.html">Creating a new experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="classes.html">Classes in PsyNet</a></li>
<li class="toctree-l2"><a class="reference internal" href="timeline.html">Timeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="assets.html">Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="specifying_dependencies.html">Specifying dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="tests.html">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="internationalization.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="synchronization.html">Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad_page.html">The Ad Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="modular_page.html">Modular Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="graphics.html">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="demography.html">Demography</a></li>
<li class="toctree-l2"><a class="reference internal" href="prescreening_tasks.html">Pre-screening tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_and_rate.html">Create and Rate</a></li>
<li class="toctree-l2"><a class="reference internal" href="pre_deploy_routines.html">Pre-deploy routines</a></li>
<li class="toctree-l2"><a class="reference internal" href="experiment_variables.html">Experiment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="unity_integration.html">Unity integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_custom_frontends.html">Writing custom frontends</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Event management</a></li>
<li class="toctree-l2"><a class="reference internal" href="communicating_with_backend.html">Communicating with the back-end via custom routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="payment_limits.html">Payment limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploy_tokens.html">Deploy tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction_to_sql_alchemy.html">Introduction to SQLAlchemy</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="version_control_with_git.html">Version control with Git</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Version control with Git</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="version_control_with_git/essential_concepts.html">Essential concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="version_control_with_git/experiment_implementation_workflow.html">Experiment implementation workflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="upgrading_to_psynet_10.html">Upgrading to PsyNet 10</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">API Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of API Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/asset.html">Asset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/audio_mixer.html">AudioMixer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/bot.html">Bot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/command_line.html">Command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/consents.html">Consents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/data.html">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/demography.html">Demography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/error.html">Error</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/experiment.html">Experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/field.html">Field</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/graphics.html">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/js_synth.html">JSSynth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/media.html">Media</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/modular_page.html">ModularPage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/page.html">Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/participant.html">Participant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/prescreen.html">Prescreen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/process.html">Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/recruiters.html">Recruiters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/redis.html">Redis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/serialize.html">Serialize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/sync.html">Sync</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/timeline.html">Timeline</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/trial/index.html">Trial</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Trial</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/audio.html">Audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/audio_gibbs.html">AudioGibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/chain.html">Chain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/dense.html">Dense</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/gibbs.html">Gibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/graph.html">Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/imitation_chain.html">ImitationChain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/main.html">Main</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/media_gibbs.html">MediaGibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/mcmcp.html">MCMCP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/record.html">Record</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/static.html">Static</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/video.html">Video</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/utils.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/version.html">Version</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DEPLOYING</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deploy/web_servers.html">Web servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/aws_server_setup.html">Setting up an experiment server with AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/ssh_server.html">SSH servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/heroku_server.html">Heroku deployments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/prolific.html">Deploying an experiment to Prolific</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/deploy_from_archive.html">Deploying from archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/export.html">Exporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to PsyNet</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer/workflow.html">Developer workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/contributing_a_feature_or_bugfix.html">Contributing a feature/bugfix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/prescreening_tasks.html">Creating pre-screening tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/updating_documentation.html">Updating documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/internationalization.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/running_tests.html">Running tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/making_a_release.html">Making a release</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dashboards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dashboards/translation.html">Translation dashboard</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://gitlab.com/PsyNetDev/PsyNet/-/edit/master/docs/tutorials/event_management.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="event-management">
<h1>Event management<a class="headerlink" href="#event-management" title="Link to this heading">#</a></h1>
<p>PsyNet provides a sophisticated event management system for scheduling events within a given page. This system is rather complex to understand in its entirety, but a little understanding is very useful for customizing one’s experiments.</p>
<p>The event management system is modeled on the idea that a given page will present a <em>trial</em> to the participant, where a trial comprises a sequence of events in some kind of temporal order. Importantly, the precise timing of these events may depend on certain unpredictable variables, for example the time it takes for the participant to give a response, or the time it takes to download a certain media file, etcetera.</p>
<p>The event management system predefines a certain number of events, listed in the table below:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Event name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">trialConstruct</span></code></p></td>
<td><p>Initiates first-time setup for the page (e.g., downloading media assets).</p>
<p>This only happens once on a given page, even if the trial is restarted.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">trialPrepare</span></code></p></td>
<td><p>Initiates preparation of the trial. This will be rerun each time the trial is restarted.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">trialStart</span></code></p></td>
<td><p>Initiates the trial itself.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">responseEnable</span></code></p></td>
<td><p>Allows the user to start entering their response.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">submitEnable</span></code></p></td>
<td><p>Allows the user to submit their response, e.g. by clicking ‘Next’.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">trialFinish</span></code></p></td>
<td><p>Signals the natural end of a trial, and cues clean-up routines.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">trialFinished</span></code></p></td>
<td><p>Signals the completion of clean-up routines after the natural end of a trial.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">trialStop</span></code></p></td>
<td><p>Signals an early stopping of the trial, and cues clean-up routines.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">trialStopped</span></code></p></td>
<td><p>Signals the completion of clean-up routines after the early stopping of a trial.</p></td>
</tr>
</tbody>
</table>
</div>
<p>The final four events (<code class="docutils literal notranslate"><span class="pre">trialFinish</span></code>, <code class="docutils literal notranslate"><span class="pre">trialFinished</span></code>, <code class="docutils literal notranslate"><span class="pre">trialStop</span></code>, and <code class="docutils literal notranslate"><span class="pre">trialStopped</span></code>) only apply to trials with a finite length, which by default currently only applies for trials with audio or video recording.</p>
<p>Particular modular page components then may define additional events. For example:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Event named</p></th>
<th class="head"><p>Defined in</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">promptStart</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AudioPrompt</span></code>,</p>
<p><code class="docutils literal notranslate"><span class="pre">ImagePrompt</span></code>,</p>
<p><code class="docutils literal notranslate"><span class="pre">VideoPrompt</span></code></p>
</td>
<td><p>Initiates the display/playback</p>
<p>of the prompt</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">promptEnd</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AudioPrompt</span></code>,</p>
<p><code class="docutils literal notranslate"><span class="pre">ImagePrompt</span></code>,</p>
<p><code class="docutils literal notranslate"><span class="pre">VideoPrompt</span></code></p>
</td>
<td><p>Ends the display/playback</p>
<p>of the prompt</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pushButtonClicked</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PushButtonControl</span></code>,</p>
<p><code class="docutils literal notranslate"><span class="pre">TimedPushButtonControl</span></code></p>
</td>
<td><p>Triggered when a button is clicked</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">uploadStart</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AudioRecordControl</span></code>,</p>
<p><code class="docutils literal notranslate"><span class="pre">VideoRecordControl</span></code></p>
</td>
<td><p>Initiates the upload of the recording</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">uploadEnd</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AudioRecordControl</span></code>,</p>
<p><code class="docutils literal notranslate"><span class="pre">VideoRecordControl</span></code></p>
</td>
<td><p>Triggered when the upload completes</p>
<p>successfully</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">uploadFail</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AudioRecordControl</span></code>,</p>
<p><code class="docutils literal notranslate"><span class="pre">VideoRecordControl</span></code></p>
</td>
<td><p>Triggered when the upload fails</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sliderChange</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SliderControl</span></code>,</p>
<p><code class="docutils literal notranslate"><span class="pre">AudioSliderControl</span></code></p>
</td>
<td><p>Triggered when the slider moves</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sliderMinimalInteractions</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SliderControl</span></code>,</p>
<p><code class="docutils literal notranslate"><span class="pre">AudioSliderControl</span></code></p>
</td>
<td><p>Triggered once the participant has</p>
<p>surpassed the minimal interactions</p>
<p>threshold for the slider</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>On a given PsyNet page, you can see the events listed in the console log as and when they are generated:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/console_log.png"><img alt="../_images/console_log.png" src="../_images/console_log.png" style="width: 600px;" /></a>
</figure>
<p>There are two main ways in which a PsyNet user might manipulate this event management system: (a) defining new event listeners for a given event; (b) changing the triggers for a pre-existing event; (c) defining a completely new event.</p>
<section id="defining-a-new-event">
<h2>Defining a new event<a class="headerlink" href="#defining-a-new-event" title="Link to this heading">#</a></h2>
<p>New events are defined by use of the page’s <code class="docutils literal notranslate"><span class="pre">events</span></code> argument. Take the following example from the audio demo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.modular_page</span> <span class="kn">import</span> <span class="n">VideoPrompt</span>
<span class="kn">from</span> <span class="nn">psynet.timeline</span> <span class="kn">import</span> <span class="n">Event</span><span class="p">,</span> <span class="n">MediaSpec</span>

<span class="n">ModularPage</span><span class="p">(</span>
    <span class="s2">&quot;video_plus_audio&quot;</span><span class="p">,</span>
    <span class="n">VideoPrompt</span><span class="p">(</span>
        <span class="s2">&quot;/static/birds.mp4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Here we play a video, muted, alongside an audio file.&quot;</span><span class="p">,</span>
        <span class="n">mirrored</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">muted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">time_estimate</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">media</span><span class="o">=</span><span class="n">MediaSpec</span><span class="p">(</span><span class="n">audio</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;soundtrack&quot;</span><span class="p">:</span> <span class="s2">&quot;/static/funk-game-loop.mp3&quot;</span>
    <span class="p">}),</span>
    <span class="n">events</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;playSoundtrack&quot;</span><span class="p">:</span> <span class="n">Event</span><span class="p">(</span>
            <span class="n">is_triggered_by</span><span class="o">=</span><span class="s2">&quot;promptStart&quot;</span><span class="p">,</span>
            <span class="n">delay</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Playing audio now&quot;</span><span class="p">,</span>
            <span class="n">message_color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
            <span class="n">js</span><span class="o">=</span><span class="s2">&quot;psynet.audio.soundtrack.play()&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The events argument should be a dictionary, where the keys correspond to event names, and the values correspond to <code class="docutils literal notranslate"><span class="pre">Event</span></code> objects (where the <code class="docutils literal notranslate"><span class="pre">Event</span></code> class is imported from <code class="docutils literal notranslate"><span class="pre">psynet.timeline</span></code>). When defining a new event, we are free to make up our own name; here we chose <code class="docutils literal notranslate"><span class="pre">playSoundtrack</span></code>.</p>
<p>The first argument of the <code class="docutils literal notranslate"><span class="pre">Event</span></code> constructor is <code class="docutils literal notranslate"><span class="pre">is_triggered_by</span></code>. This determines when the event is triggered. The simplest way of using this argument is to provide the name of another event; in that case, the event will be triggered directly by the occurrence of the named event.</p>
<p>It is also possible to define multiple triggers by providing a list of such events. The resolution of multiple event triggers is determined by a further argument called <code class="docutils literal notranslate"><span class="pre">trigger_condition</span></code>. If <code class="docutils literal notranslate"><span class="pre">trigger_condition=&quot;all&quot;</span></code> (default), then the new event will only be triggered once all its trigger events have occurred. If <code class="docutils literal notranslate"><span class="pre">trigger_condition=&quot;any&quot;</span></code>, then the new event will be triggered when <em>any</em> of its trigger events occur.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">once</span></code> argument (defaulting to <code class="docutils literal notranslate"><span class="pre">True</span></code>) determines how many times the event may be triggered. If <code class="docutils literal notranslate"><span class="pre">once=True</span></code>, then the event will only be triggered once, even if its triggers occur multiple times. If <code class="docutils literal notranslate"><span class="pre">once=False</span></code>, then the event will be triggered again each time one of its triggers occurs (assuming all required trigger events have occurred in the case of <code class="docutils literal notranslate"><span class="pre">trigger_condition=&quot;any&quot;</span></code>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">message</span></code> argument determines an optional on-screen message to present when the event occurs. This message is presented in the same space as progress bar messages (see the <code class="docutils literal notranslate"><span class="pre">progress_display</span></code> argument of <code class="docutils literal notranslate"><span class="pre">Page</span></code>). The color of this message can be customized with the <code class="docutils literal notranslate"><span class="pre">message_color</span></code> argument, which takes arbitrary HTML color specifications, defaulting to “<code class="docutils literal notranslate"><span class="pre">black</span></code>”.</p>
<p>Lastly, the <code class="docutils literal notranslate"><span class="pre">js</span></code> argument defines an optional Javascript expression to execute when the event occurs. This can be a quick way to inject Javascript code into the page without having to customize any HTML templates.</p>
<p>So far we assumed that we want our event to be triggered by other PsyNet events. What if we want it to be triggered directly in Javascript? We can achieve this by using the <code class="docutils literal notranslate"><span class="pre">psynet.trial.registerEvent</span></code> function in Javascript. For example, the following JavasScript code registers a <code class="docutils literal notranslate"><span class="pre">pushButtonClicked</span></code> event each time one of three buttons is pressed:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;btn-1&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">btnClick</span><span class="p">&gt;</span>Button 1<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;btn-2&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">btnClick</span><span class="p">&gt;</span>Button 2<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;btn-3&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">btnClick</span><span class="p">&gt;</span>Button 3<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">btnClick</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
<span class="w">        </span><span class="nx">psynet</span><span class="p">.</span><span class="nx">trial</span><span class="p">.</span><span class="nx">registerEvent</span><span class="p">(</span>
<span class="w">            </span><span class="s2">&quot;pushButtonClicked&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="p">{</span><span class="nx">info</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">buttonId</span><span class="o">:</span><span class="w"> </span><span class="nx">id</span><span class="p">}}</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>This registers an event called “<code class="docutils literal notranslate"><span class="pre">pushButtonClicked</span></code>”. When we register an event, we can provide an optional <code class="docutils literal notranslate"><span class="pre">info</span></code> dictionary (or in Javascript terms, an Object) of additional information. Here our dictionary has one piece of information: the <code class="docutils literal notranslate"><span class="pre">buttonId</span></code>. This information is saved in the metadata of the response to PsyNet pages, which can be accessed in the page’s <code class="docutils literal notranslate"><span class="pre">format_answer</span></code> method, or in the <code class="docutils literal notranslate"><span class="pre">Response</span></code> table, or in <code class="docutils literal notranslate"><span class="pre">response.csv</span></code> as exported by PsyNet. It can also be accessed within the Javascript code defined in the event’s <code class="docutils literal notranslate"><span class="pre">js</span></code> argument as an object called <code class="docutils literal notranslate"><span class="pre">info</span></code>. I could use this fact to write a “<code class="docutils literal notranslate"><span class="pre">pushButtonClicked</span></code>” handler that displays an alert on the screen every time I press a button:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ModularPage</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;demo&quot;</span><span class="p">,</span>
    <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;Click a button.&quot;</span><span class="p">,</span>
    <span class="n">control</span><span class="o">=</span><span class="n">TimedPushButtonControl</span><span class="p">(</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">],</span>
    <span class="p">),</span>
    <span class="n">time_estimate</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">events</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;pushButtonClicked&quot;</span><span class="p">:</span> <span class="n">Event</span><span class="p">(</span>
            <span class="n">is_triggered_by</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">js</span><span class="o">=</span><span class="s2">&quot;alert(&#39;You pressed button &#39; + info.buttonId + &#39;.&#39;);&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="updating-pre-defined-events">
<h2>Updating pre-defined events<a class="headerlink" href="#updating-pre-defined-events" title="Link to this heading">#</a></h2>
<p>Sometimes we want to update pre-defined events in a PsyNet page. For example, the standard PsyNet page defines the <code class="docutils literal notranslate"><span class="pre">responseEnable</span></code> event as follows (see <code class="docutils literal notranslate"><span class="pre">timeline.py</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;responseEnable&quot;</span><span class="p">:</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">is_triggered_by</span><span class="o">=</span><span class="s2">&quot;trialStart&quot;</span><span class="p">,</span>
    <span class="n">delay</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="n">once</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
<p>However, we might want to customize this, for example only allowing the participant to start responding after three seconds. We would achieve this by customizing the <code class="docutils literal notranslate"><span class="pre">events</span></code> argument as before, but this time providing a revised definition of the <code class="docutils literal notranslate"><span class="pre">responseEnable</span></code> event.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">events</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;responseEnable&quot;</span><span class="p">:</span> <span class="n">Event</span><span class="p">(</span>
        <span class="n">is_triggered_by</span><span class="o">=</span><span class="s2">&quot;trialStart&quot;</span><span class="p">,</span>
        <span class="n">delay</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span>
        <span class="n">once</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="custom-prompts-controls-and-event-management">
<h2>Custom prompts/controls and event management<a class="headerlink" href="#custom-prompts-controls-and-event-management" title="Link to this heading">#</a></h2>
<p>When implementing a custom prompt or control, the preferred way to customize event management is by overriding the <code class="docutils literal notranslate"><span class="pre">update_events</span></code> method. This event takes the default <code class="docutils literal notranslate"><span class="pre">events</span></code> dictionary from the superclass and updates it as required. For example, here is the <code class="docutils literal notranslate"><span class="pre">update_events</span></code> method from PsyNet’s <code class="docutils literal notranslate"><span class="pre">AudioPrompt</span></code> class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">update_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">events</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">update_events</span><span class="p">(</span><span class="n">events</span><span class="p">)</span>

    <span class="n">events</span><span class="p">[</span><span class="s2">&quot;promptStart&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
        <span class="n">is_triggered_by</span><span class="o">=</span><span class="p">[</span>
            <span class="n">Trigger</span><span class="p">(</span>
                <span class="n">triggering_event</span><span class="o">=</span><span class="s2">&quot;trialStart&quot;</span><span class="p">,</span>
                <span class="n">delay</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">events</span><span class="p">[</span><span class="s2">&quot;promptEnd&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="n">is_triggered_by</span><span class="o">=</span><span class="p">[],</span> <span class="n">once</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">events</span><span class="p">[</span><span class="s2">&quot;trialFinish&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">add_trigger</span><span class="p">(</span><span class="s2">&quot;promptEnd&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Updating <code class="docutils literal notranslate"><span class="pre">events</span></code> in this way allows one to take advantage of the <code class="docutils literal notranslate"><span class="pre">Event.add_trigger</span></code> method. This allows you to add a trigger to a pre-existing <code class="docutils literal notranslate"><span class="pre">Event</span></code> without losing the pre-existing triggers. This approach is useful because it allows a given <code class="docutils literal notranslate"><span class="pre">Event</span></code> to compile triggers from multiple locations: in this case, for example, it lets the <code class="docutils literal notranslate"><span class="pre">trialFinish</span></code> event wait for triggers from both the <code class="docutils literal notranslate"><span class="pre">Prompt</span></code> and the <code class="docutils literal notranslate"><span class="pre">Control</span></code>.</p>
</section>
<section id="defining-new-event-listeners-for-a-given-event">
<h2>Defining new event listeners for a given event<a class="headerlink" href="#defining-new-event-listeners-for-a-given-event" title="Link to this heading">#</a></h2>
<p>The previous section showed us one way to execute custom Javascript after a given event occurs: create a new event that is triggered by that event, and include a <code class="docutils literal notranslate"><span class="pre">js</span></code> argument with some custom Javascript to execute.</p>
<p>Such event handlers can also be defined within the prompt or control template, using the function <code class="docutils literal notranslate"><span class="pre">psynet.trial.onEvent</span></code>. For example, the <code class="docutils literal notranslate"><span class="pre">image</span></code> prompt macro contains the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">psynet</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">onEvent</span><span class="p">(</span>
    <span class="s2">&quot;promptStart&quot;</span><span class="p">,</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="n">promptImage</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mi">1</span>
<span class="p">);</span>


<span class="n">psynet</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">onEvent</span><span class="p">(</span>
    <span class="s2">&quot;promptEnd&quot;</span><span class="p">,</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="n">promptImage</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This code is responsible for timing the presentation of an image. When the <code class="docutils literal notranslate"><span class="pre">promptStart</span></code> event occurs, the image is made opaque; when the <code class="docutils literal notranslate"><span class="pre">promptEnd</span></code> event occurs, the image is made transparent. In case you’re unfamiliar with the notation, () =&gt; … is simply Javascript shorthand for an anonymous function (i.e., a function that is defined without a name).</p>
</section>
<section id="advanced-event-management">
<h2>Advanced event management<a class="headerlink" href="#advanced-event-management" title="Link to this heading">#</a></h2>
<p>Sometimes you want to ensure that event handlers are triggered in a specific order. By default, they will simply occur in the order that they are registered. This can be overridden by providing an optional <code class="docutils literal notranslate"><span class="pre">priority</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">onEvent</span></code> call. Higher priority numbers are executed first. For example, the following code would display a ‘Recording ended!’ message as soon as the <code class="docutils literal notranslate"><span class="pre">recordEnd</span></code> event was triggered, and this message would come before any of the other event handlers were triggered.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">psynet</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">onEvent</span><span class="p">(</span>
    <span class="s2">&quot;recordEnd&quot;</span><span class="p">,</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="n">alert</span><span class="p">(</span><span class="s2">&quot;Recording ended!&quot;</span><span class="p">),</span>
    <span class="p">{</span><span class="n">priority</span><span class="p">:</span> <span class="mi">1000</span><span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Sometimes you want to ensure that the event handler finishes before moving onto the next handler, or indeed before triggering the next event in the series. This is achieved by defining the event handler as an <em>async function</em>. An async function is a relatively recent Javascript construct that corresponds to a time-consuming process that one might want to wait for. The details of async functions are outside the scope of this tutorial, but we will give an example of an event handler that uses async functions, drawn from the video recorder macro (and slightly paraphrased):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">psynet</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">onEvent</span><span class="p">(</span><span class="s2">&quot;recordEnd&quot;</span><span class="p">,</span> <span class="k">async</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">await</span> <span class="n">videoRecorder</span><span class="o">.</span><span class="n">stopRecording</span><span class="p">();</span>
    <span class="n">psynet</span><span class="o">.</span><span class="n">media</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;videoBlob&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="n">videoRecorder</span><span class="o">.</span><span class="n">getBlob</span><span class="p">();</span>
    <span class="k">await</span> <span class="n">videoRecorder</span><span class="o">.</span><span class="n">reset</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Async functions include the special keyword <code class="docutils literal notranslate"><span class="pre">await</span></code>. This keyword tells Javascript to wait until the statement has finished executing. Most programming languages (e.g., Python) wait by default, but Javascript doesn’t normally wait, because it wants to keep the user experience snappy. This can cause problems when we have subsequent lines of code that depend on the outcome of previous lines. In the example above, it takes a little time for the <code class="docutils literal notranslate"><span class="pre">videoRecorder</span></code> to stop and for us to collect the data from it. Only then do we want to proceed with the next events, which will be responsible for uploading the video. We therefore implement our event handler as an async function, so that Javascript will wait for the function to be complete before moving onto the next event.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="communicating_with_backend.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Communicating with the back-end via custom routes</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="writing_custom_frontends.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Writing custom frontends</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Peter Harrison
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Event management</a><ul>
<li><a class="reference internal" href="#defining-a-new-event">Defining a new event</a></li>
<li><a class="reference internal" href="#updating-pre-defined-events">Updating pre-defined events</a></li>
<li><a class="reference internal" href="#custom-prompts-controls-and-event-management">Custom prompts/controls and event management</a></li>
<li><a class="reference internal" href="#defining-new-event-listeners-for-a-given-event">Defining new event listeners for a given event</a></li>
<li><a class="reference internal" href="#advanced-event-management">Advanced event management</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=bffcfdfb"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../_static/js/custom.js?v=ca86d9ac"></script>
    </body>
</html>