<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Timeline" href="timeline.html" /><link rel="prev" title="Creating a new experiment" href="creating_a_new_experiment.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>Classes in PsyNet - PsyNet 11.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=a26321a0" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">PsyNet 11.1.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">PsyNet 11.1.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/applications.html">When to use PsyNet?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/team.html">Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/command_line.html">Command line</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../learning/how_to_learn.html">How to learn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../learning/exercises/index.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Exercises</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../learning/exercises/timeline.html">Timeline exercise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning/exercises/graphics.html">Graphics exercise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning/exercises/js_synth.html">JSSynth exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../learning/tracks/index.html">Tracks</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Tracks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../learning/tracks/music_perception.html">Music perception track</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dependencies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dependencies/dallinger.html">Dallinger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies/docker.html">Docker</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">INSTALLATION</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../installation/index.html">Installation overview</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Installation overview</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../installation/virtualenv_installation/index.html">Installing PsyNet via virtualenv</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Installing PsyNet via virtualenv</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/virtualenv_installation/linux.html">Installing PsyNet via virtualenv (Linux)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/virtualenv_installation/macos.html">Installing PsyNet via virtualenv (macOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/virtualenv_installation/windows.html">Installing PsyNet via virtualenv (Windows)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../installation/docker_installation/index.html">Installing PsyNet via Docker</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Installing PsyNet via Docker</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/docker_installation/unix_installation.html">Installing PsyNet via Docker (macOS/Linux)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/docker_installation/windows_installation.html">Installing PsyNet via Docker (Windows)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EXPERIMENT DEVELOPMENT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/experiment_directory.html">Experiment directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/development_workflow.html">Development workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/dependencies.html">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_development/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../demos/index.html">Demos</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Demos</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../demos/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/hello_world.html">Hello world</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/timeline.html">Timeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/survey_js.html">SurveyJS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/trial.html">Trials (1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/trial_2.html">Trials (2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/trial_3.html">Trials (3)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/audio.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/static_audio.html">Audio trial maker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/gibbs.html">Gibbs Sampling with People</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/audio_gibbs.html">Audio Gibbs Sampling with People</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/imitation_chains.html">Imitation chains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/tapping_imitation_chain.html">Tapping imitation chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/mcmcp.html">Markov Chain Monte Carlo with People (MCMCP)</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../example_experiments/index.html">Example experiments</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Example experiments</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../example_experiments/carillon.html">Consonance and the carillon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example_experiments/emotions-scales.html">Emotions of musical scales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example_experiments/pitch-matching.html">Pitch-matching test</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="creating_a_new_experiment.html">Creating a new experiment</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Classes in PsyNet</a></li>
<li class="toctree-l2"><a class="reference internal" href="timeline.html">Timeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="assets.html">Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="specifying_dependencies.html">Specifying dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="tests.html">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="internationalization.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="synchronization.html">Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad_page.html">The Ad Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="modular_page.html">Modular Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="graphics.html">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="demography.html">Demography</a></li>
<li class="toctree-l2"><a class="reference internal" href="prescreening_tasks.html">Pre-screening tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_and_rate.html">Create and Rate</a></li>
<li class="toctree-l2"><a class="reference internal" href="pre_deploy_routines.html">Pre-deploy routines</a></li>
<li class="toctree-l2"><a class="reference internal" href="experiment_variables.html">Experiment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="unity_integration.html">Unity integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_custom_frontends.html">Writing custom frontends</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_management.html">Event management</a></li>
<li class="toctree-l2"><a class="reference internal" href="communicating_with_backend.html">Communicating with the back-end via custom routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="payment_limits.html">Payment limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploy_tokens.html">Deploy tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction_to_sql_alchemy.html">Introduction to SQLAlchemy</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="version_control_with_git.html">Version control with Git</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Version control with Git</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="version_control_with_git/essential_concepts.html">Essential concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="version_control_with_git/experiment_implementation_workflow.html">Experiment implementation workflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="upgrading_to_psynet_10.html">Upgrading to PsyNet 10</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">API Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of API Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/asset.html">Asset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/audio_mixer.html">AudioMixer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/bot.html">Bot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/command_line.html">Command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/consents.html">Consents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/data.html">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/demography.html">Demography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/error.html">Error</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/experiment.html">Experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/field.html">Field</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/graphics.html">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/js_synth.html">JSSynth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/media.html">Media</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/modular_page.html">ModularPage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/page.html">Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/participant.html">Participant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/prescreen.html">Prescreen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/process.html">Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/recruiters.html">Recruiters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/redis.html">Redis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/serialize.html">Serialize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/sync.html">Sync</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/timeline.html">Timeline</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/trial/index.html">Trial</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Trial</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/audio.html">Audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/audio_gibbs.html">AudioGibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/chain.html">Chain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/dense.html">Dense</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/gibbs.html">Gibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/graph.html">Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/imitation_chain.html">ImitationChain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/main.html">Main</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/media_gibbs.html">MediaGibbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/mcmcp.html">MCMCP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/record.html">Record</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/static.html">Static</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/trial/video.html">Video</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/utils.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/version.html">Version</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DEPLOYING</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deploy/web_servers.html">Web servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/aws_server_setup.html">Setting up an experiment server with AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/ssh_server.html">SSH servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/heroku_server.html">Heroku deployments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/prolific.html">Deploying an experiment to Prolific</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/deploy_from_archive.html">Deploying from archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/export.html">Exporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to PsyNet</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer/workflow.html">Developer workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/contributing_a_feature_or_bugfix.html">Contributing a feature/bugfix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/prescreening_tasks.html">Creating pre-screening tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/updating_documentation.html">Updating documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/internationalization.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/running_tests.html">Running tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/making_a_release.html">Making a release</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dashboards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dashboards/translation.html">Translation dashboard</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://gitlab.com/PsyNetDev/PsyNet/-/edit/master/docs/tutorials/classes.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="classes-in-psynet">
<h1>Classes in PsyNet<a class="headerlink" href="#classes-in-psynet" title="Link to this heading">#</a></h1>
<section id="introduction-to-object-orientation">
<h2>Introduction to object-orientation<a class="headerlink" href="#introduction-to-object-orientation" title="Link to this heading">#</a></h2>
<p>PsyNet is an <em>object-oriented</em> framework. Object-oriented programming is a popular pattern in Python and many other
programming languages. In object-oriented programming, one defines a collection of <em>classes</em>, where a class defines
an abstract category of objects, for example ‘users’, ‘transactions’, or ‘events’. The programmer then creates and
manipulates instances of these classes, called <em>objects</em>. In Python, one can create classes as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">forename</span><span class="p">,</span> <span class="n">surname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forename</span> <span class="o">=</span> <span class="n">forename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">surname</span> <span class="o">=</span> <span class="n">surname</span>

    <span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>


<span class="k">class</span> <span class="nc">EnglishPerson</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hi!&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">FrenchPerson</span><span class="p">(</span><span class="n">Person</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Salut!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we created a base class called <code class="docutils literal notranslate"><span class="pre">Person</span></code>, and two subclasses called <code class="docutils literal notranslate"><span class="pre">EnglishPerson</span></code> and <code class="docutils literal notranslate"><span class="pre">FrenchPerson</span></code>.
Subclasses inherit the structure of their parent class, but also can have additional custom logic.
Here the <code class="docutils literal notranslate"><span class="pre">EnglishPerson</span></code> and <code class="docutils literal notranslate"><span class="pre">FrenchPerson</span></code> subclasses share the parent concept of forenames and surnames,
but they have customized greeting methods corresponding to their respective languages.</p>
<p>We can then create instances of these classes as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">jeff</span> <span class="o">=</span> <span class="n">EnglishPerson</span><span class="p">(</span><span class="n">forename</span><span class="o">=</span><span class="s2">&quot;Jeff&quot;</span><span class="p">,</span> <span class="n">surname</span><span class="o">=</span><span class="s2">&quot;Stevens&quot;</span><span class="p">)</span>
<span class="n">madeleine</span> <span class="o">=</span> <span class="n">FrenchPerson</span><span class="p">(</span><span class="n">forename</span><span class="o">=</span><span class="s2">&quot;Madeleine&quot;</span><span class="p">,</span> <span class="n">surname</span><span class="o">=</span><span class="s2">&quot;de la Coeur&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">jeff</span><span class="o">.</span><span class="n">surname</span><span class="p">)</span>  <span class="c1"># yields &quot;Stevens&quot;</span>

<span class="n">jeff</span><span class="o">.</span><span class="n">greet</span><span class="p">()</span>  <span class="c1"># yields &quot;Hi!&quot;</span>
<span class="n">madeleine</span><span class="o">.</span><span class="n">greet</span><span class="p">()</span>  <span class="c1"># yields &quot;Salut!&quot;</span>
</pre></div>
</div>
<p>Working with PsyNet requires fluency in object-oriented programming in Python.
You should aim to be familiar with the following concepts:</p>
<ul class="simple">
<li><p>Defining classes</p></li>
<li><p>Defining subclasses</p></li>
<li><p>Defining methods</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code> decorator</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">super()</span></code></p></li>
<li><p>Creating instances</p></li>
<li><p>Class attributes versus instance attributes</p></li>
</ul>
<p>If some of these concepts are new to you, we recommend doing a few relevant online tutorials before proceeding.</p>
</section>
<section id="psynet-classes-in-experiment-py">
<h2>PsyNet classes in experiment.py<a class="headerlink" href="#psynet-classes-in-experiment-py" title="Link to this heading">#</a></h2>
<p>If you open a given PsyNet experiment (e.g. <code class="docutils literal notranslate"><span class="pre">demos/mcmcp/experiment.py</span></code>) you will typically see a variety of
PsyNet classes. These will be imported from particular PsyNet modules, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.page</span> <span class="kn">import</span> <span class="n">InfoPage</span>
</pre></div>
</div>
<p>Page classes like <code class="docutils literal notranslate"><span class="pre">InfoPage</span></code> are particularly important for defining the experiment’s timeline;
you’ll see logic for instructions using this class, for example.</p>
<p>Many PsyNet experiments also include some custom subclasses that inherit from particular PsyNet classes.
For example, you might see something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.trial.mcmcp</span> <span class="kn">import</span> <span class="n">MCMCPTrial</span>

<span class="k">class</span> <span class="nc">CustomTrial</span><span class="p">(</span><span class="n">MCMCPTrial</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">show_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>This allows the experimenter to define a particular kind of trial for their experiment, that inherits certain
functionality from core PsyNet (e.g. the logic of a Markov Chain Monte Carlo with People [MCMCP] experiment)
but also adds custom logic (e.g. displaying a particular kind of stimulus to the participant).</p>
<p>In the next section we’ll introduce the core PsyNet classes in proper detail so that you understand how
they all fit together and how they are used in practice.</p>
</section>
<section id="overview-of-key-psynet-classes">
<h2>Overview of key PsyNet classes<a class="headerlink" href="#overview-of-key-psynet-classes" title="Link to this heading">#</a></h2>
<section id="experiment">
<h3>Experiment<a class="headerlink" href="#experiment" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> class is the most central class in the PsyNet experiment.
It is defined in <code class="docutils literal notranslate"><span class="pre">experiment.py</span></code>, the main Python file in your experiment directory.
You define your <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> class by subclassing PsyNet’s built-in
<a class="reference internal" href="../api/experiment.html#psynet.experiment.Experiment" title="psynet.experiment.Experiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Experiment</span></code></a> class. Your custom <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> class
must include a definition of the experiment’s timeline:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psynet.experiment</span>

<span class="k">class</span> <span class="nc">Exp</span><span class="p">(</span><span class="n">psynet</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">Experiment</span><span class="p">):</span>
    <span class="n">timeline</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span>
        <span class="n">InfoPage</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="o">...</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">timeline</span></code> attribute should receive a series of <code class="docutils literal notranslate"><span class="pre">Elt</span></code> objects (see below),
with these Elts joined together using the <code class="xref py py-func docutils literal notranslate"><span class="pre">join()</span></code> function.</p>
<p>There are various other customizations that can be applied to the experiment via this experiment class,
see the <a class="reference internal" href="../api/experiment.html#psynet.experiment.Experiment" title="psynet.experiment.Experiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Experiment</span></code></a> documentation for details.</p>
</section>
<section id="participant">
<h3>Participant<a class="headerlink" href="#participant" title="Link to this heading">#</a></h3>
<p>The <a class="reference internal" href="../api/participant.html#psynet.participant.Participant" title="psynet.participant.Participant"><code class="xref py py-class docutils literal notranslate"><span class="pre">Participant</span></code></a> class is used to represent participants.
Each Participant object has various attributes that are populated during the experiment,
carrying useful information for identifying the participant and recording their experience
during the experiment. For example, <code class="docutils literal notranslate"><span class="pre">Participant.id</span></code> gives a unique integer ID for the Participant;
<code class="docutils literal notranslate"><span class="pre">Participant.creation_time</span></code> tells you when the Participant started the experiment;
<code class="docutils literal notranslate"><span class="pre">Participant.failed</span></code> tells you if the Participant has been failed, and so on.
For a full list of attributes see the <a class="reference internal" href="../api/participant.html#psynet.participant.Participant" title="psynet.participant.Participant"><code class="xref py py-class docutils literal notranslate"><span class="pre">Participant</span></code></a> class documentation.</p>
<p>Most PsyNet experimenters do not interact much with built-in Participant attributes.
Instead, they define custom Participant variables which are used to track state during the experiment.
Participant variables are defined via <code class="docutils literal notranslate"><span class="pre">Participant.var</span></code>, and can take any name, for example
<code class="docutils literal notranslate"><span class="pre">Participant.var.custom_variable</span></code>. For example, one might write
<code class="docutils literal notranslate"><span class="pre">print(participant.var.custom_variable)</span></code> to print the current value of <code class="docutils literal notranslate"><span class="pre">custom_variable</span></code>,
or write <code class="docutils literal notranslate"><span class="pre">participant.var.custom_variable</span> <span class="pre">=</span> <span class="pre">3</span></code> to set <code class="docutils literal notranslate"><span class="pre">custom_variable</span></code> to 3.
For setting Participant variables in lambda functions (see below),
Python syntax doesn’t allow you to write expressions like <code class="docutils literal notranslate"><span class="pre">participant.var.custom_variable</span> <span class="pre">=</span> <span class="pre">3</span></code> directly;
instead we write <code class="docutils literal notranslate"><span class="pre">participant.var.set(&quot;custom_variable&quot;,</span> <span class="pre">3)</span></code>.</p>
</section>
<section id="elt">
<h3>Elt<a class="headerlink" href="#elt" title="Link to this heading">#</a></h3>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Elt</span></code> objects define the logic of the experiment.
They determine what materials are shown to the participant, how the participant responds to
those materials, how the server processes those responses, and so on.</p>
<p>There are several main types of <code class="xref py py-class docutils literal notranslate"><span class="pre">Elt</span></code> objects:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api/timeline.html#psynet.timeline.Page" title="psynet.timeline.Page"><code class="xref py py-class docutils literal notranslate"><span class="pre">psynet.timeline.Page</span></code></a> objects determine the web pages that are presented to the participant;</p></li>
<li><p><a class="reference internal" href="../api/timeline.html#psynet.timeline.PageMaker" title="psynet.timeline.PageMaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">psynet.timeline.PageMaker</span></code></a> objects generate Pages on-demand;</p></li>
<li><p><a class="reference internal" href="../api/timeline.html#psynet.timeline.CodeBlock" title="psynet.timeline.CodeBlock"><code class="xref py py-class docutils literal notranslate"><span class="pre">psynet.timeline.CodeBlock</span></code></a> objects define code that runs in between Pages;</p></li>
<li><p>Control flow functions determine how these elements are sequenced within the timeline.</p></li>
</ul>
<p>We will now introduce each of these concepts in a little more detail.
See their dedicated documentation for full information.</p>
<section id="page">
<h4>Page<a class="headerlink" href="#page" title="Link to this heading">#</a></h4>
<p><a class="reference internal" href="../api/timeline.html#psynet.timeline.Page" title="psynet.timeline.Page"><code class="xref py py-class docutils literal notranslate"><span class="pre">psynet.timeline.Page</span></code></a> objects determine the web pages that are presented to the participant.
The base <a class="reference internal" href="../api/timeline.html#psynet.timeline.Page" title="psynet.timeline.Page"><code class="xref py py-class docutils literal notranslate"><span class="pre">psynet.timeline.Page</span></code></a> class allows you to define a Page using a custom Jinja template.
Jinja is a templating engine that is popular for creating websites with a Python back-end.
For example, here’s what the template for <code class="xref py py-class docutils literal notranslate"><span class="pre">psynet.timeline.SuccessfulEndPage</span></code> currently
looks like:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>{% extends &quot;timeline-page.html&quot; %}

{% block main_body %}
    That&#39;s the end of the experiment!
    {% if config.show_reward %}
        {% include &quot;final-page-rewards.html&quot; %}
    {% endif %}
    Thank you for taking part.

    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;vspace&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
        Please click &quot;Finish&quot; to complete the HIT.
    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;vspace&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;next-button&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-primary btn-lg&quot;</span> <span class="na">onClick</span><span class="o">=</span><span class="s">&quot;dallinger.submitAssignment();&quot;</span><span class="p">&gt;</span>Finish<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
{% endblock %}
</pre></div>
</div>
<p>Most PsyNet users don’t work with these Jinja templates directly. Instead, they use PsyNet helper classes
that create these templates programmatically.</p>
<p>The simplest case is the <a class="reference internal" href="../api/timeline.html#psynet.page.InfoPage" title="psynet.page.InfoPage"><code class="xref py py-class docutils literal notranslate"><span class="pre">InfoPage</span></code></a>. The Info Page simply displays some information to
the participant, and does not request any response. An Info Page can be created like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.page</span> <span class="kn">import</span> <span class="n">InfoPage</span>

<span class="n">InfoPage</span><span class="p">(</span><span class="s2">&quot;Welcome to the experiment!&quot;</span><span class="p">,</span> <span class="n">time_estimate</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">time_estimate</span></code> parameter tells PsyNet how many seconds the participant is expected to spend
on the page. This is a common feature of PsyNet Pages. This time estimate is used to manage
the progress bar and to compensate participants pro rata for their time on the experiment.</p>
<p>More often than not, experimenters eventually end up using the <a class="reference internal" href="modular_page.html#psynet.modular_page.ModularPage" title="psynet.modular_page.ModularPage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModularPage</span></code></a>
class for their experiment implementations. The Modular Page is a powerful way of defining pages
that combines two basic elements: the <a class="reference internal" href="modular_page.html#psynet.modular_page.Prompt" title="psynet.modular_page.Prompt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prompt</span></code></a> and the
<a class="reference internal" href="modular_page.html#psynet.modular_page.Control" title="psynet.modular_page.Control"><code class="xref py py-class docutils literal notranslate"><span class="pre">Control</span></code></a>. The Prompt defines what is presented to the participant,
whereas the Control defines their interface for responding. The PsyNet library contains many
built-in implementations of Prompts and Controls, but it’s perfectly possible to create your own
Prompts or Controls for a given experiment, and then reuse them in future experiment implementations.</p>
<p>Here’s an example of a Modular Page which combines an <a class="reference internal" href="modular_page.html#psynet.modular_page.AudioPrompt" title="psynet.modular_page.AudioPrompt"><code class="xref py py-class docutils literal notranslate"><span class="pre">AudioPrompt</span></code></a>
with a <a class="reference internal" href="modular_page.html#psynet.modular_page.PushButtonControl" title="psynet.modular_page.PushButtonControl"><code class="xref py py-class docutils literal notranslate"><span class="pre">PushButtonControl</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.modular_page</span> <span class="kn">import</span> <span class="n">ModularPage</span><span class="p">,</span> <span class="n">AudioPrompt</span><span class="p">,</span> <span class="n">PushButtonControl</span>

<span class="n">ModularPage</span><span class="p">(</span>
    <span class="s2">&quot;question_page&quot;</span><span class="p">,</span>
    <span class="n">AudioPrompt</span><span class="p">(</span><span class="s2">&quot;https://my-server.org/stimuli/audio.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;Do you like this audio file?&quot;</span><span class="p">),</span>
    <span class="n">PushButtonControl</span><span class="p">([</span><span class="s2">&quot;Yes&quot;</span><span class="p">,</span> <span class="s2">&quot;No&quot;</span><span class="p">]),</span>
    <span class="n">time_estimate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">time_estimate</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The other important kind of page is the <code class="xref py py-class docutils literal notranslate"><span class="pre">EndPage</span></code>. An EndPage is used to mark
the end of an experiment. There are two commonly used types of End Pages, triggering different
end-of-experiment behavior:
the <a class="reference internal" href="../api/timeline.html#psynet.page.SuccessfulEndPage" title="psynet.page.SuccessfulEndPage"><code class="xref py py-class docutils literal notranslate"><span class="pre">SuccessfulEndPage</span></code></a> and the <a class="reference internal" href="../api/timeline.html#psynet.page.UnsuccessfulEndPage" title="psynet.page.UnsuccessfulEndPage"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnsuccessfulEndPage</span></code></a>.
The latter is typically used when the participant fails some kind of performance check
and is made to finish the experiment early.</p>
</section>
<section id="page-maker">
<h4>Page Maker<a class="headerlink" href="#page-maker" title="Link to this heading">#</a></h4>
<p><a class="reference internal" href="../api/timeline.html#psynet.timeline.PageMaker" title="psynet.timeline.PageMaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">psynet.timeline.PageMaker</span></code></a> objects generate Pages on-demand.
The resulting pages can be dynamic, incorporating content that depends on the current
state of the participant or the experiment.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.timeline</span> <span class="kn">import</span> <span class="n">PageMaker</span>

<span class="n">PageMaker</span><span class="p">(</span><span class="k">lambda</span> <span class="n">participant</span><span class="p">:</span> <span class="n">InfoPage</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;Welcome to the experiment, </span><span class="si">{</span><span class="n">participant</span><span class="o">.</span><span class="n">var</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
    <span class="n">time_estimate</span><span class="o">=</span><span class="mi">5</span>
<span class="p">))</span>
</pre></div>
</div>
<p>The Page Maker takes a function as its primary argument. Typically we use a lambda function,
which allows us to define the Page Maker content in-line. However, it’s also possible
to pass a named function which is defined or imported earlier in the code.</p>
<p>The Page Maker function can optionally take a variety of arguments, of which <code class="docutils literal notranslate"><span class="pre">participant</span></code>
is one. To find the full list of available arguments, see the documentation.</p>
<p>Warning: The Page Maker function will be called more than once for a given page,
including whenever the page is refreshed. It is important therefore that the code
is <strong>idempotent</strong>, i.e. calling it multiple times should have the same effect as calling
it just once. It is a bad idea to incorporate random functions in this code.</p>
</section>
<section id="code-block">
<h4>Code Block<a class="headerlink" href="#code-block" title="Link to this heading">#</a></h4>
<p><a class="reference internal" href="../api/timeline.html#psynet.timeline.CodeBlock" title="psynet.timeline.CodeBlock"><code class="xref py py-class docutils literal notranslate"><span class="pre">psynet.timeline.CodeBlock</span></code></a> objects define code that runs in between Pages.
They are similar to Page Makers, but do not return pages. Like Page Makers,
they take a function as the primary argument, which can optionally take a variety of arguments
such as <code class="docutils literal notranslate"><span class="pre">participant</span></code>.
Unlike Page Makers, they only ever run once, so they’re a safe place to put random functions.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.timeline</span> <span class="kn">import</span> <span class="n">CodeBlock</span>

<span class="n">CodeBlock</span><span class="p">(</span><span class="k">lambda</span> <span class="n">participant</span><span class="p">:</span> <span class="n">participant</span><span class="o">.</span><span class="n">var</span><span class="o">.</span><span class="n">seed</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</section>
</section>
<section id="control-flow">
<h3>Control Flow<a class="headerlink" href="#control-flow" title="Link to this heading">#</a></h3>
<p>Control flow functions determine how these elements are sequenced within the timeline.
They are currently not implemented as classes, but rather as pure functions;
we might change this in the future though to achieve a cleaner syntax.</p>
<section id="while-loop">
<h4>While Loop<a class="headerlink" href="#while-loop" title="Link to this heading">#</a></h4>
<p>A While Loop repeats a particular series of Elts while a particular condition is
satisfied. The condition is specified as a function that is called with various
optional arguments, most commonly <code class="docutils literal notranslate"><span class="pre">participant</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">while_loop</span><span class="p">(</span>
    <span class="s2">&quot;example_loop&quot;</span><span class="p">,</span>
    <span class="k">lambda</span> <span class="n">participant</span><span class="p">:</span> <span class="n">participant</span><span class="o">.</span><span class="n">answer</span> <span class="o">==</span> <span class="s2">&quot;Yes&quot;</span><span class="p">,</span>
    <span class="n">Module</span><span class="p">(</span>
        <span class="s2">&quot;loop&quot;</span><span class="p">,</span>
        <span class="n">ModularPage</span><span class="p">(</span>
            <span class="s2">&quot;loop_nafc&quot;</span><span class="p">,</span>
            <span class="n">Prompt</span><span class="p">(</span><span class="s2">&quot;Would you like to stay in this loop?&quot;</span><span class="p">),</span>
            <span class="n">control</span><span class="o">=</span><span class="n">PushButtonControl</span><span class="p">([</span><span class="s2">&quot;Yes&quot;</span><span class="p">,</span> <span class="s2">&quot;No&quot;</span><span class="p">],</span> <span class="n">arrange_vertically</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
            <span class="n">time_estimate</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">),</span>
    <span class="n">expected_repetitions</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="for-loop">
<h4>For Loop<a class="headerlink" href="#for-loop" title="Link to this heading">#</a></h4>
<p>A For Loop instructs PsyNet to loop over the values of a list,
and using these values to dynamically generate Elts in the manner of a Page Maker.
The following example uses a For Loop to create a series of Info Pages
counting from 1 to 3:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.timeline</span> <span class="kn">import</span> <span class="n">for_loop</span>
<span class="kn">from</span> <span class="nn">psynet.page</span> <span class="kn">import</span> <span class="n">InfoPage</span>

<span class="n">for_loop</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;for_loop_1&quot;</span><span class="p">,</span>
    <span class="n">iterate_over</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="n">logic</span><span class="o">=</span><span class="k">lambda</span> <span class="n">number</span><span class="p">:</span> <span class="n">InfoPage</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">number</span><span class="si">}</span><span class="s2"> / 3&quot;</span><span class="p">),</span>
    <span class="n">time_estimate_per_iteration</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>For Loops can also include random functions to generate their seed lists.
This provides a straightforward way to randomize the order of material
presented to Participants. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">psynet.timeline</span> <span class="kn">import</span> <span class="n">for_loop</span>
<span class="kn">from</span> <span class="nn">psynet.page</span> <span class="kn">import</span> <span class="n">InfoPage</span>

<span class="n">for_loop</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;for_loop_2&quot;</span><span class="p">,</span>
    <span class="n">iterate_over</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">3</span><span class="p">),</span>
    <span class="n">logic</span><span class="o">=</span><span class="k">lambda</span> <span class="n">number</span><span class="p">:</span> <span class="n">InfoPage</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stimulus </span><span class="si">{</span><span class="n">number</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
    <span class="n">time_estimate_per_iteration</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="conditional">
<h4>Conditional<a class="headerlink" href="#conditional" title="Link to this heading">#</a></h4>
<p>A Conditional construct is used to branch Timeline logic according to whether or not
a given Condition is satisfied. The Condition is programmed as a function,
analogous to the function for the While Loop,
which should return either True or False.
If the function returns True, then the logic follows the first branch;
if it returns False, the logic follows the second branch (if such a branch
was specified). For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.timelime</span> <span class="kn">import</span> <span class="n">conditional</span>
<span class="kn">from</span> <span class="nn">psynet.page</span> <span class="kn">import</span> <span class="n">InfoPage</span>

<span class="n">conditional</span><span class="p">(</span>
    <span class="s2">&quot;like_chocolate&quot;</span><span class="p">,</span>
    <span class="k">lambda</span> <span class="n">participant</span><span class="p">:</span> <span class="n">participant</span><span class="o">.</span><span class="n">answer</span> <span class="o">==</span> <span class="s2">&quot;Yes&quot;</span><span class="p">,</span>
    <span class="n">InfoPage</span><span class="p">(</span><span class="s2">&quot;It&#39;s nice to hear that you like chocolate!&quot;</span><span class="p">,</span> <span class="n">time_estimate</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
    <span class="n">InfoPage</span><span class="p">(</span>
        <span class="s2">&quot;I&#39;m sorry to hear that you don&#39;t like chocolate...&quot;</span><span class="p">,</span>
        <span class="n">time_estimate</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="switch">
<h4>Switch<a class="headerlink" href="#switch" title="Link to this heading">#</a></h4>
<p>A Switch construct is a more powerful version of the Conditional construct
that supports arbitrary numbers of branches. As before, the experimenter
writes a function that is evaluated once the Participant reaches the Switch,
but this time the function can return an arbitrary Python object
(technically, this object must be ‘hashable’, which includes things like
strings, integers, and floats).
The experimenter then also provides a dictionary of branches,
where each branch is a piece of Timeline logic,
and the branches are keyed by possible outputs of the function.
PsyNet sends the Participant to the branch that’s keyed by the output
of the function. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.timeline</span> <span class="kn">import</span> <span class="n">switch</span>

<span class="n">switch</span><span class="p">(</span>
    <span class="s2">&quot;color&quot;</span><span class="p">,</span>
    <span class="k">lambda</span> <span class="n">participant</span><span class="p">:</span> <span class="n">participant</span><span class="o">.</span><span class="n">answer</span><span class="p">,</span>
    <span class="n">branches</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;Red&quot;</span><span class="p">:</span> <span class="n">InfoPage</span><span class="p">(</span><span class="s2">&quot;You selected &#39;red&#39;.&quot;</span><span class="p">,</span> <span class="n">time_estimate</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="s2">&quot;Green&quot;</span><span class="p">:</span> <span class="n">InfoPage</span><span class="p">(</span><span class="s2">&quot;You selected &#39;green&#39;.&quot;</span><span class="p">,</span> <span class="n">time_estimate</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="s2">&quot;Blue&quot;</span><span class="p">:</span> <span class="n">InfoPage</span><span class="p">(</span><span class="s2">&quot;You selected &#39;blue&#39;.&quot;</span><span class="p">,</span> <span class="n">time_estimate</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="module">
<h3>Module<a class="headerlink" href="#module" title="Link to this heading">#</a></h3>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code> is a construct for organizing Timeline logic
into standalone blocks. For example, if we create a pre-screening test that involves
asking the Participant some spelling questions, we might make this pre-screening test a Module
and then distribute it in a helper package.</p>
<p>Modules are useful for tracking the Participants’ journey through the experiment.
For example, the Dashboard contains a useful visualization that shows how many Participants
have started and finished each Module.</p>
<p>Modules are also useful for encapsulating Participant state. This means that variables don’t
unintentionally leak from one part of the Experiment to the other, something which otherwise
can produce subtle bugs. To take advantage of this feature, the experimenter avoids setting
participant variables in this way (which sets variables that are ‘global’ to the entire timeline):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">participant</span><span class="o">.</span><span class="n">var</span><span class="o">.</span><span class="n">custom_variable</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
<p>and instead sets participant variables this way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">participant</span><span class="o">.</span><span class="n">locals</span><span class="o">.</span><span class="n">custom_variable</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
<p>or equivalently:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">participant</span><span class="o">.</span><span class="n">module_state</span><span class="o">.</span><span class="n">var</span><span class="o">.</span><span class="n">custom_variable</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
<p>Modules can be used as the base class for object-oriented hierarchies of Timeline constructs.
For example, the <a class="reference internal" href="../api/trial/main.html#psynet.trial.main.TrialMaker" title="psynet.trial.main.TrialMaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">TrialMaker</span></code></a> class is a special kind of Module class
that implements logic for administering Trials to the participant (see below).
One day we might similarly create a PreScreen class for implementing pre-screening tests.</p>
<p>Modules are also useful for managing Assets, as described below.</p>
</section>
<section id="asset">
<h3>Asset<a class="headerlink" href="#asset" title="Link to this heading">#</a></h3>
<p>An <a class="reference internal" href="../api/asset.html#psynet.asset.Asset" title="psynet.asset.Asset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Asset</span></code></a> is some kind of file (or collection of files) that
is referenced during an experiment. These might for example be video files that we play
to the participant, or perhaps audio recordings that we collect from the participant.</p>
<p>The API for Assets is powerful but complex. PsyNet provides many patterns for creating Assets
and for accessing them within an experiment. These are documented in detail in the
Assets chapter. For now, we will just illustrate the simplest of these patterns,
which is to define an Asset at the Module level.</p>
<p>You can create an asset within a Module by passing it to the Module constructor’s
<code class="docutils literal notranslate"><span class="pre">assets</span></code> argument. This argument expects a dictionary. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psynet.experiment</span>
<span class="kn">from</span> <span class="nn">psynet.asset</span> <span class="kn">import</span> <span class="n">CachedAsset</span>

<span class="k">class</span> <span class="nc">Exp</span><span class="p">(</span><span class="n">psynet</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">Experiment</span><span class="p">):</span>
    <span class="n">timeline</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span>
        <span class="n">Module</span><span class="p">(</span>
            <span class="s2">&quot;my_module&quot;</span><span class="p">,</span>
            <span class="n">my_pages</span><span class="p">(),</span>
            <span class="n">assets</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;logo&quot;</span><span class="p">:</span> <span class="n">CachedAsset</span><span class="p">(</span><span class="s2">&quot;logo.svg&quot;</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>You can then access this asset within your module as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.timeline</span> <span class="kn">import</span> <span class="n">PageMaker</span>

<span class="k">def</span> <span class="nf">my_pages</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">PageMaker</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">assets</span><span class="p">:</span> <span class="n">ModularPage</span><span class="p">(</span>
            <span class="s2">&quot;audio_player&quot;</span><span class="p">,</span>
            <span class="n">ImagePrompt</span><span class="p">(</span><span class="n">assets</span><span class="p">[</span><span class="s2">&quot;logo&quot;</span><span class="p">],</span> <span class="s2">&quot;Look at this image.&quot;</span><span class="p">),</span>
            <span class="n">time_estimate</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Note how the asset must be accessed within a <code class="docutils literal notranslate"><span class="pre">PageMaker</span></code>,
and is pulled from the optional <code class="docutils literal notranslate"><span class="pre">assets</span></code> argument that we included
in the lambda function. This <code class="docutils literal notranslate"><span class="pre">assets</span></code> argument is populated with a dictionary
of assets from the current module.</p>
</section>
<section id="trial">
<h3>Trial<a class="headerlink" href="#trial" title="Link to this heading">#</a></h3>
<p>The <a class="reference internal" href="../api/trial/main.html#psynet.trial.main.Trial" title="psynet.trial.main.Trial"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trial</span></code></a> class represents a single Trial within the Experiment.
A Trial typically involves administering some kind of stimulus to the Participant
and recording their response.</p>
<p>The PsyNet experimenter typically creates their own Trial subclass as part of the
Experiment implementation. This might look something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psynet.trial.main</span> <span class="kn">import</span> <span class="n">Trial</span>

<span class="k">class</span> <span class="nc">RateTrial</span><span class="p">(</span><span class="n">Trial</span><span class="p">):</span>
    <span class="n">time_estimate</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="k">def</span> <span class="nf">show_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment</span><span class="p">,</span> <span class="n">participant</span><span class="p">):</span>
        <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">definition</span><span class="p">[</span><span class="s2">&quot;word&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">ModularPage</span><span class="p">(</span>
            <span class="s2">&quot;rate_trial&quot;</span><span class="p">,</span>
            <span class="n">Markup</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;How happy is the following word: &lt;strong&gt;</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s2">&lt;/strong&gt;&quot;</span><span class="p">),</span>
            <span class="n">PushButtonControl</span><span class="p">(</span>
                <span class="p">[</span><span class="s2">&quot;Not at all&quot;</span><span class="p">,</span> <span class="s2">&quot;A little&quot;</span><span class="p">,</span> <span class="s2">&quot;Very much&quot;</span><span class="p">],</span>
            <span class="p">),</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>This minimal example of a custom trial class has two important elements:
<code class="docutils literal notranslate"><span class="pre">time_estimate</span></code> and <code class="docutils literal notranslate"><span class="pre">show_trial</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">time_estimate</span></code> attribute tells PsyNet how long an average Trial is expected to last, in seconds.
This is used to construct progress bars and to reward participants for their progress through
the experiment.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">show_trial</span></code> method then defines how the Trial is displayed to the Participant.
The <code class="docutils literal notranslate"><span class="pre">show_trial</span></code> method method should refer to the Trial’s <code class="docutils literal notranslate"><span class="pre">definition</span></code> attribute,
which will be a dictionary containing defining information about the Trial,
typically providing all the information required to uniquely determine the stimulus
that will be presented to the Participant.
Ordinarily the <code class="docutils literal notranslate"><span class="pre">show_trial</span></code> method should return a single page,
however, it’s also possible to construct more complex multi-page Trials by returning
a series of Elts wrapped in a call to <code class="xref py py-func docutils literal notranslate"><span class="pre">join()</span></code>.</p>
<p>The simplest way to use a custom Trial class in an experiment is by using the
<a class="reference internal" href="../api/trial/main.html#psynet.trial.main.Trial.cue" title="psynet.trial.main.Trial.cue"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cue()</span></code></a> method. This inserts a Trial in the timeline with a
given definition, with this definition provided as an argument to <code class="docutils literal notranslate"><span class="pre">cue</span></code>.
The following example combines <code class="docutils literal notranslate"><span class="pre">Trial.cue</span></code> with a <code class="docutils literal notranslate"><span class="pre">for_loop</span></code> to deliver three
trials with randomly sampled words:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">for_loop</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Randomly sample three words from the word list&quot;</span><span class="p">,</span>
    <span class="n">iterate_over</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">WORDS</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="n">logic</span><span class="o">=</span><span class="k">lambda</span> <span class="n">word</span><span class="p">:</span> <span class="n">RateTrial</span><span class="o">.</span><span class="n">cue</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;word&quot;</span><span class="p">:</span> <span class="n">word</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">),</span>
    <span class="n">time_estimate_per_iteration</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Trials used in this way can also incorporate Assets.
However, this approach is only recommended for
External Assets (i.e. Assets that are hosted externally on a web server)
or for Fast Function Assets (i.e. Assets that are generated on-demand).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">audio_ratings</span> <span class="o">=</span> <span class="n">Module</span><span class="p">(</span>
    <span class="s2">&quot;audio_ratings&quot;</span><span class="p">,</span>
    <span class="n">for_loop</span><span class="p">(</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Deliver 5 trials with randomly sampled parameters&quot;</span><span class="p">,</span>
        <span class="n">iterate_over</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;frequency_gradient&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                <span class="s2">&quot;start_frequency&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="p">],</span>
        <span class="n">logic</span><span class="o">=</span><span class="k">lambda</span> <span class="n">definition</span><span class="p">:</span> <span class="n">RateTrial</span><span class="o">.</span><span class="n">cue</span><span class="p">(</span>
            <span class="n">definition</span><span class="p">,</span>
            <span class="n">assets</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;audio&quot;</span><span class="p">:</span> <span class="n">FastFunctionAsset</span><span class="p">(</span>
                    <span class="n">function</span><span class="o">=</span><span class="n">synth_stimulus</span><span class="p">,</span>
                    <span class="n">extension</span><span class="o">=</span><span class="s2">&quot;.wav&quot;</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">},</span>
        <span class="p">),</span>
        <span class="n">time_estimate_per_iteration</span><span class="o">=</span><span class="n">RateTrial</span><span class="o">.</span><span class="n">time_estimate</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="node">
<h3>Node<a class="headerlink" href="#node" title="Link to this heading">#</a></h3>
<p>If your experiment design requires the Participant session to depend on what happened in previous
Participant sessions (e.g. if you want to ensure that every stimulus receives exactly the same number
of ratings), or if it requires pregenerating Assets (which normally is sensible if your Assets
are slow to generate), then you will likely want to take advantage of Nodes.</p>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code> is a PsyNet database construct that is used for organizing Trials.
In particular, it can be conceptualized as a <em>parent</em> for Trials,
storing important parameters that are used to define its child Trials,
as well as storing Assets that the Trials can make use of.</p>
<p>Nodes are useful for enacting interactions between Participant sessions because they exist
independently of individual Participants.
In a non-adaptive experiment, a Node would typically represent a stimulus that is to be shown
to multiple Participants. PsyNet can then balance stimulus selection by making sure that each
Node ends up receiving the same number of Trials.
In an adaptive experiment (e.g. Gibbs Sampling with People), a Node can instead represent the
current state of the experiment (or, more specifically, the state of a particular chain within an experiment).</p>
<p>Nodes are useful for asset management because they are typically created before the Participant comes along.
This means they can have a headstart with asset generation, meaning that the Participant isn’t kept waiting
in the meantime. Moreover, since the same Node can spawn many Trials, the same Assets can be reused
many times, instead of having to be regenerated for each new Trial.</p>
<p>The simplest way to use Nodes in an experiment is to create a collection of Nodes in experiment.py
and use these for your Trials. Here’s an example from a PsyNet demo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">synth_stimulus</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">frequencies</span><span class="p">):</span>
    <span class="n">synth_prosody</span><span class="p">(</span><span class="n">vector</span><span class="o">=</span><span class="n">frequencies</span><span class="p">,</span> <span class="n">output_path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>

<span class="n">NODES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Node</span><span class="p">(</span>
        <span class="n">definition</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;frequency_gradient&quot;</span><span class="p">:</span> <span class="n">frequency_gradient</span><span class="p">,</span>
            <span class="s2">&quot;start_frequency&quot;</span><span class="p">:</span> <span class="n">start_frequency</span><span class="p">,</span>
            <span class="s2">&quot;frequencies&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">start_frequency</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">frequency_gradient</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)],</span>
        <span class="p">},</span>
        <span class="n">assets</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;stimulus&quot;</span><span class="p">:</span> <span class="n">CachedFunctionAsset</span><span class="p">(</span>
                <span class="n">function</span><span class="o">=</span><span class="n">synth_stimulus</span><span class="p">,</span>
                <span class="n">extension</span><span class="o">=</span><span class="s2">&quot;.wav&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">},</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">frequency_gradient</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">start_frequency</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="p">]</span>


<span class="k">class</span> <span class="nc">RateTrial</span><span class="p">(</span><span class="n">Trial</span><span class="p">):</span>
    <span class="n">time_estimate</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="nf">show_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment</span><span class="p">,</span> <span class="n">participant</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ModularPage</span><span class="p">(</span>
            <span class="s2">&quot;audio_rating&quot;</span><span class="p">,</span>
            <span class="n">AudioPrompt</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">assets</span><span class="p">[</span><span class="s2">&quot;stimulus&quot;</span><span class="p">],</span>
                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;How happy is the following word?&quot;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">PushButtonControl</span><span class="p">(</span>
                <span class="p">[</span><span class="s2">&quot;Not at all&quot;</span><span class="p">,</span> <span class="s2">&quot;A little&quot;</span><span class="p">,</span> <span class="s2">&quot;Very much&quot;</span><span class="p">],</span>
            <span class="p">),</span>
        <span class="p">)</span>


<span class="n">audio_ratings</span> <span class="o">=</span> <span class="n">Module</span><span class="p">(</span>
    <span class="s2">&quot;audio_ratings&quot;</span><span class="p">,</span>
    <span class="n">for_loop</span><span class="p">(</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Deliver 5 random samples from the stimulus set&quot;</span><span class="p">,</span>
        <span class="n">iterate_over</span><span class="o">=</span><span class="k">lambda</span> <span class="n">nodes</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="n">logic</span><span class="o">=</span><span class="k">lambda</span> <span class="n">node</span><span class="p">:</span> <span class="n">RateTrial</span><span class="o">.</span><span class="n">cue</span><span class="p">(</span><span class="n">node</span><span class="p">),</span>
        <span class="n">time_estimate_per_iteration</span><span class="o">=</span><span class="n">RateTrial</span><span class="o">.</span><span class="n">time_estimate</span><span class="p">,</span>
        <span class="n">expected_repetitions</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">nodes</span><span class="o">=</span><span class="n">NODES</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Here the Nodes are used to define a stimulus set that explores a factorial combination of two variables,
<code class="docutils literal notranslate"><span class="pre">frequency_gradient</span></code> and <code class="docutils literal notranslate"><span class="pre">start_frequency</span></code>. Each Node has an Asset, specifically a Cached Function Asset,
defined as a function that gets its arguments from the Node’s definition. When the experiment is deployed,
PsyNet will automatically generate the full set of Assets if it doesn’t find them in its cache.</p>
<p>Note how the Nodes are passed to the <code class="docutils literal notranslate"><span class="pre">Module</span></code> call. This ensures that the Nodes are recognized by
the Experiment, and it associates the Nodes with the <code class="docutils literal notranslate"><span class="pre">&quot;audio_ratings&quot;</span></code> module. Now code within that module
(e.g. Page Makers, For Loops) can access those Nodes within lambda functions, as in the example above.
These nodes can be used to create Trials by using the <code class="docutils literal notranslate"><span class="pre">Trial.cue</span></code> method, as in the example above.
The Trial then inherits the Node’s definition (in this case <code class="docutils literal notranslate"><span class="pre">frequency_gradient</span></code>, <code class="docutils literal notranslate"><span class="pre">start_frequency</span></code>,
and <code class="docutils literal notranslate"><span class="pre">frequencies</span></code>); the Node’s assets then can be accessed through <code class="docutils literal notranslate"><span class="pre">trial.node.assets</span></code>.</p>
<p>It is also possible to create Nodes during the Experiment using similar techniques,
but at the time of writing we haven’t got a demo for this yet. Watch this space.</p>
</section>
<section id="trial-maker">
<h3>Trial maker<a class="headerlink" href="#trial-maker" title="Link to this heading">#</a></h3>
<p>The previous sections described how trial-based experiments can be implemented using the <code class="docutils literal notranslate"><span class="pre">Trial.cue</span></code> method.
With this approach, the experimenter has to define the logic of choosing Trials themselves
using constructs such as For Loops.
However, such logic can get complex and repetitive. PsyNet therefore provides some built-in constructs
that cover a variety of use cases, including:</p>
<ul class="simple">
<li><p>Static experiments, where Trials are generated from a pre-specified collection of Nodes,
and Node selection is balanced to ensure that Trials accumulate evenly across Nodes;</p></li>
<li><p>Serial reproduction, where a participant imitates a stimulus, another participant imitates that imitation,
and so on for many generations;</p></li>
<li><p>Markov Chain Monte Carlo with People, a procedure which coordinates many two-alternative forced-choice trials
into a process which stochastically samples from a (possibly high-dimensional) stimulus space;</p></li>
<li><p>Gibbs Sampling with People, a variant of Markov Chain Monte Carlo with People based on a continuous
slider-based task.</p></li>
</ul>
<p>These constructs are implemented as Trial Makers (<a class="reference internal" href="../api/trial/main.html#psynet.trial.main.TrialMaker" title="psynet.trial.main.TrialMaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">psynet.trial.main.TrialMaker</span></code></a>).
A Trial Maker is a special kind of Module that provides logic for administering Trials within an experiment.
Experiments using a Trial Maker typically implement custom Trial classes, as before.
Complex experiments (e.g. chain-based) experiments will typically also implement a custom Node class.
Then, instead of using some combination of For Loops with <code class="docutils literal notranslate"><span class="pre">Trial.cue</span></code>, the experimenter instead
inserts a Trial Maker instance into the Timeline. This Trial Maker might look something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AnimalTrialMaker</span><span class="p">(</span>
    <span class="n">id_</span><span class="o">=</span><span class="s2">&quot;animals&quot;</span><span class="p">,</span>
    <span class="n">trial_class</span><span class="o">=</span><span class="n">AnimalTrial</span><span class="p">,</span>
    <span class="n">nodes</span><span class="o">=</span><span class="n">nodes</span><span class="p">,</span>
    <span class="n">expected_trials_per_participant</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
    <span class="n">max_trials_per_block</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">allow_repeated_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">balance_across_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">check_performance_at_end</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">check_performance_every_trial</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">target_n_participants</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
    <span class="n">target_trials_per_node</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">recruit_mode</span><span class="o">=</span><span class="s2">&quot;n_participants&quot;</span><span class="p">,</span>
    <span class="n">n_repeat_trials</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This Trial Maker has several features as determined by the options that have been passed to it:</p>
<ul class="simple">
<li><p>PsyNet will expect each participant to take about 6 trials;</p></li>
<li><p>Each participant will take no more than 2 trials in each block;</p></li>
<li><p>Each participant is in theory allowed to take multiple Trials from the same Node;</p></li>
<li><p>Node selection will be balanced, meaning that Trials should accumulate evenly across Nodes;</p></li>
<li><p>PsyNet will check the participant’s performance at the end of the Trial Maker, and potentially terminate
their session if they perform too badly;</p></li>
<li><p>The Trial Maker will prompt PsyNet to keep recruiting until 50 participants have been recruited;</p></li>
<li><p>The Trial Maker will administer three Trials at the end that are repeats of three randomly selected
Trials from earlier in the Trial Maker; the results from these Trials can be used to evaluate the
participant’s test-rest reliability.</p></li>
</ul>
<p>Explore documentation for specific Trial Maker classes as well as PsyNet demos for more information.</p>
</section>
</section>
<section id="connection-to-sqlalchemy-classes">
<h2>Connection to SQLAlchemy classes<a class="headerlink" href="#connection-to-sqlalchemy-classes" title="Link to this heading">#</a></h2>
<p>Several PsyNet classes are database-backed, which means that their objects are represented as rows
in a database. This enables object states to be communicated across servers and persisted
throughout the duration of the experiment. Examples of database-backed classes include:</p>
<ul class="simple">
<li><p>Participants</p></li>
<li><p>Trials</p></li>
<li><p>Nodes</p></li>
<li><p>Assets</p></li>
<li><p>Error Logs</p></li>
<li><p>Asynchronous Processes</p></li>
</ul>
<p>This database integration is implemented via SQLAlchemy. SQLAlchemy is a powerful Python package
that creates a mapping between Python objects and database elements.</p>
<p>In most PsyNet usage you do not need to worry much about the mechanics of this database integration.
As long as you work with pre-existing object attributes and variable stores
(e.g. <code class="docutils literal notranslate"><span class="pre">participant.var.my_variable</span></code>), then your changes should propagate and persist just
as you expect. However in advanced usage you will eventually want to understand more about
how this integration works. We will soon include a tutorial on SQLAlchemy usage into this
documentation website.</p>
</section>
<section id="connection-to-dallinger-classes">
<h2>Connection to Dallinger classes<a class="headerlink" href="#connection-to-dallinger-classes" title="Link to this heading">#</a></h2>
<p>As you may know, PsyNet is built on an earlier platform called Dallinger which deals with many
of the lower-level aspects of server management and experiment deployment.
Dallinger has its own collection of database-backed classes which are designed with a particular
focus on cultural simulation experiments, with names such as
Info, Vector, Transmission, Node, and so on.</p>
<p>Several PsyNet classes are built on some of these pre-existing Dallinger classes.
For example, Trials are built on Infos, PsyNet Nodes are built on Dallinger Nodes,
and PsyNet Nodes are organized into Networks, just like in Dallinger.
The motivation for this inheritance is that it allows PsyNet to share some features
with Dallinger, in particular as regards network visualizations in the dashboard.
However, it does mean that in a few places in the code and the database
you might see the word Info used when you were expecting to see the word Trial. We are
working to eliminate these instances to make the abstraction more intuitive.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="timeline.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Timeline</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="creating_a_new_experiment.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Creating a new experiment</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Peter Harrison
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Classes in PsyNet</a><ul>
<li><a class="reference internal" href="#introduction-to-object-orientation">Introduction to object-orientation</a></li>
<li><a class="reference internal" href="#psynet-classes-in-experiment-py">PsyNet classes in experiment.py</a></li>
<li><a class="reference internal" href="#overview-of-key-psynet-classes">Overview of key PsyNet classes</a><ul>
<li><a class="reference internal" href="#experiment">Experiment</a></li>
<li><a class="reference internal" href="#participant">Participant</a></li>
<li><a class="reference internal" href="#elt">Elt</a><ul>
<li><a class="reference internal" href="#page">Page</a></li>
<li><a class="reference internal" href="#page-maker">Page Maker</a></li>
<li><a class="reference internal" href="#code-block">Code Block</a></li>
</ul>
</li>
<li><a class="reference internal" href="#control-flow">Control Flow</a><ul>
<li><a class="reference internal" href="#while-loop">While Loop</a></li>
<li><a class="reference internal" href="#for-loop">For Loop</a></li>
<li><a class="reference internal" href="#conditional">Conditional</a></li>
<li><a class="reference internal" href="#switch">Switch</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module">Module</a></li>
<li><a class="reference internal" href="#asset">Asset</a></li>
<li><a class="reference internal" href="#trial">Trial</a></li>
<li><a class="reference internal" href="#node">Node</a></li>
<li><a class="reference internal" href="#trial-maker">Trial maker</a></li>
</ul>
</li>
<li><a class="reference internal" href="#connection-to-sqlalchemy-classes">Connection to SQLAlchemy classes</a></li>
<li><a class="reference internal" href="#connection-to-dallinger-classes">Connection to Dallinger classes</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=bffcfdfb"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../_static/js/custom.js?v=ca86d9ac"></script>
    </body>
</html>