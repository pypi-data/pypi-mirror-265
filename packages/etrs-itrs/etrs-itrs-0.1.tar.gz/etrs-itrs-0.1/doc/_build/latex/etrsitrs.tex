%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[a4paper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
 \ifdefined\DeclareUnicodeCharacterAsOptional
  \DeclareUnicodeCharacter{"00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{"2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{"2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{"2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{"251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{"2572}{\textbackslash}
 \else
  \DeclareUnicodeCharacter{00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{2572}{\textbackslash}
 \fi
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage[dontkeepoldnames]{sphinx}

\usepackage{geometry}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\figurename}{Fig.}}
\addto\captionsenglish{\renewcommand{\tablename}{Table}}
\addto\captionsenglish{\renewcommand{\literalblockname}{Listing}}

\addto\captionsenglish{\renewcommand{\literalblockcontinuedname}{continued from previous page}}
\addto\captionsenglish{\renewcommand{\literalblockcontinuesname}{continues on next page}}

\addto\extrasenglish{\def\pageautorefname{page}}

\setcounter{tocdepth}{1}



\title{etrsitrs Documentation}
\date{Aug 06, 2017}
\release{0.1}
\author{M.A. Brentjens}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex

\begin{document}

\maketitle
\sphinxtableofcontents
\phantomsection\label{\detokenize{index::doc}}


Contents:


\chapter{Readme}
\label{\detokenize{readme:etrsitrs}}\label{\detokenize{readme:readme}}\label{\detokenize{readme::doc}}
\sphinxcode{etrsitrs} is a Python package that implements datum transformations
to and from the ETRF2000 reference frame of the ETRS89 system. It
implements the transformations described in EUREF memo \sphinxstyleemphasis{Specifications
for reference frame fixing in the analysis of a EUREF GPS campaign} by
Boucher and Altamimi (2011).


\section{Requirements}
\label{\detokenize{readme:requirements}}
The following packages and tools are required:
\begin{description}
\item[{numpy}] \leavevmode
All computations.

\item[{nose}] \leavevmode
Running the unit tests.

\item[{coverage}] \leavevmode
Computing code coverage of the unit tests.

\item[{numpydoc}] \leavevmode
Building documentation.

\item[{sphinx}] \leavevmode
Building documentation.

\item[{pylint}] \leavevmode
Static code analysis (optional).

\end{description}


\section{Documentation}
\label{\detokenize{readme:documentation}}
The documentation is built when running the test suite. Documentation
is also provided pre-built in the following directories:
\begin{description}
\item[{html}] \leavevmode
doc/\_build/html/index.html

\item[{PDF}] \leavevmode
doc/\_build/latex/etrsitrs.pdf

\end{description}


\section{Test suite}
\label{\detokenize{readme:test-suite}}
The test suite is run with the command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
user@host: \PYGZti{}/etrs\PYGZhy{}itrs/\PYGZdl{} ./run\PYGZhy{}tests.sh
\end{sphinxVerbatim}

This requires the \sphinxcode{nose} and \sphinxcode{coverage} packages, as well as the
\sphinxcode{nosetests} script. It also builds the documentation and does
static code analysis if \sphinxcode{pylint} is present.


\chapter{Installation}
\label{\detokenize{install:installation}}\label{\detokenize{install::doc}}
The \sphinxcode{etrsitrs} package uses the standard Python distutils for
building and installation. The package is written in Python
version 2. Use:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
user@host: \PYGZti{}/etrs\PYGZhy{}itrs/\PYGZdl{} python2 setup.py install
\end{sphinxVerbatim}

for a default installation. Although on most systems as of 2012,
python 2 is the default Python interpreter, use the \sphinxcode{python2}
interpreter explicitly to ensure you don’t accidentally use python
version 3 on systems that have a dual Python installation. Use
\sphinxcode{-{-}prefix} to install at an alternative location, for example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
user@host: \PYGZti{}/etrs\PYGZhy{}itrs/\PYGZdl{} python2 setup.py install \PYGZhy{}\PYGZhy{}prefix=/opt/python
\end{sphinxVerbatim}


\section{setup.py help}
\label{\detokenize{install:setup-py-help}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Common} \PYG{n}{commands}\PYG{p}{:} \PYG{p}{(}\PYG{n}{see} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZhy{}\PYGZhy{}help\PYGZhy{}commands}\PYG{l+s+s1}{\PYGZsq{}} \PYG{k}{for} \PYG{n}{more}\PYG{p}{)}

  \PYG{n}{setup}\PYG{o}{.}\PYG{n}{py} \PYG{n}{build}      \PYG{n}{will} \PYG{n}{build} \PYG{n}{the} \PYG{n}{package} \PYG{n}{underneath} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{build/}\PYG{l+s+s1}{\PYGZsq{}}
  \PYG{n}{setup}\PYG{o}{.}\PYG{n}{py} \PYG{n}{install}    \PYG{n}{will} \PYG{n}{install} \PYG{n}{the} \PYG{n}{package}

\PYG{n}{Global} \PYG{n}{options}\PYG{p}{:}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{verbose} \PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{n}{v}\PYG{p}{)}  \PYG{n}{run} \PYG{n}{verbosely} \PYG{p}{(}\PYG{n}{default}\PYG{p}{)}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{quiet} \PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{n}{q}\PYG{p}{)}    \PYG{n}{run} \PYG{n}{quietly} \PYG{p}{(}\PYG{n}{turns} \PYG{n}{verbosity} \PYG{n}{off}\PYG{p}{)}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{dry}\PYG{o}{\PYGZhy{}}\PYG{n}{run} \PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{n}{n}\PYG{p}{)}  \PYG{n}{don}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{t actually do anything}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{help} \PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{n}{h}\PYG{p}{)}     \PYG{n}{show} \PYG{n}{detailed} \PYG{n}{help} \PYG{n}{message}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{no}\PYG{o}{\PYGZhy{}}\PYG{n}{user}\PYG{o}{\PYGZhy{}}\PYG{n}{cfg}   \PYG{n}{ignore} \PYG{n}{pydistutils}\PYG{o}{.}\PYG{n}{cfg} \PYG{o+ow}{in} \PYG{n}{your} \PYG{n}{home} \PYG{n}{directory}

\PYG{n}{Options} \PYG{k}{for} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{install}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{command}\PYG{p}{:}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{prefix}            \PYG{n}{installation} \PYG{n}{prefix}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{exec}\PYG{o}{\PYGZhy{}}\PYG{n}{prefix}       \PYG{p}{(}\PYG{n}{Unix} \PYG{n}{only}\PYG{p}{)} \PYG{n}{prefix} \PYG{k}{for} \PYG{n}{platform}\PYG{o}{\PYGZhy{}}\PYG{n}{specific} \PYG{n}{files}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{home}              \PYG{p}{(}\PYG{n}{Unix} \PYG{n}{only}\PYG{p}{)} \PYG{n}{home} \PYG{n}{directory} \PYG{n}{to} \PYG{n}{install} \PYG{n}{under}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{user}              \PYG{n}{install} \PYG{o+ow}{in} \PYG{n}{user} \PYG{n}{site}\PYG{o}{\PYGZhy{}}\PYG{n}{package}
                      \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/home/brentjens/.local/lib/python2.7/site\PYGZhy{}packages}\PYG{l+s+s1}{\PYGZsq{}}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{install}\PYG{o}{\PYGZhy{}}\PYG{n}{base}      \PYG{n}{base} \PYG{n}{installation} \PYG{n}{directory} \PYG{p}{(}\PYG{n}{instead} \PYG{n}{of} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{prefix} \PYG{o+ow}{or} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
                      \PYG{n}{home}\PYG{p}{)}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{install}\PYG{o}{\PYGZhy{}}\PYG{n}{platbase}  \PYG{n}{base} \PYG{n}{installation} \PYG{n}{directory} \PYG{k}{for} \PYG{n}{platform}\PYG{o}{\PYGZhy{}}\PYG{n}{specific} \PYG{n}{files}
                      \PYG{p}{(}\PYG{n}{instead} \PYG{n}{of} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{exec}\PYG{o}{\PYGZhy{}}\PYG{n}{prefix} \PYG{o+ow}{or} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{home}\PYG{p}{)}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{root}              \PYG{n}{install} \PYG{n}{everything} \PYG{n}{relative} \PYG{n}{to} \PYG{n}{this} \PYG{n}{alternate} \PYG{n}{root}
                      \PYG{n}{directory}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{install}\PYG{o}{\PYGZhy{}}\PYG{n}{purelib}   \PYG{n}{installation} \PYG{n}{directory} \PYG{k}{for} \PYG{n}{pure} \PYG{n}{Python} \PYG{n}{module}
                      \PYG{n}{distributions}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{install}\PYG{o}{\PYGZhy{}}\PYG{n}{platlib}   \PYG{n}{installation} \PYG{n}{directory} \PYG{k}{for} \PYG{n}{non}\PYG{o}{\PYGZhy{}}\PYG{n}{pure} \PYG{n}{module} \PYG{n}{distributions}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{install}\PYG{o}{\PYGZhy{}}\PYG{n}{lib}       \PYG{n}{installation} \PYG{n}{directory} \PYG{k}{for} \PYG{n+nb}{all} \PYG{n}{module} \PYG{n}{distributions}
                      \PYG{p}{(}\PYG{n}{overrides} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{install}\PYG{o}{\PYGZhy{}}\PYG{n}{purelib} \PYG{o+ow}{and} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{install}\PYG{o}{\PYGZhy{}}\PYG{n}{platlib}\PYG{p}{)}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{install}\PYG{o}{\PYGZhy{}}\PYG{n}{headers}   \PYG{n}{installation} \PYG{n}{directory} \PYG{k}{for} \PYG{n}{C}\PYG{o}{/}\PYG{n}{C}\PYG{o}{+}\PYG{o}{+} \PYG{n}{headers}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{install}\PYG{o}{\PYGZhy{}}\PYG{n}{scripts}   \PYG{n}{installation} \PYG{n}{directory} \PYG{k}{for} \PYG{n}{Python} \PYG{n}{scripts}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{install}\PYG{o}{\PYGZhy{}}\PYG{n}{data}      \PYG{n}{installation} \PYG{n}{directory} \PYG{k}{for} \PYG{n}{data} \PYG{n}{files}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n+nb}{compile} \PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{n}{c}\PYG{p}{)}      \PYG{n+nb}{compile} \PYG{o}{.}\PYG{n}{py} \PYG{n}{to} \PYG{o}{.}\PYG{n}{pyc} \PYG{p}{[}\PYG{n}{default}\PYG{p}{]}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{no}\PYG{o}{\PYGZhy{}}\PYG{n+nb}{compile}        \PYG{n}{don}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{t compile .py files}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{optimize} \PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{n}{O}\PYG{p}{)}     \PYG{n}{also} \PYG{n+nb}{compile} \PYG{k}{with} \PYG{n}{optimization}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{n}{O1} \PYG{k}{for} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{python \PYGZhy{}O}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{n}{O2}
                      \PYG{k}{for} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{python \PYGZhy{}OO}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{o+ow}{and} \PYG{o}{\PYGZhy{}}\PYG{n}{O0} \PYG{n}{to} \PYG{n}{disable} \PYG{p}{[}\PYG{n}{default}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{n}{O0}\PYG{p}{]}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{force} \PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{n}{f}\PYG{p}{)}        \PYG{n}{force} \PYG{n}{installation} \PYG{p}{(}\PYG{n}{overwrite} \PYG{n+nb}{any} \PYG{n}{existing} \PYG{n}{files}\PYG{p}{)}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{skip}\PYG{o}{\PYGZhy{}}\PYG{n}{build}        \PYG{n}{skip} \PYG{n}{rebuilding} \PYG{n}{everything} \PYG{p}{(}\PYG{k}{for} \PYG{n}{testing}\PYG{o}{/}\PYG{n}{debugging}\PYG{p}{)}
  \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{record}            \PYG{n}{filename} \PYG{o+ow}{in} \PYG{n}{which} \PYG{n}{to} \PYG{n}{record} \PYG{n+nb}{list} \PYG{n}{of} \PYG{n}{installed} \PYG{n}{files}

\PYG{n}{usage}\PYG{p}{:} \PYG{n}{setup}\PYG{o}{.}\PYG{n}{py} \PYG{p}{[}\PYG{n}{global\PYGZus{}opts}\PYG{p}{]} \PYG{n}{cmd1} \PYG{p}{[}\PYG{n}{cmd1\PYGZus{}opts}\PYG{p}{]} \PYG{p}{[}\PYG{n}{cmd2} \PYG{p}{[}\PYG{n}{cmd2\PYGZus{}opts}\PYG{p}{]} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}
   \PYG{o+ow}{or}\PYG{p}{:} \PYG{n}{setup}\PYG{o}{.}\PYG{n}{py} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{help} \PYG{p}{[}\PYG{n}{cmd1} \PYG{n}{cmd2} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}
   \PYG{o+ow}{or}\PYG{p}{:} \PYG{n}{setup}\PYG{o}{.}\PYG{n}{py} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{help}\PYG{o}{\PYGZhy{}}\PYG{n}{commands}
   \PYG{o+ow}{or}\PYG{p}{:} \PYG{n}{setup}\PYG{o}{.}\PYG{n}{py} \PYG{n}{cmd} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{help}
\end{sphinxVerbatim}


\chapter{API documentation}
\label{\detokenize{api-docs:api-documentation}}\label{\detokenize{api-docs::doc}}

\section{etrsitrs}
\label{\detokenize{api-docs:etrsitrs}}\label{\detokenize{api-docs:module-etrsitrs}}\index{etrsitrs (module)}
The \sphinxcode{etrsitrs} Python module converts ITRS coordinates in various
reference frames to ETRS89 coordinates in the ETRF2000 reference frame
and vice versa. The conversions are described by 14 parameter
transforms, consisting of seven parameters and their associated rates
of change per year.

The transform and the coefficients are defined in the EUREF memo
/Specifications for reference frame fixing in the analysis of a EUREF
GPS campaign/ by Claude Boucher and Zuheir Altamimi. This module
uses version 8 bis of this memo, published on 2011-May-18.

The seven parameter transform of coordinates from frame A to frame B is
defined as
\begin{equation*}
\begin{split}\left(\begin{array}{c} x_B \\ y_B \\ z_B\end{array}\right) = 
\left(\begin{array}{c} x_A \\ y_A \\ z_A\end{array}\right) +
\left(\begin{array}{c} T1 \\ T2 \\ T3\end{array}\right) +
\left(\begin{array}{ccc}
    D  & -R3 &  R2 \\
    R3 &  D  & -R1 \\ 
   -R2 &  R1 &  D
\end{array}\right)
\left(\begin{array}{c} x_A \\ y_A \\ z_A\end{array}\right)\end{split}
\end{equation*}
Table XX lists the parameters to transform from ITRFyyyy to ETRF2000.

The inverse transform, given the same parameters, is
\begin{equation*}
\begin{split}\left(\begin{array}{c} x_A \\ y_A \\ z_A\end{array}\right) = 
\left(\begin{array}{c} x_B \\ y_B \\ z_B\end{array}\right) -
\left(\begin{array}{c} T1 \\ T2 \\ T3\end{array}\right) -
\left(\begin{array}{ccc}
    D  & -R3 &  R2 \\
    R3 &  D  & -R1 \\ 
   -R2 &  R1 &  D
\end{array}\right)
\left[\left(\begin{array}{c} x_B \\ y_B \\ z_B\end{array}\right) - 
      \left(\begin{array}{c} T1 \\ T2 \\ T3\end{array}\right)\right].\end{split}
\end{equation*}
Here, we used that the matrix \(I + M\), with \(I\) the identity matrix,
and \(M\) the matrix in the equations above, is a rotation
matrix. Rotation matrices are unitary, hence their inverse is equal to
their transpose.

The seven parameters \(Tn\), \(D\), and \(Rn\) are time
dependent. To correctly perform the transformation, the parameter set
\(P\) must first be propagated to the epoch at which the ITRF
coordinates were observed, or at which the ITRF coordinates are
desired, according to
\begin{equation*}
\begin{split}P(t) = P(t_0) + \dot{P}\times(t - t_0),\end{split}
\end{equation*}
where \(t_0\) is the epoch at which the parameters are valid
(2000.0 in this case), and \(t\) is the epoch at which the ITRF
coordinates are observed or required. Both are in units of years.


\subsection{Available sub modules}
\label{\detokenize{api-docs:available-sub-modules}}\begin{description}
\item[{parameterset}] \leavevmode
Organises the seven parameters necessary for the transforms.

\item[{datumtransformation}] \leavevmode
The actual forward- and reverse transform math, and handling of
annual change of the parameters.

\item[{main}] \leavevmode
Contains the \sphinxstyleemphasis{convert\_fn()} and \sphinxstyleemphasis{convert()} functions, as well as
a table of predefined transforms \sphinxstyleemphasis{TRANSFORM\_TABLE}, for supporting
these functions.

\end{description}


\section{Main}
\label{\detokenize{api-docs:module-etrsitrs.main}}\label{\detokenize{api-docs:main}}\index{etrsitrs.main (module)}
This module is home to the most important functions: \sphinxstyleemphasis{convert()} and
\sphinxstyleemphasis{convert\_fn()}. Use \sphinxstyleemphasis{convert()} if you are only interested in one or
two coordinate conversions, but create a conversion function with the
help of \sphinxstyleemphasis{convert\_fn()} if you want to convert more coordinates.

This module contains a hardcoded table of predefined
DatumTransformations, called \sphinxstyleemphasis{TRANSFORM\_TABLE}. The function
\sphinxstyleemphasis{find\_transform()} searches this table.
\index{convert\_fn() (in module etrsitrs.main)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.main.convert_fn}}\pysiglinewithargsret{\sphinxcode{etrsitrs.main.}\sphinxbfcode{convert\_fn}}{\emph{from\_frame}, \emph{to\_frame}, \emph{epoch}}{}
Returns a function \sphinxstyleemphasis{convert\_function(xyz\_m)} that converts an XYZ
vector from \sphinxcode{from\_frame} to \sphinxcode{to\_frame} at the given \sphinxcode{epoch}.

\sphinxstylestrong{Parameters}
\begin{description}
\item[{from\_frame}] \leavevmode{[}string{]}
Frame from which to ransform, e.g. ‘ITRF2008’.

\item[{to\_frame}] \leavevmode{[}string{]}
Frame to which to transform, e.g. ‘ETRF2000’.

\item[{epoch}] \leavevmode{[}number{]}
Epoch at which the coordinates were observed, or are
required, in years. Example: 2013.5.

\end{description}

\sphinxstylestrong{Raises}
\begin{description}
\item[{KeyError}] \leavevmode
If no appropriate transform is found

\end{description}

\sphinxstylestrong{Returns}

A function \sphinxstyleemphasis{f(xyz\_m)} that returns a \sphinxstyleemphasis{numpy.array} of length 3.

\sphinxstylestrong{Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{onsala\PYGZus{}itrf2008} \PYG{o}{=} \PYG{n}{numpy}\PYG{o}{.}\PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{3370658.542}\PYG{p}{,} \PYG{l+m+mf}{711877.138}\PYG{p}{,} \PYG{l+m+mf}{5349786.952}\PYG{p}{]}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{fn} \PYG{o}{=} \PYG{n}{convert\PYGZus{}fn}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF2008}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ETRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+m+mf}{2005.0}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{n+nb}{tuple}\PYG{p}{(}\PYG{n}{fn}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}itrf2008}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\PYG{g+go}{3370658.848, 711876.948, 5349786.770}
\end{sphinxVerbatim}

\end{fulllineitems}

\index{convert() (in module etrsitrs.main)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.main.convert}}\pysiglinewithargsret{\sphinxcode{etrsitrs.main.}\sphinxbfcode{convert}}{\emph{xyz\_m}, \emph{from\_frame}, \emph{to\_frame}, \emph{epoch}}{}
Converts the \sphinxstyleemphasis{xyz\_m} vector from \sphinxstyleemphasis{from\_frame} to \sphinxstyleemphasis{to\_frame}. Use
only if one has to convert one or two coordinates. Create a
conversion function with \sphinxstyleemphasis{convert\_fn()} if you have to convert a
large number of coordinates.

\sphinxstylestrong{Parameters}
\begin{description}
\item[{xyz\_m}] \leavevmode{[}sequence of 3 floats{]}
The coordinates to convert.

\item[{from\_frame}] \leavevmode{[}string{]}
Frame from which to ransform, e.g. ‘ITRF2008’.

\item[{to\_frame}] \leavevmode{[}string{]}
Frame to which to transform, e.g. ‘ETRF2000’.

\item[{epoch}] \leavevmode{[}number{]}
Epoch at which the coordinates were observed, or are
required, in years. Example: 2013.5.

\end{description}

\sphinxstylestrong{Raises}
\begin{description}
\item[{KeyError}] \leavevmode
If no appropriate transform is found.

\end{description}

\sphinxstylestrong{Returns}

A \sphinxstyleemphasis{numpy.array} of length 3.

\sphinxstylestrong{Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{onsala\PYGZus{}itrf2008} \PYG{o}{=} \PYG{n}{numpy}\PYG{o}{.}\PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{3370658.542}\PYG{p}{,} \PYG{l+m+mf}{711877.138}\PYG{p}{,} \PYG{l+m+mf}{5349786.952}\PYG{p}{]}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{onsala\PYGZus{}etrf2000} \PYG{o}{=} \PYG{n}{convert}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}itrf2008}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF2008}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ETRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+m+mf}{2005.0}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{n+nb}{tuple}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}etrf2000}\PYG{p}{)}\PYG{p}{)}
\PYG{g+go}{3370658.848, 711876.948, 5349786.770}
\end{sphinxVerbatim}

\end{fulllineitems}

\index{ETRF2000 (class in etrsitrs.main)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.main.ETRF2000}}\pysiglinewithargsret{\sphinxbfcode{class }\sphinxcode{etrsitrs.main.}\sphinxbfcode{ETRF2000}}{\emph{from\_frame}, \emph{parameters}, \emph{rates}, \emph{ref\_epoch}}{}
ETRF2000 is a subclass of \sphinxstyleemphasis{DatumTransformation} that makes it
possible to specify the 14 parameters from Boucher and Altamimi
(2011) in the units used in their memo. That is, first the three
translations in mm, then term D in units of \(10^{-9}\)
followed by the three rotations in mas. The \sphinxstyleemphasis{to\_frame} is set to
‘ETRF2000’.

The same order and units are used for the rates.

\sphinxstylestrong{Parameters}
\begin{description}
\item[{from\_frame}] \leavevmode{[}string{]}
The frame from which the parameters transform,
e.g. ‘ITRF2008’.

\item[{parameters}] \leavevmode{[}sequence of 7 floats{]}
The parameters {[}T1 (mm), T2 (mm), T3 (mm), D (1e-9), R1 (mas),
R2 (mas), R3 (mas){]}.

\item[{rates: sequence of 7 floats}] \leavevmode
The annual rates of change for the parameters {[}T1 (mm), T2
(mm), T3 (mm), D (1e-9), R1 (mas), R2 (mas), R3 (mas){]}.

\item[{ref\_epoch}] \leavevmode{[}float{]}
The reference epoch at which \sphinxstyleemphasis{parameters} are valid,
e.g. 2000.0

\end{description}

\sphinxstylestrong{Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{c+c1}{\PYGZsh{}       \textbar{}\PYGZsq{}T1\PYGZsq{} \textbar{}\PYGZsq{}T2\PYGZsq{} \textbar{}\PYGZsq{}T3\PYGZsq{}  \textbar{}\PYGZsq{}D\PYGZsq{}  \textbar{}\PYGZsq{}R1\PYGZsq{}  \textbar{}\PYGZsq{}R2\PYGZsq{}  \textbar{}\PYGZsq{}R3\PYGZsq{}   \textbar{}}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{c+c1}{\PYGZsh{}       \textbar{}(mm) \textbar{}(mm) \textbar{}(mm)  \textbar{}x1e\PYGZhy{}9\textbar{}(mas) \textbar{}(mas) \textbar{}(mas)  \textbar{} }
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{ETRF2000}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF2008}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{,}
\PYG{g+gp}{... }         \PYG{p}{[}\PYG{l+m+mf}{52.1}\PYG{p}{,} \PYG{l+m+mf}{49.3}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{58.5}\PYG{p}{,} \PYG{l+m+mf}{1.34}\PYG{p}{,} \PYG{l+m+mf}{0.891}\PYG{p}{,} \PYG{l+m+mf}{5.390}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{8.712}\PYG{p}{]}\PYG{p}{,}
\PYG{g+gp}{... }         \PYG{p}{[} \PYG{l+m+mf}{0.1}\PYG{p}{,}  \PYG{l+m+mf}{0.1}\PYG{p}{,}  \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.8}\PYG{p}{,} \PYG{l+m+mf}{0.08}\PYG{p}{,} \PYG{l+m+mf}{0.081}\PYG{p}{,} \PYG{l+m+mf}{0.490}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.792}\PYG{p}{]}\PYG{p}{,}
\PYG{g+gp}{... }         \PYG{l+m+mf}{2000.0}\PYG{p}{)}
\PYG{g+go}{ETRF2000(from\PYGZus{}frame = \PYGZsq{}ITRF2008\PYGZsq{}, to\PYGZus{}frame = \PYGZsq{}ETRF2000\PYGZsq{},}
\PYG{g+go}{        parameters = ParameterSet(translate\PYGZus{}m = array([ 0.0521,  0.0493, \PYGZhy{}0.0585]), term\PYGZus{}d = 1.3400e\PYGZhy{}09, rotate\PYGZus{}rad = array([  4.31968990e\PYGZhy{}09,   2.61314574e\PYGZhy{}08,  \PYGZhy{}4.22369679e\PYGZhy{}08])),}
\PYG{g+go}{        rates      = ParameterSet(translate\PYGZus{}m = array([ 0.0001,  0.0001, \PYGZhy{}0.0018]), term\PYGZus{}d = 8.0000e\PYGZhy{}11, rotate\PYGZus{}rad = array([  3.92699082e\PYGZhy{}10,   2.37558704e\PYGZhy{}09,  \PYGZhy{}3.83972435e\PYGZhy{}09])),}
\PYG{g+go}{        ref\PYGZus{}epoch  = 2000.0)}
\end{sphinxVerbatim}

\end{fulllineitems}

\index{find\_transform() (in module etrsitrs.main)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.main.find_transform}}\pysiglinewithargsret{\sphinxcode{etrsitrs.main.}\sphinxbfcode{find\_transform}}{\emph{from\_frame}, \emph{to\_frame}}{}
Finds the appropriate \sphinxstyleemphasis{DatumTransformation} in \sphinxstyleemphasis{TRANSFORM\_TABLE}.

\sphinxstylestrong{Parameters}
\begin{description}
\item[{from\_frame}] \leavevmode{[}string{]}
Frame from which to transform, e.g. ‘ITRF2008’.

\item[{to\_frame}] \leavevmode{[}string{]}
Frame to which to transform, e.g. ‘ETRF2000’

\end{description}

\sphinxstylestrong{Returns}

A \sphinxstyleemphasis{DatumTransformation} instance that can perform the requested
conversion.

\sphinxstylestrong{Raises}
\begin{description}
\item[{KeyError}] \leavevmode
If no appropriate transform is found.

\end{description}

\sphinxstylestrong{Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{find\PYGZus{}transform}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ETRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{g+go}{ETRF2000(from\PYGZus{}frame = \PYGZsq{}ITRF2000\PYGZsq{}, to\PYGZus{}frame = \PYGZsq{}ETRF2000\PYGZsq{},}
\PYG{g+go}{        parameters = ParameterSet(translate\PYGZus{}m = array([ 0.054,  0.051, \PYGZhy{}0.048]), term\PYGZus{}d = 0.0000e+00, rotate\PYGZus{}rad = array([  4.31968990e\PYGZhy{}09,   2.61314574e\PYGZhy{}08,  \PYGZhy{}4.22369679e\PYGZhy{}08])),}
\PYG{g+go}{        rates      = ParameterSet(translate\PYGZus{}m = array([ 0.,  0.,  0.]), term\PYGZus{}d = 0.0000e+00, rotate\PYGZus{}rad = array([  3.92699082e\PYGZhy{}10,   2.37558704e\PYGZhy{}09,  \PYGZhy{}3.83972435e\PYGZhy{}09])),}
\PYG{g+go}{        ref\PYGZus{}epoch  = 2000.0)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{find\PYGZus{}transform}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF2008}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ETRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{g+go}{ETRF2000(from\PYGZus{}frame = \PYGZsq{}ITRF2008\PYGZsq{}, to\PYGZus{}frame = \PYGZsq{}ETRF2000\PYGZsq{},}
\PYG{g+go}{        parameters = ParameterSet(translate\PYGZus{}m = array([ 0.0521,  0.0493, \PYGZhy{}0.0585]), term\PYGZus{}d = 1.3400e\PYGZhy{}09, rotate\PYGZus{}rad = array([  4.31968990e\PYGZhy{}09,   2.61314574e\PYGZhy{}08,  \PYGZhy{}4.22369679e\PYGZhy{}08])),}
\PYG{g+go}{        rates      = ParameterSet(translate\PYGZus{}m = array([ 0.0001,  0.0001, \PYGZhy{}0.0018]), term\PYGZus{}d = 8.0000e\PYGZhy{}11, rotate\PYGZus{}rad = array([  3.92699082e\PYGZhy{}10,   2.37558704e\PYGZhy{}09,  \PYGZhy{}3.83972435e\PYGZhy{}09])),}
\PYG{g+go}{        ref\PYGZus{}epoch  = 2000.0)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{find\PYGZus{}transform}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF1833}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ETRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{g+gt}{Traceback (most recent call last):}
\PYG{c}{...}
\PYG{g+gr}{KeyError}: \PYG{n}{\PYGZdq{}No \PYGZsq{}ITRF1833\PYGZsq{} \PYGZhy{}\PYGZgt{} \PYGZsq{}ETRF2000\PYGZsq{} in etrsitrs.main.TRANSFORM\PYGZus{}TABLE.\PYGZdq{}}
\end{sphinxVerbatim}

\end{fulllineitems}



\section{Parameter sets}
\label{\detokenize{api-docs:module-etrsitrs.parameterset}}\label{\detokenize{api-docs:parameter-sets}}\index{etrsitrs.parameterset (module)}\index{ParameterSet (class in etrsitrs.parameterset)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.parameterset.ParameterSet}}\pysiglinewithargsret{\sphinxbfcode{class }\sphinxcode{etrsitrs.parameterset.}\sphinxbfcode{ParameterSet}}{\emph{translate\_m}, \emph{term\_d}, \emph{rotate\_rad}}{}
A ParameterSet holds either the parameters \(Tn\), \(D\),
and \(Rn\), or their derivatives with respect to time, in
units of meters for \(Tn\), and radians for \(Rn\).

\sphinxstylestrong{Parameters}
\begin{description}
\item[{translate\_m}] \leavevmode{[}sequence of floats{]}
A vector containing the translation parameters T1, T2, and T3
in units of meters.

\item[{term\_d}] \leavevmode{[}float{]}
Term D from Boucher and Altamimi. It is the cosine of
a tiny rotation, minus 1.

\item[{rotate\_rad}] \leavevmode{[}sequence of floats{]}
The rotation parameters R1, R2, and R3 in units of radians.

\end{description}

\sphinxstylestrong{Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{ParameterSet}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mf}{0.01}\PYG{p}{,} \PYG{l+m+mf}{0.02}\PYG{p}{,} \PYG{l+m+mf}{0.03}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mf}{3.14e\PYGZhy{}9}\PYG{p}{,} \PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.2}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.3}\PYG{p}{]}\PYG{p}{)}
\PYG{g+go}{ParameterSet(translate\PYGZus{}m = array([ 0.01,  0.02,  0.03]), term\PYGZus{}d = 3.1400e\PYGZhy{}09, rotate\PYGZus{}rad = array([\PYGZhy{}0.1, \PYGZhy{}0.2, \PYGZhy{}0.3]))}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{ParameterSet}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mf}{0.01}\PYG{p}{,} \PYG{l+m+mf}{0.02}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mf}{3.14e\PYGZhy{}9}\PYG{p}{,} \PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.2}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.3}\PYG{p}{]}\PYG{p}{)}
\PYG{g+gt}{Traceback (most recent call last):}
\PYG{c}{...}
\PYG{g+gr}{ValueError}: \PYG{n}{translate\PYGZus{}m((0.01, 0.02)) must be e sequence of 3 floats.}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{ParameterSet}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mf}{0.01}\PYG{p}{,} \PYG{l+m+mf}{0.02}\PYG{p}{,} \PYG{l+m+mf}{0.03}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mf}{3.14}\PYG{p}{,} \PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.2}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.3}\PYG{p}{]}\PYG{p}{)}
\PYG{g+gt}{Traceback (most recent call last):}
\PYG{c}{...}
\PYG{g+gr}{ValueError}: \PYG{n}{term\PYGZus{}d(3.14) must be a very small number.}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{ParameterSet}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mf}{0.01}\PYG{p}{,} \PYG{l+m+mf}{0.02}\PYG{p}{,} \PYG{l+m+mf}{0.03}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mf}{3.14e\PYGZhy{}9}\PYG{p}{,} \PYG{l+m+mf}{15.0}\PYG{p}{)}
\PYG{g+gt}{Traceback (most recent call last):}
\PYG{c}{...}
\PYG{g+gr}{TypeError}: \PYG{n}{object of type \PYGZsq{}float\PYGZsq{} has no len()}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{ParameterSet}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mf}{0.01}\PYG{p}{,} \PYG{l+m+mf}{0.02}\PYG{p}{,} \PYG{l+m+mf}{0.03}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mf}{3.14e\PYGZhy{}9}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{15.0}\PYG{p}{,}\PYG{l+m+mi}{14}\PYG{p}{,}\PYG{l+m+mi}{13}\PYG{p}{,}\PYG{l+m+mi}{12}\PYG{p}{)}\PYG{p}{)}
\PYG{g+gt}{Traceback (most recent call last):}
\PYG{c}{...}
\PYG{g+gr}{ValueError}: \PYG{n}{rotate\PYGZus{}rad((15.0, 14, 13, 12)) must be e sequence of 3 floats.}
\end{sphinxVerbatim}

\sphinxcode{ParameterSet} also supports multiplication by a number and addition
of two \sphinxcode{ParameterSet} s

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{k+kn}{from} \PYG{n+nn}{math} \PYG{k}{import} \PYG{n}{pi}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{mm}  \PYG{o}{=} \PYG{l+m+mf}{0.001}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{mas} \PYG{o}{=} \PYG{n}{pi}\PYG{o}{/}\PYG{p}{(}\PYG{l+m+mf}{180.0}\PYG{o}{*}\PYG{l+m+mf}{3600.0}\PYG{o}{*}\PYG{l+m+mf}{1000.0}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{parameters} \PYG{o}{=} \PYG{n}{ParameterSet}\PYG{p}{(}\PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{52.1}\PYG{p}{,} \PYG{l+m+mf}{49.3}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{58.5}\PYG{p}{]}\PYG{p}{)}\PYG{o}{*}\PYG{n}{mm}\PYG{p}{,}
\PYG{g+gp}{... }                          \PYG{l+m+mf}{1.34e\PYGZhy{}9}\PYG{p}{,} 
\PYG{g+gp}{... }                          \PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{0.891}\PYG{p}{,} \PYG{l+m+mf}{5.390}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{8.712}\PYG{p}{]}\PYG{p}{)}\PYG{o}{*}\PYG{n}{mas}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{parameters}
\PYG{g+go}{ParameterSet(translate\PYGZus{}m = array([ 0.0521,  0.0493, \PYGZhy{}0.0585]), term\PYGZus{}d = 1.3400e\PYGZhy{}09, rotate\PYGZus{}rad = array([  4.31968990e\PYGZhy{}09,   2.61314574e\PYGZhy{}08,  \PYGZhy{}4.22369679e\PYGZhy{}08]))}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{rates}      \PYG{o}{=} \PYG{n}{ParameterSet}\PYG{p}{(}\PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.8}\PYG{p}{]}\PYG{p}{)}\PYG{o}{*}\PYG{n}{mm}\PYG{p}{,}
\PYG{g+gp}{... }                          \PYG{l+m+mf}{0.08e\PYGZhy{}9}\PYG{p}{,} 
\PYG{g+gp}{... }                          \PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{0.081}\PYG{p}{,} \PYG{l+m+mf}{0.490}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.792}\PYG{p}{]}\PYG{p}{)}\PYG{o}{*}\PYG{n}{mas}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{rates}
\PYG{g+go}{ParameterSet(translate\PYGZus{}m = array([ 0.0001,  0.0001, \PYGZhy{}0.0018]), term\PYGZus{}d = 8.0000e\PYGZhy{}11, rotate\PYGZus{}rad = array([  3.92699082e\PYGZhy{}10,   2.37558704e\PYGZhy{}09,  \PYGZhy{}3.83972435e\PYGZhy{}09]))}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{ref\PYGZus{}epoch} \PYG{o}{=} \PYG{l+m+mf}{2000.0}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{parameters} \PYG{o}{+} \PYG{n}{rates}\PYG{o}{*}\PYG{p}{(}\PYG{l+m+mf}{2010.0} \PYG{o}{\PYGZhy{}} \PYG{n}{ref\PYGZus{}epoch}\PYG{p}{)}
\PYG{g+go}{ParameterSet(translate\PYGZus{}m = array([ 0.0531,  0.0503, \PYGZhy{}0.0765]), term\PYGZus{}d = 2.1400e\PYGZhy{}09, rotate\PYGZus{}rad = array([  8.24668072e\PYGZhy{}09,   4.98873278e\PYGZhy{}08,  \PYGZhy{}8.06342114e\PYGZhy{}08]))}
\end{sphinxVerbatim}
\index{matrix() (etrsitrs.parameterset.ParameterSet method)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.parameterset.ParameterSet.matrix}}\pysiglinewithargsret{\sphinxbfcode{matrix}}{}{}
\sphinxstylestrong{Returns}

The matrix
\begin{equation*}
\begin{split}\left(\begin{array}{ccc}
D  & -R3 &  R2 \\
R3 &  D  & -R1 \\ 
-R2 &  R1 &  D
\end{array}\right)\end{split}
\end{equation*}
\sphinxstylestrong{Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{ps} \PYG{o}{=} \PYG{n}{ParameterSet}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mf}{0.01}\PYG{p}{,} \PYG{l+m+mf}{0.02}\PYG{p}{,} \PYG{l+m+mf}{0.03}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mf}{3.14e\PYGZhy{}9}\PYG{p}{,} \PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.2}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.3}\PYG{p}{]}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{ps}\PYG{o}{.}\PYG{n}{matrix}\PYG{p}{(}\PYG{p}{)}
\PYG{g+go}{array([[  3.14000000e\PYGZhy{}09,   3.00000000e\PYGZhy{}01,  \PYGZhy{}2.00000000e\PYGZhy{}01],}
\PYG{g+go}{       [ \PYGZhy{}3.00000000e\PYGZhy{}01,   3.14000000e\PYGZhy{}09,   1.00000000e\PYGZhy{}01],}
\PYG{g+go}{       [  2.00000000e\PYGZhy{}01,  \PYGZhy{}1.00000000e\PYGZhy{}01,   3.14000000e\PYGZhy{}09]])}
\end{sphinxVerbatim}

\end{fulllineitems}


\end{fulllineitems}



\section{Datum transformations}
\label{\detokenize{api-docs:datum-transformations}}\label{\detokenize{api-docs:module-etrsitrs.datumtransformation}}\index{etrsitrs.datumtransformation (module)}
The \sphinxstyleemphasis{datumtransformation} module contains the actual transform math,
implemented in the \sphinxstyleemphasis{forward\_transform()} and \sphinxstyleemphasis{reverse\_transform()}
functions, as well as the \sphinxstyleemphasis{DatumTransformation} class, which manages
rates of change of parameters and wraps the forward- and reverse-
transforms.
\index{forward\_transform() (in module etrsitrs.datumtransformation)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.datumtransformation.forward_transform}}\pysiglinewithargsret{\sphinxcode{etrsitrs.datumtransformation.}\sphinxbfcode{forward\_transform}}{\emph{xyz\_m}, \emph{translate\_m}, \emph{rotation\_matrix}}{}
Transform \sphinxstyleemphasis{xyz\_m} given a translation vector and a rotation
matrix. Only use \sphinxstyleemphasis{translate\_m} and \sphinxstyleemphasis{matrix} from the
\sphinxstyleemphasis{ParameterSet} returned by \sphinxstyleemphasis{propagate\_parameters()}. Implements
\begin{equation*}
\begin{split}\left(\begin{array}{c} x_B \\ y_B \\ z_B\end{array}\right) = 
\left(\begin{array}{c} x_A \\ y_A \\ z_A\end{array}\right) +
\left(\begin{array}{c} T1 \\ T2 \\ T3\end{array}\right) +
\left(\begin{array}{ccc}
D  & -R3 &  R2 \\
R3 &  D  & -R1 \\ 
-R2 &  R1 &  D
\end{array}\right)
\left(\begin{array}{c} x_A \\ y_A \\ z_A\end{array}\right)\end{split}
\end{equation*}
\sphinxstylestrong{Parameters}
\begin{description}
\item[{xyz\_m}] \leavevmode{[}numpy.array of length 3{]}
The coordinates to transform in meters.

\item[{translate\_m}] \leavevmode{[}numpy.array of length 3{]}
Propagated (T1, T2, T3).

\item[{rotation\_matrix}] \leavevmode{[}numpy.array of shape (3, 3){]}
The rotation matrix obtained by calling the
\sphinxstyleemphasis{ParameterSet.matrix()} method on the result of
\sphinxstyleemphasis{propagate\_parameters()}.

\end{description}

\sphinxstylestrong{Returns}

A numpy.array of length 3 with the transformed coordinates.

\sphinxstylestrong{Examples}

At epoch 2000.0:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{k+kn}{from} \PYG{n+nn}{numpy} \PYG{k}{import} \PYG{n}{array}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{parameters} \PYG{o}{=} \PYG{n}{ParameterSet}\PYG{p}{(}\PYG{n}{translate\PYGZus{}m} \PYG{o}{=} \PYG{n}{array}\PYG{p}{(}\PYG{p}{[} \PYG{l+m+mf}{0.0521}\PYG{p}{,} \PYG{l+m+mf}{0.0493}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.0585}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,}
\PYG{g+gp}{... }                          \PYG{n}{term\PYGZus{}d} \PYG{o}{=} \PYG{l+m+mf}{1.3400e\PYGZhy{}09}\PYG{p}{,}
\PYG{g+gp}{... }                          \PYG{n}{rotate\PYGZus{}rad} \PYG{o}{=} \PYG{n}{array}\PYG{p}{(}\PYG{p}{[}  \PYG{l+m+mf}{4.31968990e\PYGZhy{}09}\PYG{p}{,}   \PYG{l+m+mf}{2.61314574e\PYGZhy{}08}\PYG{p}{,}  \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{4.22369679e\PYGZhy{}08}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{onsala\PYGZus{}itrf2008} \PYG{o}{=} \PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{3370658.542}\PYG{p}{,} \PYG{l+m+mf}{711877.138}\PYG{p}{,} \PYG{l+m+mf}{5349786.952}\PYG{p}{]}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{onsala\PYGZus{}etrf2000} \PYG{o}{=} \PYG{n}{forward\PYGZus{}transform}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}itrf2008}\PYG{p}{,}
\PYG{g+gp}{... }                                    \PYG{n}{parameters}\PYG{o}{.}\PYG{n}{translate\PYGZus{}m}\PYG{p}{,}
\PYG{g+gp}{... }                                    \PYG{n}{parameters}\PYG{o}{.}\PYG{n}{matrix}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{n+nb}{tuple}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}etrf2000}\PYG{p}{)}\PYG{p}{)}
\PYG{g+go}{3370658.768, 711877.023, 5349786.816}
\end{sphinxVerbatim}

\end{fulllineitems}

\index{reverse\_transform() (in module etrsitrs.datumtransformation)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.datumtransformation.reverse_transform}}\pysiglinewithargsret{\sphinxcode{etrsitrs.datumtransformation.}\sphinxbfcode{reverse\_transform}}{\emph{xyz\_m}, \emph{translate\_m}, \emph{rotation\_matrix}}{}
The opposite of \sphinxstyleemphasis{forward\_transform()}. Transform xyz given a
translation vector and a rotation matrix. Only use \sphinxstyleemphasis{translate\_m}
and \sphinxstyleemphasis{matrix} from the \sphinxstyleemphasis{ParameterSet} returned by
\sphinxstyleemphasis{propagate\_parameters()}. Implements
\begin{equation*}
\begin{split}\left(\begin{array}{c} x_A \\ y_A \\ z_A\end{array}\right) = 
\left(\begin{array}{c} x_B \\ y_B \\ z_B\end{array}\right) -
\left(\begin{array}{c} T1 \\ T2 \\ T3\end{array}\right) -
\left(\begin{array}{ccc}
    D  & -R3 &  R2 \\
    R3 &  D  & -R1 \\ 
    -R2 &  R1 &  D
\end{array}\right)
\left[\left(\begin{array}{c} x_B \\ y_B \\ z_B\end{array}\right) - 
      \left(\begin{array}{c} T1 \\ T2 \\ T3\end{array}\right)\right].\end{split}
\end{equation*}
\sphinxstylestrong{Parameters}
\begin{description}
\item[{xyz\_m}] \leavevmode{[}numpy.array of length 3{]}
The coordinates to transform in meters.

\item[{translate\_m}] \leavevmode{[}numpy.array of length 3{]}
Propagated (T1, T2, T3).

\item[{rotation\_matrix}] \leavevmode{[}numpy.array of shape (3, 3){]}
The rotation matrix obtained by calling the
\sphinxstyleemphasis{ParameterSet.matrix()} method on the result of
\sphinxstyleemphasis{propagate\_parameters()}.

\end{description}

\sphinxstylestrong{Returns}

A numpy.array of length 3 with the transformed coordinates.

\sphinxstylestrong{Examples}

\sphinxstylestrong{Examples}

At epoch 2000.0:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{k+kn}{from} \PYG{n+nn}{numpy} \PYG{k}{import} \PYG{n}{array}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{parameters} \PYG{o}{=} \PYG{n}{ParameterSet}\PYG{p}{(}\PYG{n}{translate\PYGZus{}m} \PYG{o}{=} \PYG{n}{array}\PYG{p}{(}\PYG{p}{[} \PYG{l+m+mf}{0.0521}\PYG{p}{,} \PYG{l+m+mf}{0.0493}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.0585}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,}
\PYG{g+gp}{... }                          \PYG{n}{term\PYGZus{}d} \PYG{o}{=} \PYG{l+m+mf}{1.3400e\PYGZhy{}09}\PYG{p}{,}
\PYG{g+gp}{... }                          \PYG{n}{rotate\PYGZus{}rad} \PYG{o}{=} \PYG{n}{array}\PYG{p}{(}\PYG{p}{[}  \PYG{l+m+mf}{4.31968990e\PYGZhy{}09}\PYG{p}{,}   \PYG{l+m+mf}{2.61314574e\PYGZhy{}08}\PYG{p}{,}  \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{4.22369679e\PYGZhy{}08}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{onsala\PYGZus{}etrf2000} \PYG{o}{=} \PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{3370658.768}\PYG{p}{,} \PYG{l+m+mf}{711877.023}\PYG{p}{,} \PYG{l+m+mf}{5349786.816}\PYG{p}{]}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{onsala\PYGZus{}itrf2008} \PYG{o}{=} \PYG{n}{reverse\PYGZus{}transform}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}etrf2000}\PYG{p}{,}
\PYG{g+gp}{... }                                    \PYG{n}{parameters}\PYG{o}{.}\PYG{n}{translate\PYGZus{}m}\PYG{p}{,}
\PYG{g+gp}{... }                                    \PYG{n}{parameters}\PYG{o}{.}\PYG{n}{matrix}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{n+nb}{tuple}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}itrf2008}\PYG{p}{)}\PYG{p}{)}
\PYG{g+go}{3370658.542, 711877.138, 5349786.952}
\end{sphinxVerbatim}

\end{fulllineitems}

\index{DatumTransformation (class in etrsitrs.datumtransformation)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.datumtransformation.DatumTransformation}}\pysiglinewithargsret{\sphinxbfcode{class }\sphinxcode{etrsitrs.datumtransformation.}\sphinxbfcode{DatumTransformation}}{\emph{from\_frame}, \emph{to\_frame}, \emph{parameters}, \emph{rates}, \emph{ref\_epoch}}{}
A datum transformation is used to transform coordinates from
reference frame A to reference frame B. It is defined by a frame
\sphinxstyleemphasis{from} which to transform, a frame \sphinxstyleemphasis{to} which to transform, the
transformation parameters at the reference epoch, and their rates
of change.

\sphinxstylestrong{Parameters}
\begin{description}
\item[{from\_frame}] \leavevmode{[}string{]}
The reference frame \sphinxstyleemphasis{from} which the parameters transform, for
example ‘ITRF2008’

\item[{to\_frame}] \leavevmode{[}string{]}
The reference frame \sphinxstyleemphasis{to} which the parameters transform, for
example ‘ETRF2000’

\item[{parameters}] \leavevmode{[}ParameterSet{]}
The values of the transform parameters \(Tn\), \(D\),
and \(Rn\).

\item[{rates}] \leavevmode{[}ParameterSet{]}
The annual rates of change for the parameters \(Tn\),
\(D\), and \(Rn\).

\item[{ref\_epoch}] \leavevmode{[}float{]}
The year to which the parameters are referenced. The
parameters at \sphinxcode{epoch} are \sphinxcode{parameters} + \sphinxcode{rates} *
(epoch - ref\_epoch)

\end{description}

\sphinxstylestrong{Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{k+kn}{from} \PYG{n+nn}{numpy} \PYG{k}{import} \PYG{n}{array}\PYG{p}{,} \PYG{n}{pi}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{mm}  \PYG{o}{=} \PYG{l+m+mf}{0.001}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{mas} \PYG{o}{=} \PYG{n}{pi}\PYG{o}{/}\PYG{p}{(}\PYG{l+m+mf}{180.0}\PYG{o}{*}\PYG{l+m+mf}{3600.0}\PYG{o}{*}\PYG{l+m+mf}{1000.0}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{transform} \PYG{o}{=} \PYG{n}{DatumTransformation}\PYG{p}{(}
\PYG{g+gp}{... }    \PYG{n}{from\PYGZus{}frame} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF2008}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{to\PYGZus{}frame} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ETRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
\PYG{g+gp}{... }    \PYG{n}{parameters} \PYG{o}{=} \PYG{n}{ParameterSet}\PYG{p}{(}\PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{52.1}\PYG{p}{,} \PYG{l+m+mf}{49.3}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{58.5}\PYG{p}{]}\PYG{p}{)}\PYG{o}{*}\PYG{n}{mm}\PYG{p}{,}
\PYG{g+gp}{... }                              \PYG{l+m+mf}{1.34e\PYGZhy{}9}\PYG{p}{,} 
\PYG{g+gp}{... }                              \PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{0.891}\PYG{p}{,} \PYG{l+m+mf}{5.390}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{8.712}\PYG{p}{]}\PYG{p}{)}\PYG{o}{*}\PYG{n}{mas}\PYG{p}{)}\PYG{p}{,}
\PYG{g+gp}{... }    \PYG{n}{rates}      \PYG{o}{=} \PYG{n}{ParameterSet}\PYG{p}{(}\PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.8}\PYG{p}{]}\PYG{p}{)}\PYG{o}{*}\PYG{n}{mm}\PYG{p}{,}
\PYG{g+gp}{... }                              \PYG{l+m+mf}{0.08e\PYGZhy{}9}\PYG{p}{,} 
\PYG{g+gp}{... }                              \PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{0.081}\PYG{p}{,} \PYG{l+m+mf}{0.490}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.792}\PYG{p}{]}\PYG{p}{)}\PYG{o}{*}\PYG{n}{mas}\PYG{p}{)}\PYG{p}{,}
\PYG{g+gp}{... }    \PYG{n}{ref\PYGZus{}epoch}  \PYG{o}{=} \PYG{l+m+mf}{2000.0}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{transform}
\PYG{g+go}{DatumTransformation(from\PYGZus{}frame = \PYGZsq{}ITRF2008\PYGZsq{}, to\PYGZus{}frame = \PYGZsq{}ETRF2000\PYGZsq{},}
\PYG{g+go}{        parameters = ParameterSet(translate\PYGZus{}m = array([ 0.0521,  0.0493, \PYGZhy{}0.0585]), term\PYGZus{}d = 1.3400e\PYGZhy{}09, rotate\PYGZus{}rad = array([  4.31968990e\PYGZhy{}09,   2.61314574e\PYGZhy{}08,  \PYGZhy{}4.22369679e\PYGZhy{}08])),}
\PYG{g+go}{        rates      = ParameterSet(translate\PYGZus{}m = array([ 0.0001,  0.0001, \PYGZhy{}0.0018]), term\PYGZus{}d = 8.0000e\PYGZhy{}11, rotate\PYGZus{}rad = array([  3.92699082e\PYGZhy{}10,   2.37558704e\PYGZhy{}09,  \PYGZhy{}3.83972435e\PYGZhy{}09])),}
\PYG{g+go}{        ref\PYGZus{}epoch  = 2000.0)}
\end{sphinxVerbatim}

The parameters are only valid for the reference epoch. If one
needs to convert coordinates at any other epoch, the parameters
must first be propagated to that epoch with the help of the rates
of change:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{epoch} \PYG{o}{=} \PYG{l+m+mf}{2005.0}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{par\PYGZus{}2005} \PYG{o}{=} \PYG{n}{transform}\PYG{o}{.}\PYG{n}{propagate\PYGZus{}parameters}\PYG{p}{(}\PYG{n}{epoch}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{par\PYGZus{}2005}
\PYG{g+go}{ParameterSet(translate\PYGZus{}m = array([ 0.0526,  0.0498, \PYGZhy{}0.0675]), term\PYGZus{}d = 1.7400e\PYGZhy{}09, rotate\PYGZus{}rad = array([  6.28318531e\PYGZhy{}09,   3.80093926e\PYGZhy{}08,  \PYGZhy{}6.14355897e\PYGZhy{}08]))}
\end{sphinxVerbatim}

These propagated parameters can now be used to actually transform
coordinates from the ITRF2008 frame to ETRF2000, at the epoch
2005.0. Here is an example for the Onsala Space Observatory, a
EUREF class A station. According to the EUREF web site for this
station,
\sphinxurl{http://www.epncb.oma.be/\_productsservices/coordinates/crd4station.php?station=ONSA},
Onsala has the following coordinates:


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|T|T|}
\hline
\sphinxstylethead{\sphinxstyletheadfamily 
Frame
\unskip}\relax &\sphinxstylethead{\sphinxstyletheadfamily 
Epoch
(y)
\unskip}\relax &\sphinxstylethead{\sphinxstyletheadfamily 
X
(m)
\unskip}\relax &\sphinxstylethead{\sphinxstyletheadfamily 
Y
(m)
\unskip}\relax &\sphinxstylethead{\sphinxstyletheadfamily 
Z
(m)
\unskip}\relax \\
\hline
ETRF2000
&
2005.0
&
\(3370658.847 \pm 0.001\)
&
\(711876.949 \pm 0.001\)
&
\(5349786.771 \pm 0.001\)
\\
\hline
ITRF2008
&
2005.0
&
\(3370658.542 \pm 0.001\)
&
\(711877.138 \pm 0.001\)
&
\(5349786.952 \pm 0.001\)
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

Let’s see how this works out:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{onsala\PYGZus{}itrf2008} \PYG{o}{=} \PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{3370658.542}\PYG{p}{,} \PYG{l+m+mf}{711877.138}\PYG{p}{,} \PYG{l+m+mf}{5349786.952}\PYG{p}{]}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{itrf\PYGZus{}to\PYGZus{}etrf} \PYG{o}{=} \PYG{n}{transform}\PYG{o}{.}\PYG{n}{convert\PYGZus{}fn}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF2008}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ETRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{epoch} \PYG{o}{=} \PYG{l+m+mf}{2005.0}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{onsala\PYGZus{}etrf2000} \PYG{o}{=} \PYG{n}{itrf\PYGZus{}to\PYGZus{}etrf}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}itrf2008}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{n+nb}{tuple}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}etrf2000}\PYG{p}{)}\PYG{p}{)}
\PYG{g+go}{3370658.848, 711876.948, 5349786.770}
\end{sphinxVerbatim}

Not bad at all. We also have the reverse transform, from ETRF2000 to ITRF2008:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{onsala\PYGZus{}etrf2000} \PYG{o}{=} \PYG{n}{array}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mf}{3370658.848}\PYG{p}{,} \PYG{l+m+mf}{711876.948}\PYG{p}{,} \PYG{l+m+mf}{5349786.770}\PYG{p}{]}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{etrf\PYGZus{}to\PYGZus{}itrf} \PYG{o}{=} \PYG{n}{transform}\PYG{o}{.}\PYG{n}{convert\PYGZus{}fn}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ETRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF2008}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{epoch} \PYG{o}{=} \PYG{l+m+mf}{2005.0}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{onsala\PYGZus{}itrf2008} \PYG{o}{=} \PYG{n}{etrf\PYGZus{}to\PYGZus{}itrf}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}etrf2000}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{n+nb}{tuple}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}itrf2008}\PYG{p}{)}\PYG{p}{)}
\PYG{g+go}{3370658.542, 711877.138, 5349786.952}
\end{sphinxVerbatim}

For single use, one can call the \sphinxstyleemphasis{convert} method, which under the
hood first creates a conversion function. Note that this is fairly
wasteful in terms of cpu cycles:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}}
\PYG{g+gp}{... }      \PYG{n+nb}{tuple}\PYG{p}{(}\PYG{n}{transform}\PYG{o}{.}\PYG{n}{convert}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}itrf2008}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF2008}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ETRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+m+mf}{2005.0}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\PYG{g+go}{3370658.848, 711876.948, 5349786.770}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}}
\PYG{g+gp}{... }      \PYG{n+nb}{tuple}\PYG{p}{(}\PYG{n}{transform}\PYG{o}{.}\PYG{n}{convert}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}etrf2000}\PYG{p}{,} \PYG{n}{from\PYGZus{}frame} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ETRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{to\PYGZus{}frame} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF2008}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{epoch} \PYG{o}{=} \PYG{l+m+mf}{2005.0}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\PYG{g+go}{3370658.542, 711877.138, 5349786.952}
\end{sphinxVerbatim}

But be careful:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{transform}\PYG{o}{.}\PYG{n}{convert}\PYG{p}{(}\PYG{n}{onsala\PYGZus{}etrf2000}\PYG{p}{,} \PYG{n}{from\PYGZus{}frame} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ETRF2000}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{to\PYGZus{}frame} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ITRF2005}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{epoch} \PYG{o}{=} \PYG{l+m+mf}{2005.0}\PYG{p}{)}
\PYG{g+gt}{Traceback (most recent call last):}
\PYG{c}{...}
\PYG{g+gr}{ValueError}: \PYG{n}{No transform \PYGZsq{}ETRF2000\PYGZsq{} \PYGZhy{}\PYGZgt{} \PYGZsq{}ITRF2005\PYGZsq{} only \PYGZsq{}ETRF2000\PYGZsq{} \PYGZlt{}\PYGZhy{}\PYGZgt{} \PYGZsq{}ITRF2008\PYGZsq{}.}
\end{sphinxVerbatim}
\index{propagate\_parameters() (etrsitrs.datumtransformation.DatumTransformation method)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.datumtransformation.DatumTransformation.propagate_parameters}}\pysiglinewithargsret{\sphinxbfcode{propagate\_parameters}}{\emph{epoch}}{}
Propagate the parameter set to  \sphinxstyleemphasis{epoch}. Only use parameters
propagated with this method to \sphinxstyleemphasis{epoch} whenever you want to do
a coordinate conversion.

\sphinxstylestrong{Parameters}
\begin{description}
\item[{epoch}] \leavevmode{[}number{]}
The year at which one desires the parameters,
e.g. 2013.2.

\end{description}

\sphinxstylestrong{Returns}

A ParameterSet.

\end{fulllineitems}

\index{convert\_fn() (etrsitrs.datumtransformation.DatumTransformation method)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.datumtransformation.DatumTransformation.convert_fn}}\pysiglinewithargsret{\sphinxbfcode{convert\_fn}}{\emph{from\_frame}, \emph{to\_frame}, \emph{epoch}}{}
Returns a function \sphinxstyleemphasis{convert(xyz\_m)} that converts an XYZ
vector from \sphinxcode{from\_frame} to \sphinxcode{to\_frame}. If \sphinxcode{from\_frame}
is equal to \sphinxcode{self.to\_frame} and v.v., the function performs
the inverse transform.

\sphinxstylestrong{Parameters}
\begin{description}
\item[{from\_frame}] \leavevmode{[}string{]}
Frame from which to ransform, e.g. ‘ITRF2008’.

\item[{to\_frame}] \leavevmode{[}string{]}
Frame to which to transform, e.g. ‘ETRF2000’.

\item[{epoch}] \leavevmode{[}number{]}
Epoch at which the coordinates were observed, or are
required, in years. Example: 2013.5.

\end{description}

\sphinxstylestrong{Raises}
\begin{description}
\item[{ValueError}] \leavevmode
if \sphinxstyleemphasis{to\_frame} or \sphinxstyleemphasis{from\_frame} is not in \sphinxstyleemphasis{{[}self.to\_frame,
self.from\_frame{]}}.

\end{description}

\sphinxstylestrong{Returns}

A function \sphinxstyleemphasis{f(xyz\_m)} that returns a \sphinxstyleemphasis{numpy.array} of length
3.

\end{fulllineitems}

\index{convert() (etrsitrs.datumtransformation.DatumTransformation method)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-docs:etrsitrs.datumtransformation.DatumTransformation.convert}}\pysiglinewithargsret{\sphinxbfcode{convert}}{\emph{xyz\_m}, \emph{from\_frame}, \emph{to\_frame}, \emph{epoch}}{}
Converts the \sphinxstyleemphasis{xyz\_m} vector from \sphinxstyleemphasis{from\_frame} to
\sphinxstyleemphasis{to\_frame}. If \sphinxstyleemphasis{from\_frame} is equal to \sphinxstyleemphasis{self.to\_frame} and
v.v., the function performs the inverse transform. Use only if
one has to convert one or two coordinates. Create a conversion
function with \sphinxstyleemphasis{DatumTransformation.convert\_fn()} if you have
to convert a large number of coordinates.

\sphinxstylestrong{Parameters}
\begin{description}
\item[{xyz\_m}] \leavevmode{[}sequence of 3 floats{]}
The coordinates to convert.

\item[{from\_frame}] \leavevmode{[}string{]}
Frame from which to ransform, e.g. ‘ITRF2008’.

\item[{to\_frame}] \leavevmode{[}string{]}
Frame to which to transform, e.g. ‘ETRF2000’.

\item[{epoch}] \leavevmode{[}number{]}
Epoch at which the coordinates were observed, or are
required, in years. Example: 2013.5.

\end{description}

\sphinxstylestrong{Raises}
\begin{description}
\item[{ValueError}] \leavevmode
if \sphinxstyleemphasis{to\_frame} or \sphinxstyleemphasis{from\_frame} is not in \sphinxstyleemphasis{{[}self.to\_frame,
self.from\_frame{]}}.

\end{description}

\sphinxstylestrong{Returns}

A \sphinxstyleemphasis{numpy.array} of length 3.

\end{fulllineitems}


\end{fulllineitems}



\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\DUrole{xref,std,std-ref}{modindex}

\item {} 
\DUrole{xref,std,std-ref}{search}

\end{itemize}


\renewcommand{\indexname}{Python Module Index}
\begin{sphinxtheindex}
\def\bigletter#1{{\Large\sffamily#1}\nopagebreak\vspace{1mm}}
\bigletter{e}
\item {\sphinxstyleindexentry{etrsitrs}}\sphinxstyleindexpageref{api-docs:\detokenize{module-etrsitrs}}
\item {\sphinxstyleindexentry{etrsitrs.datumtransformation}}\sphinxstyleindexpageref{api-docs:\detokenize{module-etrsitrs.datumtransformation}}
\item {\sphinxstyleindexentry{etrsitrs.main}}\sphinxstyleindexpageref{api-docs:\detokenize{module-etrsitrs.main}}
\item {\sphinxstyleindexentry{etrsitrs.parameterset}}\sphinxstyleindexpageref{api-docs:\detokenize{module-etrsitrs.parameterset}}
\end{sphinxtheindex}

\renewcommand{\indexname}{Index}
\printindex
\end{document}