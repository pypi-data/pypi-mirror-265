{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/inference/inference/xinference/web/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{TabContext,TabList,TabPanel}from'@mui/lab';import{Box,Tab}from'@mui/material';import React,{useContext,useEffect,useState}from'react';import{useCookies}from'react-cookie';import{useNavigate}from'react-router-dom';import{ApiContext}from'../../components/apiContext';import ErrorMessageSnackBar from'../../components/errorMessageSnackBar';import Title from'../../components/Title';import LaunchAudio from'./launchAudio';import LaunchCustom from'./launchCustom';import LaunchEmbedding from'./launchEmbedding';import LaunchImage from'./launchImage';import LaunchLLM from'./launchLLM';import LaunchRerank from'./launchRerank';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LaunchModel=function LaunchModel(){var endPoint=useContext(ApiContext).endPoint;var _React$useState=React.useState('1'),_React$useState2=_slicedToArray(_React$useState,2),value=_React$useState2[0],setValue=_React$useState2[1];var _useState=useState(-1),_useState2=_slicedToArray(_useState,2),gpuAvailable=_useState2[0],setGPUAvailable=_useState2[1];var _useContext=useContext(ApiContext),setErrorMsg=_useContext.setErrorMsg;var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,1),cookie=_useCookies2[0];var navigate=useNavigate();var handleTabChange=function handleTabChange(event,newValue){setValue(newValue);};useEffect(function(){if(cookie.token===''||cookie.token===undefined){return;}if(cookie.token==='need_auth'){navigate('/login',{replace:true});return;}if(gpuAvailable===-1){fetch(endPoint+'/v1/cluster/devices',{method:'GET',headers:{'Content-Type':'application/json'}}).then(function(res){if(!res.ok){// Usually, if some errors happen here, check if the cluster is available\nres.json().then(function(errorData){setErrorMsg(\"Server error: \".concat(res.status,\" - \").concat(errorData.detail||'Unknown error'));});}else{res.json().then(function(data){setGPUAvailable(parseInt(data,10));});}});}},[cookie.token]);return/*#__PURE__*/_jsxs(Box,{m:\"20px\",children:[/*#__PURE__*/_jsx(Title,{title:\"Launch Model\"}),/*#__PURE__*/_jsx(ErrorMessageSnackBar,{}),/*#__PURE__*/_jsxs(TabContext,{value:value,children:[/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'divider'},children:/*#__PURE__*/_jsxs(TabList,{value:value,onChange:handleTabChange,\"aria-label\":\"tabs\",children:[/*#__PURE__*/_jsx(Tab,{label:\"Language Models\",value:\"1\"}),/*#__PURE__*/_jsx(Tab,{label:\"Embedding Models\",value:\"2\"}),/*#__PURE__*/_jsx(Tab,{label:\"Rerank Models\",value:\"3\"}),/*#__PURE__*/_jsx(Tab,{label:\"Image Models\",value:\"4\"}),/*#__PURE__*/_jsx(Tab,{label:\"Audio Models\",value:\"5\"}),/*#__PURE__*/_jsx(Tab,{label:\"Custom Models\",value:\"6\"})]})}),/*#__PURE__*/_jsx(TabPanel,{value:\"1\",sx:{padding:0},children:/*#__PURE__*/_jsx(LaunchLLM,{gpuAvailable:gpuAvailable})}),/*#__PURE__*/_jsx(TabPanel,{value:\"2\",sx:{padding:0},children:/*#__PURE__*/_jsx(LaunchEmbedding,{})}),/*#__PURE__*/_jsx(TabPanel,{value:\"3\",sx:{padding:0},children:/*#__PURE__*/_jsx(LaunchRerank,{})}),/*#__PURE__*/_jsx(TabPanel,{value:\"4\",sx:{paddding:0},children:/*#__PURE__*/_jsx(LaunchImage,{})}),/*#__PURE__*/_jsx(TabPanel,{value:\"5\",sx:{padding:0},children:/*#__PURE__*/_jsx(LaunchAudio,{})}),/*#__PURE__*/_jsx(TabPanel,{value:\"6\",sx:{padding:0},children:/*#__PURE__*/_jsx(LaunchCustom,{gpuAvailable:gpuAvailable})})]})]});};export default LaunchModel;","map":{"version":3,"names":["TabContext","TabList","TabPanel","Box","Tab","React","useContext","useEffect","useState","useCookies","useNavigate","ApiContext","ErrorMessageSnackBar","Title","LaunchAudio","LaunchCustom","LaunchEmbedding","LaunchImage","LaunchLLM","LaunchRerank","jsx","_jsx","jsxs","_jsxs","LaunchModel","endPoint","_React$useState","_React$useState2","_slicedToArray","value","setValue","_useState","_useState2","gpuAvailable","setGPUAvailable","_useContext","setErrorMsg","_useCookies","_useCookies2","cookie","navigate","handleTabChange","event","newValue","token","undefined","replace","fetch","method","headers","then","res","ok","json","errorData","concat","status","detail","data","parseInt","m","children","title","sx","borderBottom","borderColor","onChange","label","padding","paddding"],"sources":["/home/runner/work/inference/inference/xinference/web/ui/src/scenes/launch_model/index.js"],"sourcesContent":["import { TabContext, TabList, TabPanel } from '@mui/lab'\nimport { Box, Tab } from '@mui/material'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { useCookies } from 'react-cookie'\nimport { useNavigate } from 'react-router-dom'\n\nimport { ApiContext } from '../../components/apiContext'\nimport ErrorMessageSnackBar from '../../components/errorMessageSnackBar'\nimport Title from '../../components/Title'\nimport LaunchAudio from './launchAudio'\nimport LaunchCustom from './launchCustom'\nimport LaunchEmbedding from './launchEmbedding'\nimport LaunchImage from './launchImage'\nimport LaunchLLM from './launchLLM'\nimport LaunchRerank from './launchRerank'\n\nconst LaunchModel = () => {\n  let endPoint = useContext(ApiContext).endPoint\n  const [value, setValue] = React.useState('1')\n  const [gpuAvailable, setGPUAvailable] = useState(-1)\n\n  const { setErrorMsg } = useContext(ApiContext)\n  const [cookie] = useCookies(['token'])\n  const navigate = useNavigate()\n\n  const handleTabChange = (event, newValue) => {\n    setValue(newValue)\n  }\n\n  useEffect(() => {\n    if (cookie.token === '' || cookie.token === undefined) {\n      return\n    }\n    if (cookie.token === 'need_auth') {\n      navigate('/login', { replace: true })\n      return\n    }\n\n    if (gpuAvailable === -1) {\n      fetch(endPoint + '/v1/cluster/devices', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }).then((res) => {\n        if (!res.ok) {\n          // Usually, if some errors happen here, check if the cluster is available\n          res.json().then((errorData) => {\n            setErrorMsg(\n              `Server error: ${res.status} - ${\n                errorData.detail || 'Unknown error'\n              }`\n            )\n          })\n        } else {\n          res.json().then((data) => {\n            setGPUAvailable(parseInt(data, 10))\n          })\n        }\n      })\n    }\n  }, [cookie.token])\n\n  return (\n    <Box m=\"20px\">\n      <Title title=\"Launch Model\" />\n      <ErrorMessageSnackBar />\n      <TabContext value={value}>\n        <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n          <TabList value={value} onChange={handleTabChange} aria-label=\"tabs\">\n            <Tab label=\"Language Models\" value=\"1\" />\n            <Tab label=\"Embedding Models\" value=\"2\" />\n            <Tab label=\"Rerank Models\" value=\"3\" />\n            <Tab label=\"Image Models\" value=\"4\" />\n            <Tab label=\"Audio Models\" value=\"5\" />\n            <Tab label=\"Custom Models\" value=\"6\" />\n          </TabList>\n        </Box>\n        <TabPanel value=\"1\" sx={{ padding: 0 }}>\n          <LaunchLLM gpuAvailable={gpuAvailable} />\n        </TabPanel>\n        <TabPanel value=\"2\" sx={{ padding: 0 }}>\n          <LaunchEmbedding />\n        </TabPanel>\n        <TabPanel value=\"3\" sx={{ padding: 0 }}>\n          <LaunchRerank />\n        </TabPanel>\n        <TabPanel value=\"4\" sx={{ paddding: 0 }}>\n          <LaunchImage />\n        </TabPanel>\n        <TabPanel value=\"5\" sx={{ padding: 0 }}>\n          <LaunchAudio />\n        </TabPanel>\n        <TabPanel value=\"6\" sx={{ padding: 0 }}>\n          <LaunchCustom gpuAvailable={gpuAvailable} />\n        </TabPanel>\n      </TabContext>\n    </Box>\n  )\n}\n\nexport default LaunchModel\n"],"mappings":"6IAAA,OAASA,UAAU,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,UAAU,CACxD,OAASC,GAAG,CAAEC,GAAG,KAAQ,eAAe,CACxC,MAAO,CAAAC,KAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,OAASC,UAAU,KAAQ,cAAc,CACzC,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,OAASC,UAAU,KAAQ,6BAA6B,CACxD,MAAO,CAAAC,oBAAoB,KAAM,uCAAuC,CACxE,MAAO,CAAAC,KAAK,KAAM,wBAAwB,CAC1C,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,MAAO,CAAAC,eAAe,KAAM,mBAAmB,CAC/C,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,MAAO,CAAAC,YAAY,KAAM,gBAAgB,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEzC,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACxB,GAAI,CAAAC,QAAQ,CAAGnB,UAAU,CAACK,UAAU,CAAC,CAACc,QAAQ,CAC9C,IAAAC,eAAA,CAA0BrB,KAAK,CAACG,QAAQ,CAAC,GAAG,CAAC,CAAAmB,gBAAA,CAAAC,cAAA,CAAAF,eAAA,IAAtCG,KAAK,CAAAF,gBAAA,IAAEG,QAAQ,CAAAH,gBAAA,IACtB,IAAAI,SAAA,CAAwCvB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAAwB,UAAA,CAAAJ,cAAA,CAAAG,SAAA,IAA7CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEpC,IAAAG,WAAA,CAAwB7B,UAAU,CAACK,UAAU,CAAC,CAAtCyB,WAAW,CAAAD,WAAA,CAAXC,WAAW,CACnB,IAAAC,WAAA,CAAiB5B,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,CAAA6B,YAAA,CAAAV,cAAA,CAAAS,WAAA,IAA/BE,MAAM,CAAAD,YAAA,IACb,GAAM,CAAAE,QAAQ,CAAG9B,WAAW,CAAC,CAAC,CAE9B,GAAM,CAAA+B,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIC,KAAK,CAAEC,QAAQ,CAAK,CAC3Cb,QAAQ,CAACa,QAAQ,CAAC,CACpB,CAAC,CAEDpC,SAAS,CAAC,UAAM,CACd,GAAIgC,MAAM,CAACK,KAAK,GAAK,EAAE,EAAIL,MAAM,CAACK,KAAK,GAAKC,SAAS,CAAE,CACrD,OACF,CACA,GAAIN,MAAM,CAACK,KAAK,GAAK,WAAW,CAAE,CAChCJ,QAAQ,CAAC,QAAQ,CAAE,CAAEM,OAAO,CAAE,IAAK,CAAC,CAAC,CACrC,OACF,CAEA,GAAIb,YAAY,GAAK,CAAC,CAAC,CAAE,CACvBc,KAAK,CAACtB,QAAQ,CAAG,qBAAqB,CAAE,CACtCuB,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAACC,IAAI,CAAC,SAACC,GAAG,CAAK,CACf,GAAI,CAACA,GAAG,CAACC,EAAE,CAAE,CACX;AACAD,GAAG,CAACE,IAAI,CAAC,CAAC,CAACH,IAAI,CAAC,SAACI,SAAS,CAAK,CAC7BlB,WAAW,kBAAAmB,MAAA,CACQJ,GAAG,CAACK,MAAM,QAAAD,MAAA,CACzBD,SAAS,CAACG,MAAM,EAAI,eAAe,CAEvC,CAAC,CACH,CAAC,CAAC,CACJ,CAAC,IAAM,CACLN,GAAG,CAACE,IAAI,CAAC,CAAC,CAACH,IAAI,CAAC,SAACQ,IAAI,CAAK,CACxBxB,eAAe,CAACyB,QAAQ,CAACD,IAAI,CAAE,EAAE,CAAC,CAAC,CACrC,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACnB,MAAM,CAACK,KAAK,CAAC,CAAC,CAElB,mBACErB,KAAA,CAACpB,GAAG,EAACyD,CAAC,CAAC,MAAM,CAAAC,QAAA,eACXxC,IAAA,CAACR,KAAK,EAACiD,KAAK,CAAC,cAAc,CAAE,CAAC,cAC9BzC,IAAA,CAACT,oBAAoB,GAAE,CAAC,cACxBW,KAAA,CAACvB,UAAU,EAAC6B,KAAK,CAAEA,KAAM,CAAAgC,QAAA,eACvBxC,IAAA,CAAClB,GAAG,EAAC4D,EAAE,CAAE,CAAEC,YAAY,CAAE,CAAC,CAAEC,WAAW,CAAE,SAAU,CAAE,CAAAJ,QAAA,cACnDtC,KAAA,CAACtB,OAAO,EAAC4B,KAAK,CAAEA,KAAM,CAACqC,QAAQ,CAAEzB,eAAgB,CAAC,aAAW,MAAM,CAAAoB,QAAA,eACjExC,IAAA,CAACjB,GAAG,EAAC+D,KAAK,CAAC,iBAAiB,CAACtC,KAAK,CAAC,GAAG,CAAE,CAAC,cACzCR,IAAA,CAACjB,GAAG,EAAC+D,KAAK,CAAC,kBAAkB,CAACtC,KAAK,CAAC,GAAG,CAAE,CAAC,cAC1CR,IAAA,CAACjB,GAAG,EAAC+D,KAAK,CAAC,eAAe,CAACtC,KAAK,CAAC,GAAG,CAAE,CAAC,cACvCR,IAAA,CAACjB,GAAG,EAAC+D,KAAK,CAAC,cAAc,CAACtC,KAAK,CAAC,GAAG,CAAE,CAAC,cACtCR,IAAA,CAACjB,GAAG,EAAC+D,KAAK,CAAC,cAAc,CAACtC,KAAK,CAAC,GAAG,CAAE,CAAC,cACtCR,IAAA,CAACjB,GAAG,EAAC+D,KAAK,CAAC,eAAe,CAACtC,KAAK,CAAC,GAAG,CAAE,CAAC,EAChC,CAAC,CACP,CAAC,cACNR,IAAA,CAACnB,QAAQ,EAAC2B,KAAK,CAAC,GAAG,CAACkC,EAAE,CAAE,CAAEK,OAAO,CAAE,CAAE,CAAE,CAAAP,QAAA,cACrCxC,IAAA,CAACH,SAAS,EAACe,YAAY,CAAEA,YAAa,CAAE,CAAC,CACjC,CAAC,cACXZ,IAAA,CAACnB,QAAQ,EAAC2B,KAAK,CAAC,GAAG,CAACkC,EAAE,CAAE,CAAEK,OAAO,CAAE,CAAE,CAAE,CAAAP,QAAA,cACrCxC,IAAA,CAACL,eAAe,GAAE,CAAC,CACX,CAAC,cACXK,IAAA,CAACnB,QAAQ,EAAC2B,KAAK,CAAC,GAAG,CAACkC,EAAE,CAAE,CAAEK,OAAO,CAAE,CAAE,CAAE,CAAAP,QAAA,cACrCxC,IAAA,CAACF,YAAY,GAAE,CAAC,CACR,CAAC,cACXE,IAAA,CAACnB,QAAQ,EAAC2B,KAAK,CAAC,GAAG,CAACkC,EAAE,CAAE,CAAEM,QAAQ,CAAE,CAAE,CAAE,CAAAR,QAAA,cACtCxC,IAAA,CAACJ,WAAW,GAAE,CAAC,CACP,CAAC,cACXI,IAAA,CAACnB,QAAQ,EAAC2B,KAAK,CAAC,GAAG,CAACkC,EAAE,CAAE,CAAEK,OAAO,CAAE,CAAE,CAAE,CAAAP,QAAA,cACrCxC,IAAA,CAACP,WAAW,GAAE,CAAC,CACP,CAAC,cACXO,IAAA,CAACnB,QAAQ,EAAC2B,KAAK,CAAC,GAAG,CAACkC,EAAE,CAAE,CAAEK,OAAO,CAAE,CAAE,CAAE,CAAAP,QAAA,cACrCxC,IAAA,CAACN,YAAY,EAACkB,YAAY,CAAEA,YAAa,CAAE,CAAC,CACpC,CAAC,EACD,CAAC,EACV,CAAC,CAEV,CAAC,CAED,cAAe,CAAAT,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}