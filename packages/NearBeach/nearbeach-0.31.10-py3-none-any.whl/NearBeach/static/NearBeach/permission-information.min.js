"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[9207],{9743:(e,s,t)=>{t.r(s),t.d(s,{default:()=>D});var o=t(641),r=t(3751);const i={class:"card"},l={class:"card-body"},a=(0,o.Lk)("h1",null,"Permission Information",-1),n=(0,o.Lk)("br",null,null,-1),p=["href"],d=(0,o.Lk)("hr",null,null,-1),u={key:0,class:"alert alert-danger"},c={class:"row"},m=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Permission Set Details"),(0,o.Lk)("p",{class:"text-instructions"}," Please supply a unique name for the permission set. ")],-1),y={class:"col-md-8"},h=(0,o.Lk)("label",null,"Permission Set Name",-1),v=(0,o.Lk)("hr",null,null,-1),f={class:"row"},_=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Administration Permissions"),(0,o.Lk)("p",{class:"text-instructions"}," The following are administration permissions. These should be only applied to permission sets where they are only granted to administrators. ")],-1),k={class:"col-md-8"},b=(0,o.Lk)("hr",null,null,-1),M={class:"row"},g=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Customers and Organisations")],-1),L={class:"col-md-8"},C=(0,o.Lk)("hr",null,null,-1),S={class:"row"},P=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Object Permissions")],-1),U={class:"col-md-8"},R=(0,o.Lk)("hr",null,null,-1),w={class:"row"},F=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Extra Permissions"),(0,o.Lk)("p",{class:"text-instructions"},' The following permissions are added permissions on top of any read only. For example, if a read only user requires the ability to upload documentation, then you will need to enable the "Document" permissions here. ')],-1),V={class:"col-md-8"},T=(0,o.Lk)("hr",null,null,-1),q={class:"row"},A=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Misc Permissions"),(0,o.Lk)("p",{class:"text-instructions"})],-1),x={class:"col-md-8"},j={key:1},G={key:2,class:"row submit-row"},O={class:"col-md-12"};var N=t(33);const I={class:"row"},Q={name:"SinglePermissionProperties",components:{NSelect:t(1080).A},props:{property:{type:String,default:""},propertyLabel:{type:String,default:""},propertyValue:{type:Number,default:0},listOfChoices:{type:Array,default:()=>[]}},data(){return{propertyModel:this.propertyValue,fixListOfChoices:[]}},watch:{propertyModel(){null===this.propertyModel&&(this.propertyModel=0),this.$emit("update_property_value",{property:this.property,value:this.propertyModel})}},methods:{getLabel(e){const s=this.listOfChoices.filter((s=>s[0]===e));return 0===s.length?"":s[0][1]}},mounted(){this.fixListOfChoices=this.listOfChoices.map((e=>({label:e[1],value:e[0]})))}};var E=t(6262);const $=(0,E.A)(Q,[["render",function(e,s,t,r,i,l){const a=(0,o.g2)("n-select");return(0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("label",null,(0,N.toDisplayString)(t.propertyLabel),1),(0,o.bF)(a,{options:i.fixListOfChoices,value:i.propertyModel,"onUpdate:value":s[0]||(s[0]=e=>i.propertyModel=e),class:"form-group"},null,8,["options","value"])])}]]);var B=t(9827);const H={name:"PermissionInformation",components:{SinglePermissionProperties:$},props:{permissionBoolean:{type:Array,default:()=>[]},permissionLevel:{type:Array,default:()=>[]},permissionSetResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},theme:{type:String,default:""}},data(){return{permissionSetNameModel:this.permissionSetResults[0].fields.permission_set_name,administrationAssignUserToGroupModel:this.permissionSetResults[0].fields.administration_assign_user_to_group,administrationCreateGroupModel:this.permissionSetResults[0].fields.administration_create_group,administrationCreatePermissionSetModel:this.permissionSetResults[0].fields.administration_create_permission_set,administrationCreateUserModel:this.permissionSetResults[0].fields.administration_create_user,bugClientModel:this.permissionSetResults[0].fields.bug_client,customerModel:this.permissionSetResults[0].fields.customer,kanbanModel:this.permissionSetResults[0].fields.kanban_board,kanbanCardModel:this.permissionSetResults[0].fields.kanban_card,organisationModel:this.permissionSetResults[0].fields.organisation,projectModel:this.permissionSetResults[0].fields.project,requestForChangeModel:this.permissionSetResults[0].fields.request_for_change,requirementModel:this.permissionSetResults[0].fields.requirement,tagModel:this.permissionSetResults[0].fields.tag,taskModel:this.permissionSetResults[0].fields.task,documentModel:this.permissionSetResults[0].fields.document,kanbanCommentModel:this.permissionSetResults[0].fields.kanban_comment,projectHistoryModel:this.permissionSetResults[0].fields.project_history,taskHistoryModel:this.permissionSetResults[0].fields.task_history}},mixins:[B.A],methods:{saveChanges(){this.$store.dispatch("newToast",{header:"Updating Permission Set",message:"Please wait, whilst we update the permission set",extra_classes:"bg-warning text-dark",delay:0,unique_type:"update_permission_set"});const e=new FormData;e.set("permission_set_id",this.permissionSetResults[0].pk),e.set("permission_set_name",this.permissionSetNameModel),e.set("administration_assign_user_to_group",this.administrationAssignUserToGroupModel),e.set("administration_create_group",this.administrationCreateGroupModel),e.set("administration_create_permission_set",this.administrationCreatePermissionSetModel),e.set("administration_create_user",this.administrationCreateUserModel),e.set("bug_client",this.bugClientModel),e.set("customer",this.customerModel),e.set("kanban_board",this.kanbanModel),e.set("kanban_card",this.kanbanCardModel),e.set("organisation",this.organisationModel),e.set("project",this.projectModel),e.set("requirement",this.requirementModel),e.set("request_for_change",this.requestForChangeModel),e.set("task",this.taskModel),e.set("document",this.documentModel),e.set("kanban_comment",this.kanbanCommentModel),e.set("project_history",this.projectHistoryModel),e.set("task_history",this.taskHistoryModel),e.set("tag",this.tagModel),this.axios.post(`${this.rootUrl}permission_set_information/${this.permissionSetResults[0].pk}/save/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Updated Permission Set",message:"We have updated your permission set successfully",extra_classes:"bg-success",unique_type:"update_permission_set"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error saving changes",message:`Sorry, we could not save your changes. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"update_permission_set"})}))},updatePropertyValue(e){this[e.property]=e.value}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl})}},D=(0,E.A)(H,[["render",function(e,s,t,N,I,Q){const E=(0,o.g2)("single-permission-properties"),$=(0,o.g2)("n-config-provider");return(0,o.uX)(),(0,o.Wv)($,{theme:e.getTheme(t.theme)},{default:(0,o.k6)((()=>[(0,o.Lk)("div",i,[(0,o.Lk)("div",l,[a,n,(0,o.Lk)("a",{href:`${this.rootUrl}search/permission_set/`},"Go back to permission list",8,p),d,1===this.permissionSetResults[0].pk?((0,o.uX)(),(0,o.CE)("div",u," Can not edit administration permission set. ")):(0,o.Q3)("v-if",!0),(0,o.Q3)(" BASIC INFORMATION "),(0,o.Lk)("div",c,[m,(0,o.Lk)("div",y,[h,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>I.permissionSetNameModel=e),class:"form-control"},null,512),[[r.vModelText,I.permissionSetNameModel]])])]),v,(0,o.Q3)(" ADMINISTRATION PERMISSIONS "),(0,o.Lk)("div",f,[_,(0,o.Lk)("div",k,[(0,o.bF)(E,{property:"administrationAssignUserToGroupModel","property-label":"Assign User To Group Model","property-value":I.administrationAssignUserToGroupModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[1]||(s[1]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"administrationCreateGroupModel","property-label":"Create Groups","property-value":I.administrationCreateGroupModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[2]||(s[2]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"administrationCreatePermissionSetModel","property-label":"Create Permission Sets","property-value":I.administrationCreatePermissionSetModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[3]||(s[3]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"administrationCreateUserModel","property-label":"Create Users","property-value":I.administrationCreateUserModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[4]||(s[4]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),b,(0,o.Q3)(" Customers and Organisations "),(0,o.Lk)("div",M,[g,(0,o.Lk)("div",L,[(0,o.bF)(E,{property:"customerModel","property-label":"Customers","property-value":I.customerModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[5]||(s[5]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"organisationModel","property-label":"Organisations","property-value":I.organisationModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[6]||(s[6]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),C,(0,o.Q3)(" Object Permissions "),(0,o.Lk)("div",S,[P,(0,o.Lk)("div",U,[(0,o.bF)(E,{property:"kanbanModel","property-label":"Kanban Boards","property-value":I.kanbanModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[7]||(s[7]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"kanbanCardModel","property-label":"Kanban Cards","property-value":I.kanbanCardModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[8]||(s[8]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"projectModel","property-label":"Projects","property-value":I.projectModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[9]||(s[9]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"taskModel","property-label":"Tasks","property-value":I.taskModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[10]||(s[10]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"requestForChangeModel","property-label":"Request for Change","property-value":I.requestForChangeModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[11]||(s[11]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"requirementModel","property-label":"Requirements","property-value":I.requirementModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[12]||(s[12]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),R,(0,o.Q3)(" Extra Permissions "),(0,o.Lk)("div",w,[F,(0,o.Lk)("div",V,[(0,o.bF)(E,{property:"documentModel","property-label":"Grants upload ability","property-value":I.documentModel,"list-of-choices":t.permissionBoolean,onUpdate_property_value:s[13]||(s[13]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"kanbanCommentModel","property-label":"Grants comments on Kanban Boards","property-value":I.kanbanCommentModel,"list-of-choices":t.permissionBoolean,onUpdate_property_value:s[14]||(s[14]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"projectHistoryModel","property-label":"Grants comments on Projects","property-value":I.projectHistoryModel,"list-of-choices":t.permissionBoolean,onUpdate_property_value:s[15]||(s[15]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"taskHistoryModel","property-label":"Grants comments on Tasks","property-value":I.taskHistoryModel,"list-of-choices":t.permissionBoolean,onUpdate_property_value:s[16]||(s[16]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),T,(0,o.Q3)(" MISC "),(0,o.Lk)("div",q,[A,(0,o.Lk)("div",x,[(0,o.bF)(E,{property:"bugClientModel","property-label":"Configure bug clients","property-value":I.bugClientModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[17]||(s[17]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(E,{property:"tagModel","property-label":"Configure tags","property-value":I.tagModel,"list-of-choices":t.permissionLevel,onUpdate_property_value:s[18]||(s[18]=e=>Q.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),(0,o.Q3)(" Save Changes "),(0,o.Q3)(" Don't show if we are looking at admin "),1!==this.permissionSetResults[0].pk?((0,o.uX)(),(0,o.CE)("hr",j)):(0,o.Q3)("v-if",!0),1!==this.permissionSetResults[0].pk?((0,o.uX)(),(0,o.CE)("div",G,[(0,o.Lk)("div",O,[(0,o.Lk)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:s[19]||(s[19]=(...e)=>Q.saveChanges&&Q.saveChanges(...e))},"Save Permission Set")])])):(0,o.Q3)("v-if",!0)])])])),_:1},8,["theme"])}]])},9827:(e,s,t)=>{t.d(s,{A:()=>r});var o=t(7413);const r={data:()=>({darkTheme:o.a}),methods:{getTheme:e=>"dark"===e?o.a:null}}}}]);